var fu=Object.defineProperty;var hu=(n,e,t)=>e in n?fu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Zt=(n,e,t)=>(hu(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function re(){}const ns=n=>n;function pu(n,e){for(const t in e)n[t]=e[t];return n}function la(n){return n()}function Xo(){return Object.create(null)}function be(n){n.forEach(la)}function Vn(n){return typeof n=="function"}function ge(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ni;function $e(n,e){return n===e?!0:(Ni||(Ni=document.createElement("a")),Ni.href=e,n===Ni.href)}function _u(n){return Object.keys(n).length===0}function mu(n,...e){if(n==null){for(const i of e)i(void 0);return re}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Q(n,e,t){n.$$.on_destroy.push(mu(e,t))}function gu(n,e,t,i){if(n){const s=aa(n,e,t,i);return n[0](s)}}function aa(n,e,t,i){return n[1]&&i?pu(t.ctx.slice(),n[1](i(e))):t.ctx}function bu(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],r=Math.max(e.dirty.length,s.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|s[l];return o}return e.dirty|s}return e.dirty}function vu(n,e,t,i,s,o){if(s){const r=aa(e,t,i,o);n.p(r,s)}}function yu(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function G(n,e,t){return n.set(t),e}function ca(n){return n&&Vn(n.destroy)?n.destroy:re}const ua=typeof window<"u";let io=ua?()=>window.performance.now():()=>Date.now(),so=ua?n=>requestAnimationFrame(n):re;const Rn=new Set;function da(n){Rn.forEach(e=>{e.c(n)||(Rn.delete(e),e.f())}),Rn.size!==0&&so(da)}function oo(n){let e;return Rn.size===0&&so(da),{promise:new Promise(t=>{Rn.add(e={c:n,f:t})}),abort(){Rn.delete(e)}}}const wu=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function p(n,e){n.appendChild(e)}function fa(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function ku(n){const e=g("style");return e.textContent="/* empty */",Cu(fa(n),e),e.sheet}function Cu(n,e){return p(n.head||n,e),e.sheet}function M(n,e,t){n.insertBefore(e,t||null)}function P(n){n.parentNode&&n.parentNode.removeChild(n)}function ht(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function g(n){return document.createElement(n)}function Eu(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function te(n){return document.createTextNode(n)}function C(){return te(" ")}function pt(){return te("")}function N(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function m(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Re(n,e,t){e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:m(n,e,t)}function ha(n){return n===""?null:+n}function Su(n){return Array.from(n.childNodes)}function Ee(n,e){e=""+e,n.data!==e&&(n.data=e)}function zt(n,e){n.value=e??""}function tt(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}let Oi;function Iu(){if(Oi===void 0){Oi=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Oi=!0}}return Oi}function rn(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const i=g("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=Iu();let o;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=N(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=N(i.contentWindow,"resize",e),e()}),p(n,i),()=>{(s||o&&i.contentWindow)&&o(),P(i)}}function oe(n,e,t){n.classList.toggle(e,!!t)}function pa(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}class Tu{constructor(e=!1){Zt(this,"is_svg",!1);Zt(this,"e");Zt(this,"n");Zt(this,"t");Zt(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=Eu(t.nodeName):this.e=g(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(P)}}const Mi=new Map;let Li=0;function Nu(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Ou(n,e){const t={stylesheet:ku(e),rules:{}};return Mi.set(n,t),t}function Fi(n,e,t,i,s,o,r,l=0){const a=16.666/i;let c=`{
`;for(let v=0;v<=1;v+=a){const y=e+(t-e)*o(v);c+=v*100+`%{${r(y,1-y)}}
`}const u=c+`100% {${r(t,1-t)}}
}`,d=`__svelte_${Nu(u)}_${l}`,f=fa(n),{stylesheet:h,rules:_}=Mi.get(f)||Ou(f,n);_[d]||(_[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const b=n.style.animation||"";return n.style.animation=`${b?`${b}, `:""}${d} ${i}ms linear ${s}ms 1 both`,Li+=1,d}function Bi(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=t.length-i.length;s&&(n.style.animation=i.join(", "),Li-=s,Li||Du())}function Du(){so(()=>{Li||(Mi.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&P(e)}),Mi.clear())})}let ai;function ii(n){ai=n}function _a(){if(!ai)throw new Error("Function called outside component initialization");return ai}function Ru(n){_a().$$.on_mount.push(n)}function Gt(){const n=_a();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const o=pa(e,t,{cancelable:i});return s.slice().forEach(r=>{r.call(n,o)}),!o.defaultPrevented}return!0}}const On=[],le=[];let An=[];const Ms=[],Au=Promise.resolve();let Ls=!1;function Pu(){Ls||(Ls=!0,Au.then(ma))}function we(n){An.push(n)}function Ae(n){Ms.push(n)}const ws=new Set;let In=0;function ma(){if(In!==0)return;const n=ai;do{try{for(;In<On.length;){const e=On[In];In++,ii(e),Mu(e.$$)}}catch(e){throw On.length=0,In=0,e}for(ii(null),On.length=0,In=0;le.length;)le.pop()();for(let e=0;e<An.length;e+=1){const t=An[e];ws.has(t)||(ws.add(t),t())}An.length=0}while(On.length);for(;Ms.length;)Ms.pop()();Ls=!1,ws.clear(),ii(n)}function Mu(n){if(n.fragment!==null){n.update(),be(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(we)}}function Lu(n){const e=[],t=[];An.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),An=e}let Zn;function ro(){return Zn||(Zn=Promise.resolve(),Zn.then(()=>{Zn=null})),Zn}function gn(n,e,t){n.dispatchEvent(pa(`${e?"intro":"outro"}${t}`))}const Ai=new Set;let Ht;function qe(){Ht={r:0,c:[],p:Ht}}function We(){Ht.r||be(Ht.c),Ht=Ht.p}function L(n,e){n&&n.i&&(Ai.delete(n),n.i(e))}function H(n,e,t,i){if(n&&n.o){if(Ai.has(n))return;Ai.add(n),Ht.c.push(()=>{Ai.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const lo={duration:0};function ga(n,e,t){const i={direction:"in"};let s=e(n,t,i),o=!1,r,l,a=0;function c(){r&&Bi(n,r)}function u(){const{delay:f=0,duration:h=300,easing:_=ns,tick:b=re,css:v}=s||lo;v&&(r=Fi(n,0,1,h,f,_,v,a++)),b(0,1);const y=io()+f,E=y+h;l&&l.abort(),o=!0,we(()=>gn(n,!0,"start")),l=oo(w=>{if(o){if(w>=E)return b(1,0),gn(n,!0,"end"),c(),o=!1;if(w>=y){const I=_((w-y)/h);b(I,1-I)}}return o})}let d=!1;return{start(){d||(d=!0,Bi(n),Vn(s)?(s=s(i),ro().then(u)):u())},invalidate(){d=!1},end(){o&&(c(),o=!1)}}}function ba(n,e,t){const i={direction:"out"};let s=e(n,t,i),o=!0,r;const l=Ht;l.r+=1;let a;function c(){const{delay:u=0,duration:d=300,easing:f=ns,tick:h=re,css:_}=s||lo;_&&(r=Fi(n,1,0,d,u,f,_));const b=io()+u,v=b+d;we(()=>gn(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),oo(y=>{if(o){if(y>=v)return h(0,1),gn(n,!1,"end"),--l.r||be(l.c),!1;if(y>=b){const E=f((y-b)/d);h(1-E,E)}}return o})}return Vn(s)?ro().then(()=>{s=s(i),c()}):c(),{end(u){u&&"inert"in n&&(n.inert=a),u&&s.tick&&s.tick(1,0),o&&(r&&Bi(n,r),o=!1)}}}function me(n,e,t,i){let o=e(n,t,{direction:"both"}),r=i?0:1,l=null,a=null,c=null,u;function d(){c&&Bi(n,c)}function f(_,b){const v=_.b-r;return b*=Math.abs(v),{a:r,b:_.b,d:v,duration:b,start:_.start,end:_.start+b,group:_.group}}function h(_){const{delay:b=0,duration:v=300,easing:y=ns,tick:E=re,css:w}=o||lo,I={start:io()+b,b:_};_||(I.group=Ht,Ht.r+=1),"inert"in n&&(_?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),l||a?a=I:(w&&(d(),c=Fi(n,r,_,v,b,y,w)),_&&E(0,1),l=f(I,v),we(()=>gn(n,_,"start")),oo(T=>{if(a&&T>a.start&&(l=f(a,v),a=null,gn(n,l.b,"start"),w&&(d(),c=Fi(n,r,l.b,l.duration,0,y,o.css))),l){if(T>=l.end)E(r=l.b,1-r),gn(n,l.b,"end"),a||(l.b?d():--l.group.r||be(l.group.c)),l=null;else if(T>=l.start){const j=T-l.start;r=l.a+l.d*y(j/l.duration),E(r,1-r)}}return!!(l||a)}))}return{run(_){Vn(o)?ro().then(()=>{o=o({direction:_?"in":"out"}),h(_)}):h(_)},end(){d(),l=a=null}}}function Ie(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Pe(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function se(n){n&&n.c()}function ne(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),we(()=>{const o=n.$$.on_mount.map(la).filter(Vn);n.$$.on_destroy?n.$$.on_destroy.push(...o):be(o),n.$$.on_mount=[]}),s.forEach(we)}function ie(n,e){const t=n.$$;t.fragment!==null&&(Lu(t.after_update),be(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Fu(n,e){n.$$.dirty[0]===-1&&(On.push(n),Pu(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Te(n,e,t,i,s,o,r=null,l=[-1]){const a=ai;ii(n);const c=n.$$={fragment:null,ctx:[],props:o,update:re,not_equal:s,bound:Xo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Xo(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(d,f,...h)=>{const _=h.length?h[0]:f;return c.ctx&&s(c.ctx[d],c.ctx[d]=_)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](_),u&&Fu(n,d)),f}):[],c.update(),u=!0,be(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const d=Su(e.target);c.fragment&&c.fragment.l(d),d.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&L(n.$$.fragment),ne(n,e.target,e.anchor),ma()}ii(a)}class Ne{constructor(){Zt(this,"$$");Zt(this,"$$set")}$destroy(){ie(this,1),this.$destroy=re}$on(e,t){if(!Vn(t))return re;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!_u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Bu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Bu);const Tn=[];function at(n,e=re){let t;const i=new Set;function s(l){if(ge(n,l)&&(n=l,t)){const a=!Tn.length;for(const c of i)c[1](),Tn.push(c,n);if(a){for(let c=0;c<Tn.length;c+=2)Tn[c][0](Tn[c+1]);Tn.length=0}}}function o(l){s(l(n))}function r(l,a=re){const c=[l,a];return i.add(c),i.size===1&&(t=e(s,o)||re),l(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:r}}let Jo=localStorage.getItem("builds"),Zo=0,xo=localStorage.getItem("changelogSeen"),Bt=at({}),qt=at({}),bt=at({armor:0,magicDmg:0,meleeDmg:0,rangedDmg:0,hpRegen:0,endurance:0,sightRange:0,walkSpeed:0,jumpPower:0,ammoReturn:0,height:0}),jt=at({}),ao=at([]),ks=at({}),kt=at(),co=at(!1),Rt=at(Jo?JSON.parse(Jo):{}),xt=at(!1),Pi=at(xo?JSON.parse(xo):!1),vn=at(!1),Bn=at({}),qn=at({}),qu=at({}),Nt=at({armor:{min:0,avg:0,max:0},gear:{min:0,avg:0,max:0},total:{min:0,avg:0,max:0}}),Pn=at({}),xn=at({parasol:!0,armor:!0,gear:!0,basic:!0}),Z=at({item:{ongoing:!1,data:null},export:{ongoing:!1,status:null},save:{ongoing:!1,status:null},load:{ongoing:!1,status:null},delete:{ongoing:!1,status:null},share:{ongoing:!1},costs:{ongoing:!1},bonus:{ongoing:!1},screenshot:{ongoing:!1},randomize:{ongoing:!1},resources:{ongoing:!1},changelog:{ongoing:!1},policy:{ongoing:!1},message:""});Rt.subscribe(n=>{Zo++,setTimeout(()=>{window.localStorage.setItem("builds",JSON.stringify(n)),Zo>1&&window.history.replaceState(null,null,location.origin+location.pathname)})});Pi.subscribe(n=>window.localStorage.setItem("changelogSeen",n));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(n,e){if(!n)throw Kn(e)},Kn=function(n){return new Error("Firebase Database ("+va.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Wu=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],r=n[t++],l=n[t++],a=((s&7)<<18|(o&63)<<12|(r&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(a&1023))}else{const o=n[t++],r=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|r&63)}}return e.join("")},uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],r=s+1<n.length,l=r?n[s+1]:0,a=s+2<n.length,c=a?n[s+2]:0,u=o>>2,d=(o&3)<<4|l>>4;let f=(l&15)<<2|c>>6,h=c&63;a||(h=64,r||(f=64)),i.push(t[u],t[d],t[f],t[h])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ya(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Wu(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||d==null)throw new zu;const f=o<<2|l>>4;if(i.push(f),c!==64){const h=l<<4&240|c>>2;if(i.push(h),d!==64){const _=c<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zu extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wa=function(n){const e=ya(n);return uo.encodeByteArray(e,!0)},qi=function(n){return wa(n).replace(/\./g,"")},Fs=function(n){try{return uo.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n){return ka(void 0,n)}function ka(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ju(t)||(n[t]=ka(n[t],e[t]));return n}function ju(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=()=>Uu().__FIREBASE_DEFAULTS__,Vu=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ku=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Fs(n[1]);return e&&JSON.parse(e)},Ca=()=>{try{return Gu()||Vu()||Ku()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yu=n=>{var e,t;return(t=(e=Ca())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Qu=n=>{const e=Yu(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ea=()=>{var n;return(n=Ca())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n),l="";return[qi(JSON.stringify(t)),qi(JSON.stringify(r)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sa(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ju())}function Zu(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ia(){return va.NODE_ADMIN===!0}function xu(){try{return typeof indexedDB=="object"}catch{return!1}}function $u(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="FirebaseError";class wi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ed,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],r=o?td(o,i):"Error",l=`${this.serviceName}: ${r} (${s}).`;return new wi(s,l,i)}}function td(n,e){return n.replace(nd,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const nd=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){return JSON.parse(n)}function rt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=function(n){let e={},t={},i={},s="";try{const o=n.split(".");e=ci(Fs(o[0])||""),t=ci(Fs(o[1])||""),s=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},id=function(n){const e=Na(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},sd=function(n){const e=Na(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Wn(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function $o(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wi(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function Bs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],r=e[s];if(er(o)&&er(r)){if(!Bs(o,r))return!1}else if(o!==r)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function er(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const f=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],r=this.chain_[2],l=this.chain_[3],a=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=l^o&(r^l),u=1518500249):(c=o^r^l,u=1859775393):d<60?(c=o&r|l&(o|r),u=2400959708):(c=o^r^l,u=3395469782);const f=(s<<5|s>>>27)+c+a+u+i[d]&4294967295;a=l,l=r,r=(o<<30|o>>>2)&4294967295,o=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+r&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const o=this.buf_;let r=this.inbuf_;for(;s<t;){if(r===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[r]=e.charCodeAt(s),++r,++s,r===this.blockSize){this.compress_(o),r=0;break}}else for(;s<t;)if(o[r]=e[s],++r,++s,r===this.blockSize){this.compress_(o),r=0;break}}this.inbuf_=r,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[s]>>o&255,++i;return e}}function fo(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const o=s-55296;i++,$(i<n.length,"Surrogate pair missing trail surrogate.");const r=n.charCodeAt(i)-56320;s=65536+(o<<10)+r}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ss=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class ui{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new is;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ud(e))try{this.getOrInitializeService({instanceIdentifier:fn})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=fn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fn){return this.instances.has(e)}getOptions(e=fn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&r.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const r=this.instances.get(s);return r&&e(r,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cd(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fn){return this.component?this.component.multipleInstances?e:fn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cd(n){return n===fn?void 0:n}function ud(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ad(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const fd={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},hd=Ve.INFO,pd={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},_d=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=pd[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Oa{constructor(e){this.name=e,this._logLevel=hd,this._logHandler=_d,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const md=(n,e)=>e.some(t=>n instanceof t);let tr,nr;function gd(){return tr||(tr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bd(){return nr||(nr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Da=new WeakMap,qs=new WeakMap,Ra=new WeakMap,Cs=new WeakMap,ho=new WeakMap;function vd(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",r)},o=()=>{t($t(n.result)),s()},r=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",r)});return e.then(t=>{t instanceof IDBCursor&&Da.set(t,n)}).catch(()=>{}),ho.set(e,n),e}function yd(n){if(qs.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",r),n.removeEventListener("abort",r)},o=()=>{t(),s()},r=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",r),n.addEventListener("abort",r)});qs.set(n,e)}let Ws={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qs.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ra.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $t(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wd(n){Ws=n(Ws)}function kd(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Es(this),e,...t);return Ra.set(i,e.sort?e.sort():[e]),$t(i)}:bd().includes(n)?function(...e){return n.apply(Es(this),e),$t(Da.get(this))}:function(...e){return $t(n.apply(Es(this),e))}}function Cd(n){return typeof n=="function"?kd(n):(n instanceof IDBTransaction&&yd(n),md(n,gd())?new Proxy(n,Ws):n)}function $t(n){if(n instanceof IDBRequest)return vd(n);if(Cs.has(n))return Cs.get(n);const e=Cd(n);return e!==n&&(Cs.set(n,e),ho.set(e,n)),e}const Es=n=>ho.get(n);function Ed(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const r=indexedDB.open(n,e),l=$t(r);return i&&r.addEventListener("upgradeneeded",a=>{i($t(r.result),a.oldVersion,a.newVersion,$t(r.transaction),a)}),t&&r.addEventListener("blocked",a=>t(a.oldVersion,a.newVersion,a)),l.then(a=>{o&&a.addEventListener("close",()=>o()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const Sd=["get","getKey","getAll","getAllKeys","count"],Id=["put","add","delete","clear"],Ss=new Map;function ir(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ss.get(e))return Ss.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=Id.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Sd.includes(t)))return;const o=async function(r,...l){const a=this.transaction(r,s?"readwrite":"readonly");let c=a.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[t](...l),s&&a.done]))[0]};return Ss.set(e,o),o}wd(n=>({...n,get:(e,t,i)=>ir(e,t)||n.get(e,t,i),has:(e,t)=>!!ir(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nd(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Nd(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zs="@firebase/app",sr="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new Oa("@firebase/app"),Od="@firebase/app-compat",Dd="@firebase/analytics-compat",Rd="@firebase/analytics",Ad="@firebase/app-check-compat",Pd="@firebase/app-check",Md="@firebase/auth",Ld="@firebase/auth-compat",Fd="@firebase/database",Bd="@firebase/database-compat",qd="@firebase/functions",Wd="@firebase/functions-compat",zd="@firebase/installations",Hd="@firebase/installations-compat",jd="@firebase/messaging",Ud="@firebase/messaging-compat",Gd="@firebase/performance",Vd="@firebase/performance-compat",Kd="@firebase/remote-config",Yd="@firebase/remote-config-compat",Qd="@firebase/storage",Xd="@firebase/storage-compat",Jd="@firebase/firestore",Zd="@firebase/firestore-compat",xd="firebase",$d="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]",ef={[zs]:"fire-core",[Od]:"fire-core-compat",[Rd]:"fire-analytics",[Dd]:"fire-analytics-compat",[Pd]:"fire-app-check",[Ad]:"fire-app-check-compat",[Md]:"fire-auth",[Ld]:"fire-auth-compat",[Fd]:"fire-rtdb",[Bd]:"fire-rtdb-compat",[qd]:"fire-fn",[Wd]:"fire-fn-compat",[zd]:"fire-iid",[Hd]:"fire-iid-compat",[jd]:"fire-fcm",[Ud]:"fire-fcm-compat",[Gd]:"fire-perf",[Vd]:"fire-perf-compat",[Kd]:"fire-rc",[Yd]:"fire-rc-compat",[Qd]:"fire-gcs",[Xd]:"fire-gcs-compat",[Jd]:"fire-fst",[Zd]:"fire-fst-compat","fire-js":"fire-js",[xd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Map,js=new Map;function tf(n,e){try{n.container.addComponent(e)}catch(t){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hi(n){const e=n.name;if(js.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;js.set(e,n);for(const t of zi.values())tf(t,n);return!0}function nf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},en=new Ta("app","Firebase",sf);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=$d;function Aa(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Hs,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw en.create("bad-app-name",{appName:String(s)});if(t||(t=Ea()),!t)throw en.create("no-options");const o=zi.get(s);if(o){if(Bs(t,o.options)&&Bs(i,o.config))return o;throw en.create("duplicate-app",{appName:s})}const r=new dd(s);for(const a of js.values())r.addComponent(a);const l=new of(t,i,r);return zi.set(s,l),l}function lf(n=Hs){const e=zi.get(n);if(!e&&n===Hs&&Ea())return Aa();if(!e)throw en.create("no-app",{appName:n});return e}function Mn(n,e,t){var i;let s=(i=ef[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),r=e.match(/\s|\//);if(o||r){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&r&&l.push("and"),r&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(l.join(" "));return}Hi(new ui(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="firebase-heartbeat-database",cf=1,di="firebase-heartbeat-store";let Is=null;function Pa(){return Is||(Is=Ed(af,cf,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(di)}}}).catch(n=>{throw en.create("idb-open",{originalErrorMessage:n.message})})),Is}async function uf(n){try{return await(await Pa()).transaction(di).objectStore(di).get(Ma(n))}catch(e){if(e instanceof wi)yn.warn(e.message);else{const t=en.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yn.warn(t.message)}}}async function or(n,e){try{const i=(await Pa()).transaction(di,"readwrite");await i.objectStore(di).put(e,Ma(n)),await i.done}catch(t){if(t instanceof wi)yn.warn(t.message);else{const i=en.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yn.warn(i.message)}}}function Ma(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=1024,ff=30*24*60*60*1e3;class hf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _f(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rr();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const r=new Date(o.date).valueOf();return Date.now()-r<=ff}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rr(),{heartbeatsToSend:i,unsentEntries:s}=pf(this._heartbeatsCache.heartbeats),o=qi(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function rr(){return new Date().toISOString().substring(0,10)}function pf(n,e=df){const t=[];let i=n.slice();for(const s of n){const o=t.find(r=>r.agent===s.agent);if(o){if(o.dates.push(s.date),lr(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),lr(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _f{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xu()?$u().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await uf(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return or(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return or(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lr(n){return qi(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(n){Hi(new ui("platform-logger",e=>new Td(e),"PRIVATE")),Hi(new ui("heartbeat",e=>new hf(e),"PRIVATE")),Mn(zs,sr,n),Mn(zs,sr,"esm2017"),Mn("fire-js","")}mf("");var gf="firebase",bf="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(gf,bf,"app");const ar="@firebase/database",cr="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="";function vf(n){La=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),rt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ci(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Vt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yf(e)}}catch{}return new wf},_n=Fa("localStorage"),Us=Fa("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new Oa("@firebase/database"),kf=function(){let n=1;return function(){return n++}}(),Ba=function(n){const e=ld(n),t=new rd;t.update(e);const i=t.digest();return uo.encodeByteArray(i)},ki=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ki.apply(null,i):typeof i=="object"?e+=rt(i):e+=i,e+=" "}return e};let bn=null,ur=!0;const Cf=function(n,e){$(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Ln.logLevel=Ve.VERBOSE,bn=Ln.log.bind(Ln),e&&Us.set("logging_enabled",!0)):typeof n=="function"?bn=n:(bn=null,Us.remove("logging_enabled"))},_t=function(...n){if(ur===!0&&(ur=!1,bn===null&&Us.get("logging_enabled")===!0&&Cf(!0)),bn){const e=ki.apply(null,n);bn(e)}},Ci=function(n){return function(...e){_t(n,...e)}},Gs=function(...n){const e="FIREBASE INTERNAL ERROR: "+ki(...n);Ln.error(e)},Qt=function(...n){const e=`FIREBASE FATAL ERROR: ${ki(...n)}`;throw Ln.error(e),new Error(e)},Et=function(...n){const e="FIREBASE WARNING: "+ki(...n);Ln.warn(e)},Ef=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},po=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Sf=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},wn="[MIN_NAME]",ln="[MAX_NAME]",Yn=function(n,e){if(n===e)return 0;if(n===wn||e===ln)return-1;if(e===wn||n===ln)return 1;{const t=dr(n),i=dr(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},If=function(n,e){return n===e?0:n<e?-1:1},$n=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+rt(e))},_o=function(n){if(typeof n!="object"||n===null)return rt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=rt(e[i]),t+=":",t+=_o(n[e[i]]);return t+="}",t},qa=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function St(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Wa=function(n){$(!po(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,o,r,l,a;n===0?(o=0,r=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=l+i,r=Math.round(n*Math.pow(2,t-l)-Math.pow(2,t))):(o=0,r=Math.round(n/Math.pow(2,1-i-t))));const c=[];for(a=t;a;a-=1)c.push(r%2?1:0),r=Math.floor(r/2);for(a=e;a;a-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(s?1:0),c.reverse();const u=c.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(u.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Tf=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Nf=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Of(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const Df=new RegExp("^-?(0*)\\d{1,10}$"),Rf=-2147483648,Af=2147483647,dr=function(n){if(Df.test(n)){const e=Number(n);if(e>=Rf&&e<=Af)return e}return null},Qn=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Et("Exception was thrown by user callback.",t),e},Math.floor(0))}},Pf=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},si=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Et(e)}}class Fn{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Fn.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="5",za="v",Ha="s",ja="r",Ua="f",Ga=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Va="ls",Ka="p",Vs="ac",Ya="websocket",Qa="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t,i,s,o=!1,r="",l=!1,a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=r,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_n.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_n.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ff(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Ja(n,e,t){$(typeof e=="string","typeof type must == string"),$(typeof t=="object","typeof params must == object");let i;if(e===Ya)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Qa)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Ff(n)&&(t.ns=n.namespace);const s=[];return St(t,(o,r)=>{s.push(o+"="+r)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.counters_={}}incrementCounter(e,t=1){Vt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Hu(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts={},Ns={};function go(n){const e=n.toString();return Ts[e]||(Ts[e]=new Bf),Ts[e]}function qf(n,e){const t=n.toString();return Ns[t]||(Ns[t]=e()),Ns[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Qn(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="start",zf="close",Hf="pLPCommand",jf="pRTLPCB",Za="id",xa="pw",$a="ser",Uf="cb",Gf="seg",Vf="ts",Kf="d",Yf="dframe",ec=1870,tc=30,Qf=ec-tc,Xf=25e3,Jf=3e4;class Dn{constructor(e,t,i,s,o,r,l){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=r,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ci(e),this.stats_=go(t),this.urlFn=a=>(this.appCheckToken&&(a[Vs]=this.appCheckToken),Ja(t,Qa,a))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Wf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Jf)),Sf(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bo((...o)=>{const[r,l,a,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,r===fr)this.id=l,this.password=a;else if(r===zf)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+r)},(...o)=>{const[r,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(r,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[fr]="t",i[$a]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Uf]=this.scriptTagHolder.uniqueCallbackIdentifier),i[za]=mo,this.transportSessionId&&(i[Ha]=this.transportSessionId),this.lastSessionId&&(i[Va]=this.lastSessionId),this.applicationId&&(i[Ka]=this.applicationId),this.appCheckToken&&(i[Vs]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ga.test(location.hostname)&&(i[ja]=Ua);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dn.forceAllow_=!0}static forceDisallow(){Dn.forceDisallow_=!0}static isAvailable(){return Dn.forceAllow_?!0:!Dn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Tf()&&!Nf()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=rt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=wa(t),s=qa(i,Qf);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[Yf]="t",i[Za]=e,i[xa]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=rt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class bo{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=kf(),window[Hf+this.uniqueCallbackIdentifier]=e,window[jf+this.uniqueCallbackIdentifier]=t,this.myIFrame=bo.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(l){_t("frame writing exception"),l.stack&&_t(l.stack),_t(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Za]=this.myID,e[xa]=this.myPW,e[$a]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tc+i.length<=ec;){const r=this.pendingSegs.shift();i=i+"&"+Gf+s+"="+r.seg+"&"+Vf+s+"="+r.ts+"&"+Kf+s+"="+r.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(Xf)),o=()=>{clearTimeout(s),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=16384,xf=45e3;let ji=null;typeof MozWebSocket<"u"?ji=MozWebSocket:typeof WebSocket<"u"&&(ji=WebSocket);class Pt{constructor(e,t,i,s,o,r,l){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ci(this.connId),this.stats_=go(t),this.connURL=Pt.connectionURL_(t,r,l,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,o){const r={};return r[za]=mo,typeof location<"u"&&location.hostname&&Ga.test(location.hostname)&&(r[ja]=Ua),t&&(r[Ha]=t),i&&(r[Va]=i),s&&(r[Vs]=s),o&&(r[Ka]=o),Ja(e,Ya,r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_n.set("previous_websocket_failure",!0);try{let i;Ia(),this.mySock=new ji(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Pt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ji!==null&&!Pt.forceDisallow_}static previouslyFailed(){return _n.isInMemoryStorage||_n.get("previous_websocket_failure")===!0}markConnectionHealthy(){_n.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=ci(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=rt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=qa(t,Zf);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xf))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pt.responsesRequiredToBeHealthy=2;Pt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Dn,Pt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Pt&&Pt.isAvailable();let i=t&&!Pt.previouslyFailed();if(e.webSocketOnly&&(t||Et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pt];else{const s=this.transports_=[];for(const o of fi.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);fi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=6e4,eh=5e3,th=10*1024,nh=100*1024,Os="t",hr="d",ih="s",pr="r",sh="e",_r="o",mr="a",gr="n",br="p",oh="h";class rh{constructor(e,t,i,s,o,r,l,a,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=r,this.onReady_=l,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ci("c:"+this.id+":"),this.transportManager_=new fi(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=si(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nh?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>th?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Os in e){const t=e[Os];t===mr?this.upgradeIfSecondaryHealthy_():t===pr?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===_r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=$n("t",e),i=$n("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:br,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:mr,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gr,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=$n("t",e),i=$n("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=$n(Os,e);if(hr in e){const i=e[hr];if(t===oh){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===gr){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===ih?this.onConnectionShutdown_(i):t===pr?this.onReset_(i):t===sh?Gs("Server Error: "+i):t===_r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gs("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),mo!==i&&Et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),si(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($f))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):si(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(eh))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:br,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_n.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!i||i===s[o].context)){s.splice(o,1);return}}validateEventType_(e){$(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends ic{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Sa()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ui}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=32,yr=768;class Ue{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Fe(){return new Ue("")}function Se(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function an(n){return n.pieces_.length-n.pieceNum_}function Ke(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ue(n.pieces_,e)}function sc(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lh(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function oc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rc(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ue(e,0)}function lt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ue)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new Ue(t,0)}function Ce(n){return n.pieceNum_>=n.pieces_.length}function vt(n,e){const t=Se(n),i=Se(e);if(t===null)return e;if(t===i)return vt(Ke(n),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lc(n,e){if(an(n)!==an(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Mt(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(an(n)>an(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class ah{constructor(e,t){this.errorPrefix_=t,this.parts_=oc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ss(this.parts_[i]);ac(this)}}function ch(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=ss(e),ac(n)}function uh(n){const e=n.parts_.pop();n.byteLength_-=ss(e),n.parts_.length>0&&(n.byteLength_-=1)}function ac(n){if(n.byteLength_>yr)throw new Error(n.errorPrefix_+"has a key path longer than "+yr+" bytes ("+n.byteLength_+").");if(n.parts_.length>vr)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vr+") or object contains a cycle "+hn(n))}function hn(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends ic{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new vo}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=1e3,dh=60*5*1e3,wr=30*1e3,fh=1.3,hh=3e4,ph="server_kill",kr=3;class Yt extends nc{constructor(e,t,i,s,o,r,l,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=r,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Yt.nextPersistentConnectionId_++,this.log_=Ci("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ei,this.maxReconnectDelay_=dh,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ia())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vo.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ui.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(rt(o)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new is,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:r=>{const l=r.d;r.s==="ok"?t.resolve(l):t.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,s){this.initConnection_();const o=e._queryIdentifier,r=e._path.toString();this.log_("Listen called for "+r+" "+o),this.listens.has(r)||this.listens.set(r,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(r).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(r).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i},r="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(r,o,l=>{const a=l.d,c=l.s;Yt.warnOnListenWarnings_(a,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(c,a))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Vt(e,"w")){const i=Wn(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||sd(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wr)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=id(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const o=s.s,r=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},r="n";s&&(o.q=i,o.t=s),this.sendRequest(r,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,r=>{s&&setTimeout(()=>{s(r.s,r.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,o){this.initConnection_();const r={p:t,d:i};o!==void 0&&(r.h=o),this.outstandingPuts_.push({action:e,request:r,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+rt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Gs("Unrecognized action received from server: "+rt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hh&&(this.reconnectDelay_=ei),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fh)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Yt.nextConnectionId_++,o=this.lastSessionId;let r=!1,l=null;const a=function(){l?l.close():(r=!0,i())},c=function(d){$(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);r?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new rh(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,h=>{Et(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(ph)},o))}catch(d){this.log_("Failed to get token: "+d),r||(this.repoInfo_.nodeAdmin&&Et(d),a())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$o(this.interruptReasons_)&&(this.reconnectDelay_=ei,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>_o(o)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new Ue(e).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){_t("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kr&&(this.reconnectDelay_=wr,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){_t("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=kr&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+La.replace(/\./g,"-")]=1,Sa()?e["framework.cordova"]=1:Zu()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ui.getInstance().currentlyOnline();return $o(this.interruptReasons_)&&e}}Yt.nextPersistentConnectionId_=0;Yt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ke(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new ke(wn,e),s=new ke(wn,t);return this.compare(i,s)!==0}minPost(){return ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Di;class cc extends os{static get __EMPTY_NODE(){return Di}static set __EMPTY_NODE(e){Di=e}compare(e,t){return Yn(e.name,t.name)}isDefinedOn(e){throw Kn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ke.MIN}maxPost(){return new ke(ln,Di)}makePost(e,t){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new ke(e,Di)}toString(){return".key"}}const tn=new cc;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let r=1;for(;!e.isEmpty();)if(e=e,r=t?i(e.key,t):1,s&&(r*=-1),r<0)this.isReverse_?e=e.left:e=e.right;else if(r===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ut{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??ut.RED,this.left=s??Ct.EMPTY_NODE,this.right=o??Ct.EMPTY_NODE}copy(e,t,i,s,o){return new ut(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ct.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ut.RED=!0;ut.BLACK=!1;class _h{copy(e,t,i,s,o){return this}insert(e,t,i){return new ut(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ct{constructor(e,t=Ct.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ct(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ut.BLACK,null,null))}remove(e){return new Ct(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ut.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ri(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ri(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ri(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ri(this.root_,null,this.comparator_,!0,e)}}Ct.EMPTY_NODE=new _h;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n,e){return Yn(n.name,e.name)}function yo(n,e){return Yn(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks;function gh(n){Ks=n}const uc=function(n){return typeof n=="number"?"number:"+Wa(n):"string:"+n},dc=function(n){if(n.isLeafNode()){const e=n.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Vt(e,".sv"),"Priority must be a string or number.")}else $(n===Ks||n.isEmpty(),"priority of unexpected type.");$(n===Ks||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cr;class ct{constructor(e,t=ct.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dc(this.priorityNode_)}static set __childrenNodeConstructor(e){Cr=e}static get __childrenNodeConstructor(){return Cr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ct(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ce(e)?this:Se(e)===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:ct.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Se(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:($(i!==".priority"||an(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ct.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+uc(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Wa(this.value_):e+=this.value_,this.lazyHash_=Ba(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ct.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ct.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=ct.VALUE_TYPE_ORDER.indexOf(t),o=ct.VALUE_TYPE_ORDER.indexOf(i);return $(s>=0,"Unknown leaf type: "+t),$(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc,hc;function bh(n){fc=n}function vh(n){hc=n}class yh extends os{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),o=i.compareTo(s);return o===0?Yn(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ke.MIN}maxPost(){return new ke(ln,new ct("[PRIORITY-POST]",hc))}makePost(e,t){const i=fc(e);return new ke(t,new ct("[PRIORITY-POST]",i))}toString(){return".priority"}}const xe=new yh;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=Math.log(2);class kh{constructor(e){const t=o=>parseInt(Math.log(o)/wh,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gi=function(n,e,t,i){n.sort(e);const s=function(a,c){const u=c-a;let d,f;if(u===0)return null;if(u===1)return d=n[a],f=t?t(d):d,new ut(f,d.node,ut.BLACK,null,null);{const h=parseInt(u/2,10)+a,_=s(a,h),b=s(h+1,c);return d=n[h],f=t?t(d):d,new ut(f,d.node,ut.BLACK,_,b)}},o=function(a){let c=null,u=null,d=n.length;const f=function(_,b){const v=d-_,y=d;d-=_;const E=s(v+1,y),w=n[v],I=t?t(w):w;h(new ut(I,w.node,b,null,E))},h=function(_){c?(c.left=_,c=_):(u=_,c=_)};for(let _=0;_<a.count;++_){const b=a.nextBitIsOne(),v=Math.pow(2,a.count-(_+1));b?f(v,ut.BLACK):(f(v,ut.BLACK),f(v,ut.RED))}return u},r=new kh(n.length),l=o(r);return new Ct(i||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds;const Nn={};class Kt{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return $(Nn&&xe,"ChildrenNode.ts has not been loaded"),Ds=Ds||new Kt({".priority":Nn},{".priority":xe}),Ds}get(e){const t=Wn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ct?t:null}hasIndex(e){return Vt(this.indexSet_,e.toString())}addIndex(e,t){$(e!==tn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=t.getIterator(ke.Wrap);let r=o.getNext();for(;r;)s=s||e.isDefinedOn(r.node),i.push(r),r=o.getNext();let l;s?l=Gi(i,e.getCompare()):l=Nn;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const u=Object.assign({},this.indexes_);return u[a]=l,new Kt(u,c)}addToIndexes(e,t){const i=Wi(this.indexes_,(s,o)=>{const r=Wn(this.indexSet_,o);if($(r,"Missing index implementation for "+o),s===Nn)if(r.isDefinedOn(e.node)){const l=[],a=t.getIterator(ke.Wrap);let c=a.getNext();for(;c;)c.name!==e.name&&l.push(c),c=a.getNext();return l.push(e),Gi(l,r.getCompare())}else return Nn;else{const l=t.get(e.name);let a=s;return l&&(a=a.remove(new ke(e.name,l))),a.insert(e,e.node)}});return new Kt(i,this.indexSet_)}removeFromIndexes(e,t){const i=Wi(this.indexes_,s=>{if(s===Nn)return s;{const o=t.get(e.name);return o?s.remove(new ke(e.name,o)):s}});return new Kt(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti;class pe{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&dc(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ti||(ti=new pe(new Ct(yo),null,Kt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ti}updatePriority(e){return this.children_.isEmpty()?this:new pe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ti:t}}getChild(e){const t=Se(e);return t===null?this:this.getImmediateChild(t).getChild(Ke(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if($(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new ke(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const r=s.isEmpty()?ti:this.priorityNode_;return new pe(s,r,o)}}updateChild(e,t){const i=Se(e);if(i===null)return t;{$(Se(e)!==".priority"||an(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Ke(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,o=!0;if(this.forEachChild(xe,(r,l)=>{t[r]=l.val(e),i++,o&&pe.INTEGER_REGEXP_.test(r)?s=Math.max(s,Number(r)):o=!1}),!e&&o&&s<2*i){const r=[];for(const l in t)r[l]=t[l];return r}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+uc(this.getPriority().val())+":"),this.forEachChild(xe,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":Ba(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ke(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ke(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ke(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ke.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ke.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ei?-1:0}withIndex(e){if(e===tn||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new pe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===tn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(xe),s=t.getIterator(xe);let o=i.getNext(),r=s.getNext();for(;o&&r;){if(o.name!==r.name||!o.node.equals(r.node))return!1;o=i.getNext(),r=s.getNext()}return o===null&&r===null}else return!1;else return!1}}resolveIndex_(e){return e===tn?null:this.indexMap_.get(e.toString())}}pe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ch extends pe{constructor(){super(new Ct(yo),pe.EMPTY_NODE,Kt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pe.EMPTY_NODE}isEmpty(){return!1}}const Ei=new Ch;Object.defineProperties(ke,{MIN:{value:new ke(wn,pe.EMPTY_NODE)},MAX:{value:new ke(ln,Ei)}});cc.__EMPTY_NODE=pe.EMPTY_NODE;ct.__childrenNodeConstructor=pe;gh(Ei);vh(Ei);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=!0;function dt(n,e=null){if(n===null)return pe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new ct(t,dt(e))}if(!(n instanceof Array)&&Eh){const t=[];let i=!1;if(St(n,(r,l)=>{if(r.substring(0,1)!=="."){const a=dt(l);a.isEmpty()||(i=i||!a.getPriority().isEmpty(),t.push(new ke(r,a)))}}),t.length===0)return pe.EMPTY_NODE;const o=Gi(t,mh,r=>r.name,yo);if(i){const r=Gi(t,xe.getCompare());return new pe(o,dt(e),new Kt({".priority":r},{".priority":xe}))}else return new pe(o,dt(e),Kt.Default)}else{let t=pe.EMPTY_NODE;return St(n,(i,s)=>{if(Vt(n,i)&&i.substring(0,1)!=="."){const o=dt(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(dt(e))}}bh(dt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends os{constructor(e){super(),this.indexPath_=e,$(!Ce(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),o=i.compareTo(s);return o===0?Yn(e.name,t.name):o}makePost(e,t){const i=dt(e),s=pe.EMPTY_NODE.updateChild(this.indexPath_,i);return new ke(t,s)}maxPost(){const e=pe.EMPTY_NODE.updateChild(this.indexPath_,Ei);return new ke(ln,e)}toString(){return oc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends os{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Yn(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ke.MIN}maxPost(){return ke.MAX}makePost(e,t){const i=dt(e);return new ke(t,i)}toString(){return".value"}}const _c=new Sh;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(n){return{type:"value",snapshotNode:n}}function zn(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function hi(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function pi(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Ih(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.index_=e}updateChild(e,t,i,s,o,r){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(s).equals(i.getChild(s))&&l.isEmpty()===i.isEmpty()||(r!=null&&(i.isEmpty()?e.hasChild(t)?r.trackChildChange(hi(t,l)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?r.trackChildChange(zn(t,i)):r.trackChildChange(pi(t,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(xe,(s,o)=>{t.hasChild(s)||i.trackChildChange(hi(s,o))}),t.isLeafNode()||t.forEachChild(xe,(s,o)=>{if(e.hasChild(s)){const r=e.getImmediateChild(s);r.equals(o)||i.trackChildChange(pi(s,o,r))}else i.trackChildChange(zn(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?pe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.indexedFilter_=new wo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_i.getStartPost_(e),this.endPost_=_i.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,o,r){return this.matches(new ke(t,i))||(i=pe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,o,r)}updateFullNode(e,t,i){t.isLeafNode()&&(t=pe.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(pe.EMPTY_NODE);const o=this;return t.forEachChild(xe,(r,l)=>{o.matches(new ke(r,l))||(s=s.updateImmediateChild(r,pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new _i(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,o,r){return this.rangedFilter_.matches(new ke(t,i))||(i=pe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,o,r):this.fullLimitUpdateChild_(e,t,i,o,r)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=pe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let r=0;for(;o.hasNext()&&r<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),r++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(pe.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let r=0;for(;o.hasNext();){const l=o.getNext();r<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?r++:s=s.updateImmediateChild(l.name,pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,o){let r;if(this.reverse_){const d=this.index_.getCompare();r=(f,h)=>d(h,f)}else r=this.index_.getCompare();const l=e;$(l.numChildren()===this.limit_,"");const a=new ke(t,i),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(l.hasChild(t)){const d=l.getImmediateChild(t);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const h=f==null?1:r(f,a);if(u&&!i.isEmpty()&&h>=0)return o!=null&&o.trackChildChange(pi(t,i,d)),l.updateImmediateChild(t,i);{o!=null&&o.trackChildChange(hi(t,d));const b=l.updateImmediateChild(t,pe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o!=null&&o.trackChildChange(zn(f.name,f.node)),b.updateImmediateChild(f.name,f.node)):b}}else return i.isEmpty()?e:u&&r(c,a)>=0?(o!=null&&(o.trackChildChange(hi(c.name,c.node)),o.trackChildChange(zn(t,i))),l.updateImmediateChild(t,i).updateImmediateChild(c.name,pe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wn}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ln}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xe}copy(){const e=new ko;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Nh(n){return n.loadsAllData()?new wo(n.getIndex()):n.hasLimit()?new Th(n):new _i(n)}function Oh(n,e){const t=n.copy();return t.index_=e,t}function Er(n){const e={};if(n.isDefault())return e;let t;if(n.index_===xe?t="$priority":n.index_===_c?t="$value":n.index_===tn?t="$key":($(n.index_ instanceof pc,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=rt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=rt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+rt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=rt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+rt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Sr(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==xe&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends nc{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Ci("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const r=Vi.getListenId_(e,i),l={};this.listens_[r]=l;const a=Er(e._queryParams);this.restRequest_(o+".json",a,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,i),Wn(this.listens_,r)===l){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,t){const i=Vi.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Er(e._queryParams),i=e._path.toString(),s=new is;return this.restRequest_(i+".json",t,(o,r)=>{let l=r;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(i,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+od(t);this.log_("Sending REST request for "+r);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+r+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=ci(l.responseText)}catch{Et("Failed to parse JSON response for "+r+": "+l.responseText)}i(null,a)}else l.status!==401&&l.status!==404&&Et("Got unsuccessful REST response for "+r+" Status: "+l.status),i(l.status);i=null}},l.open("GET",r,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return{value:null,children:new Map}}function gc(n,e,t){if(Ce(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Se(e);n.children.has(i)||n.children.set(i,Ki());const s=n.children.get(i);e=Ke(e),gc(s,e,t)}}function Ys(n,e,t){n.value!==null?t(e,n.value):Rh(n,(i,s)=>{const o=new Ue(e.toString()+"/"+i);Ys(s,o,t)})}function Rh(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&St(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=10*1e3,Ph=30*1e3,Mh=5*60*1e3;class Lh{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ah(e);const i=Ir+(Ph-Ir)*Math.random();si(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;St(e,(s,o)=>{o>0&&Vt(this.statsToReport_,s)&&(t[s]=o,i=!0)}),i&&this.server_.reportStats(t),si(this.reportStats_.bind(this),Math.floor(Math.random()*2*Mh))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Lt||(Lt={}));function bc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Co(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Eo(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Lt.ACK_USER_WRITE,this.source=bc()}operationForChild(e){if(Ce(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ue(e));return new Yi(Fe(),t,this.revert)}}else return $(Se(this.path)===e,"operationForChild called for unrelated child."),new Yi(Ke(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t){this.source=e,this.path=t,this.type=Lt.LISTEN_COMPLETE}operationForChild(e){return Ce(this.path)?new mi(this.source,Fe()):new mi(this.source,Ke(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Lt.OVERWRITE}operationForChild(e){return Ce(this.path)?new kn(this.source,Fe(),this.snap.getImmediateChild(e)):new kn(this.source,Ke(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Lt.MERGE}operationForChild(e){if(Ce(this.path)){const t=this.children.subtree(new Ue(e));return t.isEmpty()?null:t.value?new kn(this.source,Fe(),t.value):new gi(this.source,Fe(),t)}else return $(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gi(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;const t=Se(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Bh(n,e,t,i){const s=[],o=[];return e.forEach(r=>{r.type==="child_changed"&&n.index_.indexedValueChanged(r.oldSnap,r.snapshotNode)&&o.push(Ih(r.childName,r.snapshotNode))}),ni(n,s,"child_removed",e,i,t),ni(n,s,"child_added",e,i,t),ni(n,s,"child_moved",o,i,t),ni(n,s,"child_changed",e,i,t),ni(n,s,"value",e,i,t),s}function ni(n,e,t,i,s,o){const r=i.filter(l=>l.type===t);r.sort((l,a)=>Wh(n,l,a)),r.forEach(l=>{const a=qh(n,l,o);s.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(a,n.query_))})})}function qh(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Wh(n,e,t){if(e.childName==null||t.childName==null)throw Kn("Should only compare child_ events.");const i=new ke(e.childName,e.snapshotNode),s=new ke(t.childName,t.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n,e){return{eventCache:n,serverCache:e}}function oi(n,e,t,i){return rs(new cn(e,t,i),n.serverCache)}function vc(n,e,t,i){return rs(n.eventCache,new cn(e,t,i))}function Qi(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Cn(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rs;const zh=()=>(Rs||(Rs=new Ct(If)),Rs);class Qe{constructor(e,t=zh()){this.value=e,this.children=t}static fromObject(e){let t=new Qe(null);return St(e,(i,s)=>{t=t.set(new Ue(i),s)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Fe(),value:this.value};if(Ce(e))return null;{const i=Se(e),s=this.children.get(i);if(s!==null){const o=s.findRootMostMatchingPathAndValue(Ke(e),t);return o!=null?{path:lt(new Ue(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ce(e))return this;{const t=Se(e),i=this.children.get(t);return i!==null?i.subtree(Ke(e)):new Qe(null)}}set(e,t){if(Ce(e))return new Qe(t,this.children);{const i=Se(e),o=(this.children.get(i)||new Qe(null)).set(Ke(e),t),r=this.children.insert(i,o);return new Qe(this.value,r)}}remove(e){if(Ce(e))return this.children.isEmpty()?new Qe(null):new Qe(null,this.children);{const t=Se(e),i=this.children.get(t);if(i){const s=i.remove(Ke(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new Qe(null):new Qe(this.value,o)}else return this}}get(e){if(Ce(e))return this.value;{const t=Se(e),i=this.children.get(t);return i?i.get(Ke(e)):null}}setTree(e,t){if(Ce(e))return t;{const i=Se(e),o=(this.children.get(i)||new Qe(null)).setTree(Ke(e),t);let r;return o.isEmpty()?r=this.children.remove(i):r=this.children.insert(i,o),new Qe(this.value,r)}}fold(e){return this.fold_(Fe(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(lt(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Fe(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(Ce(e))return null;{const o=Se(e),r=this.children.get(o);return r?r.findOnPath_(Ke(e),lt(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Fe(),t)}foreachOnPath_(e,t,i){if(Ce(e))return this;{this.value&&i(t,this.value);const s=Se(e),o=this.children.get(s);return o?o.foreachOnPath_(Ke(e),lt(t,s),i):new Qe(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(lt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.writeTree_=e}static empty(){return new Ft(new Qe(null))}}function ri(n,e,t){if(Ce(e))return new Ft(new Qe(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let o=i.value;const r=vt(s,e);return o=o.updateChild(r,t),new Ft(n.writeTree_.set(s,o))}else{const s=new Qe(t),o=n.writeTree_.setTree(e,s);return new Ft(o)}}}function Tr(n,e,t){let i=n;return St(t,(s,o)=>{i=ri(i,lt(e,s),o)}),i}function Nr(n,e){if(Ce(e))return Ft.empty();{const t=n.writeTree_.setTree(e,new Qe(null));return new Ft(t)}}function Qs(n,e){return Sn(n,e)!=null}function Sn(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(vt(t.path,e)):null}function Or(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(xe,(i,s)=>{e.push(new ke(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new ke(i,s.value))}),e}function nn(n,e){if(Ce(e))return n;{const t=Sn(n,e);return t!=null?new Ft(new Qe(t)):new Ft(n.writeTree_.subtree(e))}}function Xs(n){return n.writeTree_.isEmpty()}function Hn(n,e){return yc(Fe(),n.writeTree_,e)}function yc(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?($(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=yc(lt(n,s),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(lt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(n,e){return Ec(e,n)}function Hh(n,e,t,i,s){$(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=ri(n.visibleWrites,e,t)),n.lastWriteId=i}function jh(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function Uh(n,e){const t=n.allWrites.findIndex(l=>l.writeId===e);$(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,o=!1,r=n.allWrites.length-1;for(;s&&r>=0;){const l=n.allWrites[r];l.visible&&(r>=t&&Gh(l,i.path)?s=!1:Mt(i.path,l.path)&&(o=!0)),r--}if(s){if(o)return Vh(n),!0;if(i.snap)n.visibleWrites=Nr(n.visibleWrites,i.path);else{const l=i.children;St(l,a=>{n.visibleWrites=Nr(n.visibleWrites,lt(i.path,a))})}return!0}else return!1}function Gh(n,e){if(n.snap)return Mt(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Mt(lt(n.path,t),e))return!0;return!1}function Vh(n){n.visibleWrites=wc(n.allWrites,Kh,Fe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Kh(n){return n.visible}function wc(n,e,t){let i=Ft.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const r=o.path;let l;if(o.snap)Mt(t,r)?(l=vt(t,r),i=ri(i,l,o.snap)):Mt(r,t)&&(l=vt(r,t),i=ri(i,Fe(),o.snap.getChild(l)));else if(o.children){if(Mt(t,r))l=vt(t,r),i=Tr(i,l,o.children);else if(Mt(r,t))if(l=vt(r,t),Ce(l))i=Tr(i,Fe(),o.children);else{const a=Wn(o.children,Se(l));if(a){const c=a.getChild(Ke(l));i=ri(i,Fe(),c)}}}else throw Kn("WriteRecord should have .snap or .children")}}return i}function kc(n,e,t,i,s){if(!i&&!s){const o=Sn(n.visibleWrites,e);if(o!=null)return o;{const r=nn(n.visibleWrites,e);if(Xs(r))return t;if(t==null&&!Qs(r,Fe()))return null;{const l=t||pe.EMPTY_NODE;return Hn(r,l)}}}else{const o=nn(n.visibleWrites,e);if(!s&&Xs(o))return t;if(!s&&t==null&&!Qs(o,Fe()))return null;{const r=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Mt(c.path,e)||Mt(e,c.path))},l=wc(n.allWrites,r,e),a=t||pe.EMPTY_NODE;return Hn(l,a)}}}function Yh(n,e,t){let i=pe.EMPTY_NODE;const s=Sn(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(xe,(o,r)=>{i=i.updateImmediateChild(o,r)}),i;if(t){const o=nn(n.visibleWrites,e);return t.forEachChild(xe,(r,l)=>{const a=Hn(nn(o,new Ue(r)),l);i=i.updateImmediateChild(r,a)}),Or(o).forEach(r=>{i=i.updateImmediateChild(r.name,r.node)}),i}else{const o=nn(n.visibleWrites,e);return Or(o).forEach(r=>{i=i.updateImmediateChild(r.name,r.node)}),i}}function Qh(n,e,t,i,s){$(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=lt(e,t);if(Qs(n.visibleWrites,o))return null;{const r=nn(n.visibleWrites,o);return Xs(r)?s.getChild(t):Hn(r,s.getChild(t))}}function Xh(n,e,t,i){const s=lt(e,t),o=Sn(n.visibleWrites,s);if(o!=null)return o;if(i.isCompleteForChild(t)){const r=nn(n.visibleWrites,s);return Hn(r,i.getNode().getImmediateChild(t))}else return null}function Jh(n,e){return Sn(n.visibleWrites,e)}function Zh(n,e,t,i,s,o,r){let l;const a=nn(n.visibleWrites,e),c=Sn(a,Fe());if(c!=null)l=c;else if(t!=null)l=Hn(a,t);else return[];if(l=l.withIndex(r),!l.isEmpty()&&!l.isLeafNode()){const u=[],d=r.getCompare(),f=o?l.getReverseIteratorFrom(i,r):l.getIteratorFrom(i,r);let h=f.getNext();for(;h&&u.length<s;)d(h,i)!==0&&u.push(h),h=f.getNext();return u}else return[]}function xh(){return{visibleWrites:Ft.empty(),allWrites:[],lastWriteId:-1}}function Xi(n,e,t,i){return kc(n.writeTree,n.treePath,e,t,i)}function So(n,e){return Yh(n.writeTree,n.treePath,e)}function Dr(n,e,t,i){return Qh(n.writeTree,n.treePath,e,t,i)}function Ji(n,e){return Jh(n.writeTree,lt(n.treePath,e))}function $h(n,e,t,i,s,o){return Zh(n.writeTree,n.treePath,e,t,i,s,o)}function Io(n,e,t){return Xh(n.writeTree,n.treePath,e,t)}function Cc(n,e){return Ec(lt(n.treePath,e),n.writeTree)}function Ec(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;$(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),$(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,pi(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,hi(i,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,zn(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,pi(i,e.snapshotNode,s.oldSnap));else throw Kn("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const Sc=new tp;class To{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new cn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Io(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cn(this.viewCache_),o=$h(this.writes_,s,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(n){return{filter:n}}function ip(n,e){$(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function sp(n,e,t,i,s){const o=new ep;let r,l;if(t.type===Lt.OVERWRITE){const c=t;c.source.fromUser?r=Js(n,e,c.path,c.snap,i,s,o):($(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!Ce(c.path),r=Zi(n,e,c.path,c.snap,i,s,l,o))}else if(t.type===Lt.MERGE){const c=t;c.source.fromUser?r=rp(n,e,c.path,c.children,i,s,o):($(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),r=Zs(n,e,c.path,c.children,i,s,l,o))}else if(t.type===Lt.ACK_USER_WRITE){const c=t;c.revert?r=cp(n,e,c.path,i,s,o):r=lp(n,e,c.path,c.affectedTree,i,s,o)}else if(t.type===Lt.LISTEN_COMPLETE)r=ap(n,e,t.path,i,o);else throw Kn("Unknown operation type: "+t.type);const a=o.getChanges();return op(e,r,a),{viewCache:r,changes:a}}function op(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Qi(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(mc(Qi(e)))}}function Ic(n,e,t,i,s,o){const r=e.eventCache;if(Ji(i,t)!=null)return e;{let l,a;if(Ce(t))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Cn(e),u=c instanceof pe?c:pe.EMPTY_NODE,d=So(i,u);l=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const c=Xi(i,Cn(e));l=n.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=Se(t);if(c===".priority"){$(an(t)===1,"Can't have a priority with additional path components");const u=r.getNode();a=e.serverCache.getNode();const d=Dr(i,t,u,a);d!=null?l=n.filter.updatePriority(u,d):l=r.getNode()}else{const u=Ke(t);let d;if(r.isCompleteForChild(c)){a=e.serverCache.getNode();const f=Dr(i,t,r.getNode(),a);f!=null?d=r.getNode().getImmediateChild(c).updateChild(u,f):d=r.getNode().getImmediateChild(c)}else d=Io(i,c,e.serverCache);d!=null?l=n.filter.updateChild(r.getNode(),c,d,u,s,o):l=r.getNode()}}return oi(e,l,r.isFullyInitialized()||Ce(t),n.filter.filtersNodes())}}function Zi(n,e,t,i,s,o,r,l){const a=e.serverCache;let c;const u=r?n.filter:n.filter.getIndexedFilter();if(Ce(t))c=u.updateFullNode(a.getNode(),i,null);else if(u.filtersNodes()&&!a.isFiltered()){const h=a.getNode().updateChild(t,i);c=u.updateFullNode(a.getNode(),h,null)}else{const h=Se(t);if(!a.isCompleteForPath(t)&&an(t)>1)return e;const _=Ke(t),v=a.getNode().getImmediateChild(h).updateChild(_,i);h===".priority"?c=u.updatePriority(a.getNode(),v):c=u.updateChild(a.getNode(),h,v,_,Sc,null)}const d=vc(e,c,a.isFullyInitialized()||Ce(t),u.filtersNodes()),f=new To(s,d,o);return Ic(n,d,t,s,f,l)}function Js(n,e,t,i,s,o,r){const l=e.eventCache;let a,c;const u=new To(s,e,o);if(Ce(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,r),a=oi(e,c,!0,n.filter.filtersNodes());else{const d=Se(t);if(d===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),a=oi(e,c,l.isFullyInitialized(),l.isFiltered());else{const f=Ke(t),h=l.getNode().getImmediateChild(d);let _;if(Ce(f))_=i;else{const b=u.getCompleteChild(d);b!=null?sc(f)===".priority"&&b.getChild(rc(f)).isEmpty()?_=b:_=b.updateChild(f,i):_=pe.EMPTY_NODE}if(h.equals(_))a=e;else{const b=n.filter.updateChild(l.getNode(),d,_,f,u,r);a=oi(e,b,l.isFullyInitialized(),n.filter.filtersNodes())}}}return a}function Rr(n,e){return n.eventCache.isCompleteForChild(e)}function rp(n,e,t,i,s,o,r){let l=e;return i.foreach((a,c)=>{const u=lt(t,a);Rr(e,Se(u))&&(l=Js(n,l,u,c,s,o,r))}),i.foreach((a,c)=>{const u=lt(t,a);Rr(e,Se(u))||(l=Js(n,l,u,c,s,o,r))}),l}function Ar(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Zs(n,e,t,i,s,o,r,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,c;Ce(t)?c=i:c=new Qe(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const h=e.serverCache.getNode().getImmediateChild(d),_=Ar(n,h,f);a=Zi(n,a,new Ue(d),_,s,o,r,l)}}),c.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){const _=e.serverCache.getNode().getImmediateChild(d),b=Ar(n,_,f);a=Zi(n,a,new Ue(d),b,s,o,r,l)}}),a}function lp(n,e,t,i,s,o,r){if(Ji(s,t)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(i.value!=null){if(Ce(t)&&a.isFullyInitialized()||a.isCompleteForPath(t))return Zi(n,e,t,a.getNode().getChild(t),s,o,l,r);if(Ce(t)){let c=new Qe(null);return a.getNode().forEachChild(tn,(u,d)=>{c=c.set(new Ue(u),d)}),Zs(n,e,t,c,s,o,l,r)}else return e}else{let c=new Qe(null);return i.foreach((u,d)=>{const f=lt(t,u);a.isCompleteForPath(f)&&(c=c.set(u,a.getNode().getChild(f)))}),Zs(n,e,t,c,s,o,l,r)}}function ap(n,e,t,i,s){const o=e.serverCache,r=vc(e,o.getNode(),o.isFullyInitialized()||Ce(t),o.isFiltered());return Ic(n,r,t,i,Sc,s)}function cp(n,e,t,i,s,o){let r;if(Ji(i,t)!=null)return e;{const l=new To(i,e,s),a=e.eventCache.getNode();let c;if(Ce(t)||Se(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Xi(i,Cn(e));else{const d=e.serverCache.getNode();$(d instanceof pe,"serverChildren would be complete if leaf node"),u=So(i,d)}u=u,c=n.filter.updateFullNode(a,u,o)}else{const u=Se(t);let d=Io(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=a.getImmediateChild(u)),d!=null?c=n.filter.updateChild(a,u,d,Ke(t),l,o):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(a,u,pe.EMPTY_NODE,Ke(t),l,o):c=a,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(r=Xi(i,Cn(e)),r.isLeafNode()&&(c=n.filter.updateFullNode(c,r,o)))}return r=e.serverCache.isFullyInitialized()||Ji(i,Fe())!=null,oi(e,c,r,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new wo(i.getIndex()),o=Nh(i);this.processor_=np(o);const r=t.serverCache,l=t.eventCache,a=s.updateFullNode(pe.EMPTY_NODE,r.getNode(),null),c=o.updateFullNode(pe.EMPTY_NODE,l.getNode(),null),u=new cn(a,r.isFullyInitialized(),s.filtersNodes()),d=new cn(c,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=rs(d,u),this.eventGenerator_=new Fh(this.query_)}get query(){return this.query_}}function dp(n){return n.viewCache_.serverCache.getNode()}function fp(n){return Qi(n.viewCache_)}function hp(n,e){const t=Cn(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ce(e)&&!t.getImmediateChild(Se(e)).isEmpty())?t.getChild(e):null}function Pr(n){return n.eventRegistrations_.length===0}function pp(n,e){n.eventRegistrations_.push(e)}function Mr(n,e,t){const i=[];if(t){$(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const r=o.createCancelEvent(t,s);r&&i.push(r)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const r=n.eventRegistrations_[o];if(!r.matches(e))s.push(r);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Lr(n,e,t,i){e.type===Lt.MERGE&&e.source.queryId!==null&&($(Cn(n.viewCache_),"We should always have a full cache before handling merges"),$(Qi(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=sp(n.processor_,s,e,t,i);return ip(n.processor_,o.viewCache),$(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Tc(n,o.changes,o.viewCache.eventCache.getNode(),null)}function _p(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(xe,(o,r)=>{i.push(zn(o,r))}),t.isFullyInitialized()&&i.push(mc(t.getNode())),Tc(n,i,t.getNode(),e)}function Tc(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return Bh(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xi;class Nc{constructor(){this.views=new Map}}function mp(n){$(!xi,"__referenceConstructor has already been defined"),xi=n}function gp(){return $(xi,"Reference.ts has not been loaded"),xi}function bp(n){return n.views.size===0}function No(n,e,t,i){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return $(o!=null,"SyncTree gave us an op for an invalid query."),Lr(o,e,t,i)}else{let o=[];for(const r of n.views.values())o=o.concat(Lr(r,e,t,i));return o}}function Oc(n,e,t,i,s){const o=e._queryIdentifier,r=n.views.get(o);if(!r){let l=Xi(t,s?i:null),a=!1;l?a=!0:i instanceof pe?(l=So(t,i),a=!1):(l=pe.EMPTY_NODE,a=!1);const c=rs(new cn(l,a,!1),new cn(i,s,!1));return new up(e,c)}return r}function vp(n,e,t,i,s,o){const r=Oc(n,e,i,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,r),pp(r,t),_p(r,t)}function yp(n,e,t,i){const s=e._queryIdentifier,o=[];let r=[];const l=un(n);if(s==="default")for(const[a,c]of n.views.entries())r=r.concat(Mr(c,t,i)),Pr(c)&&(n.views.delete(a),c.query._queryParams.loadsAllData()||o.push(c.query));else{const a=n.views.get(s);a&&(r=r.concat(Mr(a,t,i)),Pr(a)&&(n.views.delete(s),a.query._queryParams.loadsAllData()||o.push(a.query)))}return l&&!un(n)&&o.push(new(gp())(e._repo,e._path)),{removed:o,events:r}}function Dc(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function sn(n,e){let t=null;for(const i of n.views.values())t=t||hp(i,e);return t}function Rc(n,e){if(e._queryParams.loadsAllData())return as(n);{const i=e._queryIdentifier;return n.views.get(i)}}function Ac(n,e){return Rc(n,e)!=null}function un(n){return as(n)!=null}function as(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i;function wp(n){$(!$i,"__referenceConstructor has already been defined"),$i=n}function kp(){return $($i,"Reference.ts has not been loaded"),$i}let Cp=1;class Fr{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qe(null),this.pendingWriteTree_=xh(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Pc(n,e,t,i,s){return Hh(n.pendingWriteTree_,e,t,i,s),s?Ii(n,new kn(bc(),e,t)):[]}function mn(n,e,t=!1){const i=jh(n.pendingWriteTree_,e);if(Uh(n.pendingWriteTree_,e)){let o=new Qe(null);return i.snap!=null?o=o.set(Fe(),!0):St(i.children,r=>{o=o.set(new Ue(r),!0)}),Ii(n,new Yi(i.path,o,t))}else return[]}function Si(n,e,t){return Ii(n,new kn(Co(),e,t))}function Ep(n,e,t){const i=Qe.fromObject(t);return Ii(n,new gi(Co(),e,i))}function Sp(n,e){return Ii(n,new mi(Co(),e))}function Ip(n,e,t){const i=Do(n,t);if(i){const s=Ro(i),o=s.path,r=s.queryId,l=vt(o,e),a=new mi(Eo(r),l);return Ao(n,o,a)}else return[]}function Mc(n,e,t,i,s=!1){const o=e._path,r=n.syncPointTree_.get(o);let l=[];if(r&&(e._queryIdentifier==="default"||Ac(r,e))){const a=yp(r,e,t,i);bp(r)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const c=a.removed;if(l=a.events,!s){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(o,(f,h)=>un(h));if(u&&!d){const f=n.syncPointTree_.subtree(o);if(!f.isEmpty()){const h=Dp(f);for(let _=0;_<h.length;++_){const b=h[_],v=b.query,y=qc(n,b);n.listenProvider_.startListening(li(v),bi(n,v),y.hashFn,y.onComplete)}}}!d&&c.length>0&&!i&&(u?n.listenProvider_.stopListening(li(e),null):c.forEach(f=>{const h=n.queryToTagMap.get(cs(f));n.listenProvider_.stopListening(li(f),h)}))}Rp(n,c)}return l}function Lc(n,e,t,i){const s=Do(n,i);if(s!=null){const o=Ro(s),r=o.path,l=o.queryId,a=vt(r,e),c=new kn(Eo(l),a,t);return Ao(n,r,c)}else return[]}function Tp(n,e,t,i){const s=Do(n,i);if(s){const o=Ro(s),r=o.path,l=o.queryId,a=vt(r,e),c=Qe.fromObject(t),u=new gi(Eo(l),a,c);return Ao(n,r,u)}else return[]}function Np(n,e,t,i=!1){const s=e._path;let o=null,r=!1;n.syncPointTree_.foreachOnPath(s,(f,h)=>{const _=vt(f,s);o=o||sn(h,_),r=r||un(h)});let l=n.syncPointTree_.get(s);l?(r=r||un(l),o=o||sn(l,Fe())):(l=new Nc,n.syncPointTree_=n.syncPointTree_.set(s,l));let a;o!=null?a=!0:(a=!1,o=pe.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((h,_)=>{const b=sn(_,Fe());b&&(o=o.updateImmediateChild(h,b))}));const c=Ac(l,e);if(!c&&!e._queryParams.loadsAllData()){const f=cs(e);$(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=Ap();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}const u=ls(n.pendingWriteTree_,s);let d=vp(l,e,t,u,o,a);if(!c&&!r&&!i){const f=Rc(l,e);d=d.concat(Pp(n,e,f))}return d}function Oo(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(r,l)=>{const a=vt(r,e),c=sn(l,a);if(c)return c});return kc(s,e,o,t,!0)}function Op(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=vt(c,t);i=i||sn(u,d)});let s=n.syncPointTree_.get(t);s?i=i||sn(s,Fe()):(s=new Nc,n.syncPointTree_=n.syncPointTree_.set(t,s));const o=i!=null,r=o?new cn(i,!0,!1):null,l=ls(n.pendingWriteTree_,e._path),a=Oc(s,e,l,o?r.getNode():pe.EMPTY_NODE,o);return fp(a)}function Ii(n,e){return Fc(e,n.syncPointTree_,null,ls(n.pendingWriteTree_,Fe()))}function Fc(n,e,t,i){if(Ce(n.path))return Bc(n,e,t,i);{const s=e.get(Fe());t==null&&s!=null&&(t=sn(s,Fe()));let o=[];const r=Se(n.path),l=n.operationForChild(r),a=e.children.get(r);if(a&&l){const c=t?t.getImmediateChild(r):null,u=Cc(i,r);o=o.concat(Fc(l,a,c,u))}return s&&(o=o.concat(No(s,n,i,t))),o}}function Bc(n,e,t,i){const s=e.get(Fe());t==null&&s!=null&&(t=sn(s,Fe()));let o=[];return e.children.inorderTraversal((r,l)=>{const a=t?t.getImmediateChild(r):null,c=Cc(i,r),u=n.operationForChild(r);u&&(o=o.concat(Bc(u,l,a,c)))}),s&&(o=o.concat(No(s,n,i,t))),o}function qc(n,e){const t=e.query,i=bi(n,t);return{hashFn:()=>(dp(e)||pe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Ip(n,t._path,i):Sp(n,t._path);{const o=Of(s,t);return Mc(n,t,null,o)}}}}function bi(n,e){const t=cs(e);return n.queryToTagMap.get(t)}function cs(n){return n._path.toString()+"$"+n._queryIdentifier}function Do(n,e){return n.tagToQueryMap.get(e)}function Ro(n){const e=n.indexOf("$");return $(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ue(n.substr(0,e))}}function Ao(n,e,t){const i=n.syncPointTree_.get(e);$(i,"Missing sync point for query tag that we're tracking");const s=ls(n.pendingWriteTree_,e);return No(i,t,s,null)}function Dp(n){return n.fold((e,t,i)=>{if(t&&un(t))return[as(t)];{let s=[];return t&&(s=Dc(t)),St(i,(o,r)=>{s=s.concat(r)}),s}})}function li(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(kp())(n._repo,n._path):n}function Rp(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=cs(i),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}function Ap(){return Cp++}function Pp(n,e,t){const i=e._path,s=bi(n,e),o=qc(n,t),r=n.listenProvider_.startListening(li(e),s,o.hashFn,o.onComplete),l=n.syncPointTree_.subtree(i);if(s)$(!un(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((c,u,d)=>{if(!Ce(c)&&u&&un(u))return[as(u).query];{let f=[];return u&&(f=f.concat(Dc(u).map(h=>h.query))),St(d,(h,_)=>{f=f.concat(_)}),f}});for(let c=0;c<a.length;++c){const u=a[c];n.listenProvider_.stopListening(li(u),bi(n,u))}}return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Po(t)}node(){return this.node_}}class Mo{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lt(this.path_,e);return new Mo(this.syncTree_,t)}node(){return Oo(this.syncTree_,this.path_)}}const Mp=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Br=function(n,e,t){if(!n||typeof n!="object")return n;if($(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Lp(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Fp(n[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Lp=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:$(!1,"Unexpected server value: "+n)}},Fp=function(n,e,t){n.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&$(!1,"Unexpected increment value: "+i);const s=e.node();if($(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const r=s.getValue();return typeof r!="number"?i:r+i},Bp=function(n,e,t,i){return Lo(e,new Mo(t,n),i)},Wc=function(n,e,t){return Lo(n,new Po(e),t)};function Lo(n,e,t){const i=n.getPriority().val(),s=Br(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const r=n,l=Br(r.getValue(),e,t);return l!==r.getValue()||s!==r.getPriority().val()?new ct(l,dt(s)):n}else{const r=n;return o=r,s!==r.getPriority().val()&&(o=o.updatePriority(new ct(s))),r.forEachChild(xe,(l,a)=>{const c=Lo(a,e.getImmediateChild(l),t);c!==a&&(o=o.updateImmediateChild(l,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Bo(n,e){let t=e instanceof Ue?e:new Ue(e),i=n,s=Se(t);for(;s!==null;){const o=Wn(i.node.children,s)||{children:{},childCount:0};i=new Fo(s,i,o),t=Ke(t),s=Se(t)}return i}function Xn(n){return n.node.value}function zc(n,e){n.node.value=e,xs(n)}function Hc(n){return n.node.childCount>0}function qp(n){return Xn(n)===void 0&&!Hc(n)}function us(n,e){St(n.node.children,(t,i)=>{e(new Fo(t,n,i))})}function jc(n,e,t,i){t&&!i&&e(n),us(n,s=>{jc(s,e,!0,i)}),t&&i&&e(n)}function Wp(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ti(n){return new Ue(n.parent===null?n.name:Ti(n.parent)+"/"+n.name)}function xs(n){n.parent!==null&&zp(n.parent,n.name,n)}function zp(n,e,t){const i=qp(t),s=Vt(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,xs(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,xs(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=/[\[\].#$\/\u0000-\u001F\u007F]/,jp=/[\[\].#$\u0000-\u001F\u007F]/,As=10*1024*1024,Uc=function(n){return typeof n=="string"&&n.length!==0&&!Hp.test(n)},Gc=function(n){return typeof n=="string"&&n.length!==0&&!jp.test(n)},Up=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gc(n)},qr=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!po(n)||n&&typeof n=="object"&&Vt(n,".sv")},Vc=function(n,e,t,i){i&&e===void 0||qo(fo(n,"value"),e,t)},qo=function(n,e,t){const i=t instanceof Ue?new ah(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+hn(i));if(typeof e=="function")throw new Error(n+"contains a function "+hn(i)+" with contents = "+e.toString());if(po(e))throw new Error(n+"contains "+e.toString()+" "+hn(i));if(typeof e=="string"&&e.length>As/3&&ss(e)>As)throw new Error(n+"contains a string greater than "+As+" utf8 bytes "+hn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(St(e,(r,l)=>{if(r===".value")s=!0;else if(r!==".priority"&&r!==".sv"&&(o=!0,!Uc(r)))throw new Error(n+" contains an invalid key ("+r+") "+hn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ch(i,r),qo(n,l,i),uh(i)}),s&&o)throw new Error(n+' contains ".value" child '+hn(i)+" in addition to actual children.")}},Kc=function(n,e,t,i){if(!(i&&t===void 0)&&!Gc(t))throw new Error(fo(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Gp=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Kc(n,e,t,i)},Wo=function(n,e){if(Se(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Vp=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Uc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Up(t))throw new Error(fo(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yc(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],o=s.getPath();t!==null&&!lc(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Ut(n,e,t){Yc(n,t),Yp(n,i=>Mt(i,e)||Mt(e,i))}function Yp(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const o=s.path;e(o)?(Qp(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Qp(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();bn&&_t("event: "+t.toString()),Qn(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="repo_interrupt",Jp=25;class Zp{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ki(),this.transactionQueueTree_=new Fo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xp(n,e,t){if(n.stats_=go(n.repoInfo_),n.forceRestClient_||Pf())n.server_=new Vi(n.repoInfo_,(i,s,o,r)=>{Wr(n,i,s,o,r)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>zr(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{rt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Yt(n.repoInfo_,e,(i,s,o,r)=>{Wr(n,i,s,o,r)},i=>{zr(n,i)},i=>{$p(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=qf(n.repoInfo_,()=>new Lh(n.stats_,n.server_)),n.infoData_=new Dh,n.infoSyncTree_=new Fr({startListening:(i,s,o,r)=>{let l=[];const a=n.infoData_.getNode(i._path);return a.isEmpty()||(l=Si(n.infoSyncTree_,i._path,a),setTimeout(()=>{r("ok")},0)),l},stopListening:()=>{}}),Ho(n,"connected",!1),n.serverSyncTree_=new Fr({startListening:(i,s,o,r)=>(n.server_.listen(i,o,s,(l,a)=>{const c=r(l,a);Ut(n.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function Qc(n){const t=n.infoData_.getNode(new Ue(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function zo(n){return Mp({timestamp:Qc(n)})}function Wr(n,e,t,i,s){n.dataUpdateCount++;const o=new Ue(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let r=[];if(s)if(i){const a=Wi(t,c=>dt(c));r=Tp(n.serverSyncTree_,o,a,s)}else{const a=dt(t);r=Lc(n.serverSyncTree_,o,a,s)}else if(i){const a=Wi(t,c=>dt(c));r=Ep(n.serverSyncTree_,o,a)}else{const a=dt(t);r=Si(n.serverSyncTree_,o,a)}let l=o;r.length>0&&(l=fs(n,o)),Ut(n.eventQueue_,l,r)}function zr(n,e){Ho(n,"connected",e),e===!1&&n_(n)}function $p(n,e){St(e,(t,i)=>{Ho(n,t,i)})}function Ho(n,e,t){const i=new Ue("/.info/"+e),s=dt(t);n.infoData_.updateSnapshot(i,s);const o=Si(n.infoSyncTree_,i,s);Ut(n.eventQueue_,i,o)}function Xc(n){return n.nextWriteId_++}function e_(n,e,t){const i=Op(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const o=dt(s).withIndex(e._queryParams.getIndex());Np(n.serverSyncTree_,e,t,!0);let r;if(e._queryParams.loadsAllData())r=Si(n.serverSyncTree_,e._path,o);else{const l=bi(n.serverSyncTree_,e);r=Lc(n.serverSyncTree_,e._path,o,l)}return Ut(n.eventQueue_,e._path,r),Mc(n.serverSyncTree_,e,t,null,!0),o},s=>(ds(n,"get for query "+rt(e)+" failed: "+s),Promise.reject(new Error(s))))}function t_(n,e,t,i,s){ds(n,"set",{path:e.toString(),value:t,priority:i});const o=zo(n),r=dt(t,i),l=Oo(n.serverSyncTree_,e),a=Wc(r,l,o),c=Xc(n),u=Pc(n.serverSyncTree_,e,a,c,!0);Yc(n.eventQueue_,u),n.server_.put(e.toString(),r.val(!0),(f,h)=>{const _=f==="ok";_||Et("set at "+e+" failed: "+f);const b=mn(n.serverSyncTree_,c,!_);Ut(n.eventQueue_,e,b),s_(n,s,f,h)});const d=eu(n,e);fs(n,d),Ut(n.eventQueue_,d,[])}function n_(n){ds(n,"onDisconnectEvents");const e=zo(n),t=Ki();Ys(n.onDisconnect_,Fe(),(s,o)=>{const r=Bp(s,o,n.serverSyncTree_,e);gc(t,s,r)});let i=[];Ys(t,Fe(),(s,o)=>{i=i.concat(Si(n.serverSyncTree_,s,o));const r=eu(n,s);fs(n,r)}),n.onDisconnect_=Ki(),Ut(n.eventQueue_,Fe(),i)}function i_(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Xp)}function ds(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_t(t,...e)}function s_(n,e,t,i){e&&Qn(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let o=s;i&&(o+=": "+i);const r=new Error(o);r.code=s,e(r)}})}function Jc(n,e,t){return Oo(n.serverSyncTree_,e,t)||pe.EMPTY_NODE}function jo(n,e=n.transactionQueueTree_){if(e||hs(n,e),Xn(e)){const t=xc(n,e);$(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&o_(n,Ti(e),t)}else Hc(e)&&us(e,t=>{jo(n,t)})}function o_(n,e,t){const i=t.map(c=>c.currentWriteId),s=Jc(n,e,i);let o=s;const r=s.hash();for(let c=0;c<t.length;c++){const u=t[c];$(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=vt(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const l=o.val(!0),a=e;n.server_.put(a.toString(),l,c=>{ds(n,"transaction put response",{path:a.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(mn(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();hs(n,Bo(n.transactionQueueTree_,e)),jo(n,n.transactionQueueTree_),Ut(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)Qn(d[f])}else{if(c==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Et("transaction at "+a.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}fs(n,e)}},r)}function fs(n,e){const t=Zc(n,e),i=Ti(t),s=xc(n,t);return r_(n,s,i),i}function r_(n,e,t){if(e.length===0)return;const i=[];let s=[];const r=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],c=vt(t,a.path);let u=!1,d;if($(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,d=a.abortReason,s=s.concat(mn(n.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Jp)u=!0,d="maxretry",s=s.concat(mn(n.serverSyncTree_,a.currentWriteId,!0));else{const f=Jc(n,a.path,r);a.currentInputSnapshot=f;const h=e[l].update(f.val());if(h!==void 0){qo("transaction failed: Data returned ",h,a.path);let _=dt(h);typeof h=="object"&&h!=null&&Vt(h,".priority")||(_=_.updatePriority(f.getPriority()));const v=a.currentWriteId,y=zo(n),E=Wc(_,f,y);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=E,a.currentWriteId=Xc(n),r.splice(r.indexOf(v),1),s=s.concat(Pc(n.serverSyncTree_,a.path,E,a.currentWriteId,a.applyLocally)),s=s.concat(mn(n.serverSyncTree_,v,!0))}else u=!0,d="nodata",s=s.concat(mn(n.serverSyncTree_,a.currentWriteId,!0))}Ut(n.eventQueue_,t,s),s=[],u&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(d),!1,null))))}hs(n,n.transactionQueueTree_);for(let l=0;l<i.length;l++)Qn(i[l]);jo(n,n.transactionQueueTree_)}function Zc(n,e){let t,i=n.transactionQueueTree_;for(t=Se(e);t!==null&&Xn(i)===void 0;)i=Bo(i,t),e=Ke(e),t=Se(e);return i}function xc(n,e){const t=[];return $c(n,e,t),t.sort((i,s)=>i.order-s.order),t}function $c(n,e,t){const i=Xn(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);us(e,s=>{$c(n,s,t)})}function hs(n,e){const t=Xn(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,zc(e,t.length>0?t:void 0)}us(e,i=>{hs(n,i)})}function eu(n,e){const t=Ti(Zc(n,e)),i=Bo(n.transactionQueueTree_,e);return Wp(i,s=>{Ps(n,s)}),Ps(n,i),jc(i,s=>{Ps(n,s)}),t}function Ps(n,e){const t=Xn(e);if(t){const i=[];let s=[],o=-1;for(let r=0;r<t.length;r++)t[r].status===3||(t[r].status===1?($(o===r-1,"All SENT items should be at beginning of queue."),o=r,t[r].status=3,t[r].abortReason="set"):($(t[r].status===0,"Unexpected transaction status in abort"),t[r].unwatcher(),s=s.concat(mn(n.serverSyncTree_,t[r].currentWriteId,!0)),t[r].onComplete&&i.push(t[r].onComplete.bind(null,new Error("set"),!1,null))));o===-1?zc(e,void 0):t.length=o+1,Ut(n.eventQueue_,Ti(e),s);for(let r=0;r<i.length;r++)Qn(i[r])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function a_(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Et(`Invalid query segment '${t}' in query '${n}'`)}return e}const Hr=function(n,e){const t=c_(n),i=t.namespace;t.domain==="firebase.com"&&Qt(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Qt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Ef();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Xa(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new Ue(t.pathString)}},c_=function(n){let e="",t="",i="",s="",o="",r=!0,l="https",a=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(l=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(s=l_(n.substring(u,d)));const f=a_(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(r=l==="https"||l==="wss",a=parseInt(e.substring(c+1),10)):c=e.length;const h=e.slice(0,c);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{const _=e.indexOf(".");i=e.substring(0,_).toLowerCase(),t=e.substring(_+1),o=i}"ns"in f&&(o=f.ns)}return{host:e,port:a,domain:t,subdomain:i,secure:r,scheme:l,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",u_=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const o=new Array(8);for(s=7;s>=0;s--)o[s]=jr.charAt(t%64),t=Math.floor(t/64);$(t===0,"Cannot push at time == 0");let r=o.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)r+=jr.charAt(e[s]);return $(r.length===20,"nextPushId: Length should be 20."),r}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+rt(this.snapshot.exportVal())}}class f_{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return Ce(this._path)?null:sc(this._path)}get ref(){return new Jt(this._repo,this._path)}get _queryIdentifier(){const e=Sr(this._queryParams),t=_o(e);return t==="{}"?"default":t}get _queryObject(){return Sr(this._queryParams)}isEqual(e){if(e=dn(e),!(e instanceof ps))return!1;const t=this._repo===e._repo,i=lc(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+lh(this._path)}}function p_(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function __(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===tn){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==wn)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==ln)throw new Error(i);if(typeof t!="string")throw new Error(s)}}else if(n.getIndex()===xe){if(e!=null&&!qr(e)||t!=null&&!qr(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if($(n.getIndex()instanceof pc||n.getIndex()===_c,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class Jt extends ps{constructor(e,t){super(e,t,new ko,!1)}get parent(){const e=rc(this._path);return e===null?null:new Jt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class vi{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ue(e),i=Xt(this.ref,e);return new vi(this._node.getChild(t),i,xe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new vi(s,Xt(this.ref,i),xe)))}hasChild(e){const t=new Ue(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jn(n,e){return n=dn(n),n._checkNotDeleted("ref"),e!==void 0?Xt(n._root,e):n._root}function Xt(n,e){return n=dn(n),Se(n._path)===null?Gp("child","path",e,!1):Kc("child","path",e,!1),new Jt(n._repo,lt(n._path,e))}function m_(n,e){n=dn(n),Wo("push",n._path),Vc("push",e,n._path,!0);const t=Qc(n._repo),i=u_(t),s=Xt(n,i),o=Xt(n,i);let r;return e!=null?r=_s(o,e).then(()=>o):r=Promise.resolve(o),s.then=r.then.bind(r),s.catch=r.then.bind(r,void 0),s}function g_(n){return Wo("remove",n._path),_s(n,null)}function _s(n,e){n=dn(n),Wo("set",n._path),Vc("set",e,n._path,!1);const t=new is;return t_(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function tu(n){n=dn(n);const e=new h_(()=>{}),t=new Uo(e);return e_(n._repo,n,t).then(i=>new vi(i,new Jt(n._repo,n._path),n._queryParams.getIndex()))}class Uo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new d_("value",this,new vi(e.snapshotNode,new Jt(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new f_(this,e,t):null}matches(e){return e instanceof Uo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class b_{}class v_ extends b_{_apply(e){p_(e,"orderByKey");const t=Oh(e._queryParams,tn);return __(t),new ps(e._repo,e._path,t,!0)}}function nu(){return new v_}function iu(n,...e){let t=dn(n);for(const i of e)t=i._apply(t);return t}mp(Jt);wp(Jt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="FIREBASE_DATABASE_EMULATOR_HOST",$s={};let w_=!1;function k_(n,e,t,i){n.repoInfo_=new Xa(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function C_(n,e,t,i,s){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Qt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let r=Hr(o,s),l=r.repoInfo,a,c;typeof process<"u"&&process.env&&(c=process.env[y_]),c?(a=!0,o=`http://${c}?ns=${l.namespace}`,r=Hr(o,s),l=r.repoInfo):a=!r.repoInfo.secure;const u=s&&a?new Fn(Fn.OWNER):new Lf(n.name,n.options,e);Vp("Invalid Firebase Database URL",r),Ce(r.path)||Qt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=S_(l,n,u,new Mf(n.name,t));return new I_(d,n)}function E_(n,e){const t=$s[e];(!t||t[n.key]!==n)&&Qt(`Database ${e}(${n.repoInfo_}) has already been deleted.`),i_(n),delete t[n.key]}function S_(n,e,t,i){let s=$s[e.name];s||(s={},$s[e.name]=s);let o=s[n.toURLString()];return o&&Qt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Zp(n,w_,t,i),s[n.toURLString()]=o,o}class I_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(xp(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jt(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(E_(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qt("Cannot call "+e+" on a deleted database.")}}function T_(n=lf(),e){const t=nf(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Qu("database");i&&N_(t,...i)}return t}function N_(n,e,t,i={}){n=dn(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Qt("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Qt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Fn(Fn.OWNER);else if(i.mockUserToken){const r=typeof i.mockUserToken=="string"?i.mockUserToken:Xu(i.mockUserToken,n.app.options.projectId);o=new Fn(r)}k_(s,e,t,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n){vf(rf),Hi(new ui("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return C_(i,s,o,t)},"PUBLIC").setMultipleInstances(!0)),Mn(ar,cr,n),Mn(ar,cr,"esm2017")}Yt.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Yt.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};O_();var eo={},su={},ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.rotx=void 0;function D_(n,e){return n.replace(/[a-zA-Z]/g,function(t){return String.fromCharCode((t<="Z"?90:122)>=(t=t.charCodeAt(0)+e)?t:t-26)})}ms.rotx=D_;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.rotx=void 0;var e=ms;Object.defineProperty(n,"rotx",{enumerable:!0,get:function(){return e.rotx}})})(su);var ou={},gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.base64=void 0;class R_{encode(e){return typeof btoa>"u"?Buffer.from(e,"binary").toString("base64"):btoa(e)}decode(e){return typeof atob>"u"?Buffer.from(e,"base64").toString("binary"):atob(e)}}const A_=new R_;gs.base64=A_;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.base64=void 0;var e=gs;Object.defineProperty(n,"base64",{enumerable:!0,get:function(){return e.base64}})})(ou);var ru={},bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.hex=void 0;class P_{encode(e){let t="",i="";for(let s=0;s<e.length;s++)t=e.charCodeAt(s).toString(16),i+=("000"+t).slice(-4);return i}decode(e){let t=e.match(/.{1,4}/g)||[],i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(parseInt(t[s],16));return i}}const M_=new P_;bs.hex=M_;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.hex=void 0;var e=bs;Object.defineProperty(n,"hex",{enumerable:!0,get:function(){return e.hex}})})(ru);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.hex=n.base64=n.rotx=void 0;var e=su;Object.defineProperty(n,"rotx",{enumerable:!0,get:function(){return e.rotx}});var t=ou;Object.defineProperty(n,"base64",{enumerable:!0,get:function(){return t.base64}});var i=ru;Object.defineProperty(n,"hex",{enumerable:!0,get:function(){return i.hex}})})(eo);let L_={ixqSmg:"IQhiAgIPDNBgKzMmPcWG9XWqEsxI2uQ70F5X1rY",icbpLwuiqv:"nk-d3-8j3n9.nqzmjiamixx.kwu",libijiamCZT:"pbbxa://nk-d3-8j3n9-lmnictb-zblj.mczwxm-emab1.nqzmjiamlibijiam.ixx",xzwrmkbQl:"nk-d3-8j3n9",abwziomJcksmb:"nk-d3-8j3n9.ixxaxwb.kwu",umaaioqvoAmvlmzQl:"31377888705",ixxQl:"1:31377888705:emj:3018l8nk0i07m867mk0j40"},lu={};for(let[n,e]of Object.entries(L_))lu[eo.rotx(n,18)]=eo.rotx(e,18);let Wt={armor:"Armor",magicDmg:"Magic",meleeDmg:"Melee",rangedDmg:"Ranged",hpRegen:"HP Regen",endurance:"Endurance",sightRange:"Sight Range",walkSpeed:"Walk Speed",jumpPower:"Jump Power",ammoReturn:"Ammo Return",height:"Height"},Un=["head","body","legs","feet","neck","back","ring","misc"],vs={name:"",stats:{armor:0,magicDmg:0,meleeDmg:0,rangedDmg:0,hpRegen:0,endurance:0,sightRange:0,walkSpeed:0,jumpPower:0,ammoReturn:0,height:0},cost:{min:0,max:0},image:"",link:""},ys={name:"",info:{type:"",special:""},moves:[],cost:{min:0,max:0},image:"",link:""},F_={armor:{min:0,avg:0,max:0},gear:{min:0,avg:0,max:0},total:{min:0,avg:0,max:0}},En=[...Array(5).keys()].map(n=>++n),Gn=T_(Aa(lu)),B_=["head","body","legs","feet","neck","back","ring","misc","gear","sets","bonuses"],au={0:"th",1:"st",2:"nd",3:"rd",4:"th",5:"th",6:"th",7:"th",8:"th",9:"th"};function cu(n,e){let t=!1;for(let i of[n,e])for(let s in i)if(i[s].name){t=!0;break}co.set(t),kt.set(null),window.history.replaceState(null,null,location.origin+location.pathname)}function Go(n,e){let t=2.8,i=e.split(" ").length,s=n.querySelector("span");if(s.style.removeProperty("font-size"),i>2&&e.length/i>=5){for(;s.offsetHeight>n.offsetHeight*.75;)t-=.05,s.style.fontSize=`${t}rem`;return t<2.8}return null}function q_(n,e){let t=2.8,i=n.querySelector("span");for(i.style.removeProperty("font-size");i.offsetWidth>n.offsetWidth;)t-=.05,i.style.fontSize=`${t}rem`;for(;i.offsetHeight>n.offsetHeight*.75&&e;)t-=.05,i.style.fontSize=`${t}rem`;return t<2.8?t:null}function W_(n){let e=2.35,t=n.querySelector(".tooltip");for(t.style.removeProperty("font-size");t.offsetHeight>n.offsetHeight*1.125;)e-=.02,t.style.fontSize=`${e}rem`}function z_(n){document.activeElement==document.body&&n.key=="Tab"&&(n.preventDefault(),document.querySelector(`.promptCont [id*='${n.shiftKey?"last":"first"}Focusable']`).focus())}function uu(n,e){let t=n.toLowerCase();for(let i in e)i.toLowerCase().includes(t)&&!e[i].classList.contains("filtered")?e[i].classList.remove("hidden"):e[i].classList.add("hidden")}function es(n,e){e&&setTimeout(()=>{n.focus(),n.click(),n.select()})}function yt(n){n.shiftKey&&n.key=="Tab"&&n.preventDefault()}function wt(n){n.key=="Tab"&&!n.shiftKey&&n.preventDefault()}function ts(n,e){let t=/[^a-zA-Z0-9~!#$%^&*()\-_+[\]{}\\|;:'",.<>/? ]/g;return n.replace(t,"").replaceAll(`
`,"").replace(/^ /,"").slice(0,e)}function to(n,e,t){(!n.maxLength||n.maxLength!=t)&&e.length>=t&&(n.maxLength=t)}function du(n,e){n={...n},e={...e};for(let t of Un)n[t]?n[t]=n[t].name:n[t]="";for(let t of En)e[t]?e[t]=e[t].name:e[t]="";return{eq:n,gear:e}}function Vo(){window.history.replaceState(null,null,location.origin+location.pathname+"?ls=true")}function on(n){n.target.closest("button").blur()}function H_(n){let e,t,i,s,o,r,l,a,c,u,d,f;return{c(){e=g("li"),t=g("button"),i=g("img"),o=C(),r=g("span"),r.textContent=`${n[5]}`,l=C(),a=g("iconify-icon"),c=C(),u=g("iconify-icon"),$e(i.src,s=n[0].image)||m(i,"src",s),m(i,"alt",""),Re(a,"icon","maki:cross"),Re(a,"id","cross"),Re(u,"icon","eva:info-outline"),Re(u,"id","info"),oe(e,"selectedItem",n[2])},m(h,_){M(h,e,_),p(e,t),p(t,i),p(t,o),p(t,r),p(t,l),p(t,a),p(t,c),p(t,u),n[20](e),d||(f=[ca(n[6].call(null,r)),N(t,"touchstart",n[9],{passive:!0}),N(t,"touchend",n[10],{passive:!0}),N(t,"mousedown",n[9]),N(t,"mouseup",n[10]),N(t,"click",n[15]),N(t,"mouseenter",n[16]),N(t,"focusin",n[17]),N(t,"mouseleave",n[18]),N(t,"focusout",n[19]),N(e,"contextmenu",j_)],d=!0)},p(h,[_]){_&1&&!$e(i.src,s=h[0].image)&&m(i,"src",s),_&4&&oe(e,"selectedItem",h[2])},i:re,o:re,d(h){h&&P(e),n[20](null),d=!1,be(f)}}}const j_=n=>n.preventDefault();function U_(n,e,t){let i,s,o,r,l,a,c;Q(n,Z,F=>t(4,i=F)),Q(n,bt,F=>t(22,s=F)),Q(n,Pn,F=>t(23,o=F)),Q(n,Bt,F=>t(24,r=F)),Q(n,qt,F=>t(25,l=F)),Q(n,jt,F=>t(26,a=F)),Q(n,ao,F=>t(27,c=F));let{itemData:u,slotOpen:d,eqSlotName:f,scrolling:h}=e;const _=Gt();let b,v=!1,y=u.name,E,w=0,I;function T(F){setTimeout(()=>{Go(b,y)&&c.push({node:b,itemName:y})})}function j(F){if(d||!d&&F.isTrusted==!1){_("itemSelect",{element:b,trusted:F.isTrusted}),b.classList.contains("selectedItem")||t(2,v=!1),t(2,v=!v),t(11,d=!1),G(qt,l[f]=v?u:vs,l),cu(l,a);for(let B of Object.keys(Wt)){G(bt,s[B]=0,s);for(let U in l)l[U].noStats||(G(bt,s[B]+=l[U].stats[B],s),G(bt,s[B]=Math.round(s[B]*10)/10,s))}for(let B of r.bonuses)if(o[B.name])for(let U in s)G(bt,s[U]+=B.stats[U],s),G(bt,s[U]=Math.round(s[U]*10)/10,s)}}function O(){h||(G(Z,i.item.ongoing=!0,i),G(Z,i.item.data={...u,slot:f,type:"eq",element:b},i))}function W(){I=setInterval(()=>t(14,w+=50),50)}function z(){clearInterval(I),w>=750&&O(),t(14,w=0)}const K=F=>{F.shiftKey?O():i.item.ongoing||j(F)},R=()=>t(3,E=!0),S=()=>t(3,E=!0),D=()=>t(3,E=!1),J=()=>t(3,E=!1);function A(F){le[F?"unshift":"push"](()=>{b=F,t(1,b)})}return n.$$set=F=>{"itemData"in F&&t(0,u=F.itemData),"slotOpen"in F&&t(11,d=F.slotOpen),"eqSlotName"in F&&t(12,f=F.eqSlotName),"scrolling"in F&&t(13,h=F.scrolling)},n.$$.update=()=>{n.$$.dirty&16384&&w==750&&_("displayInfo")},[u,b,v,E,i,y,T,j,O,W,z,d,f,h,w,K,R,S,D,J,A]}class G_ extends Ne{constructor(e){super(),Te(this,e,U_,H_,ge,{itemData:0,slotOpen:11,eqSlotName:12,scrolling:13})}}function V_(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b;return{c(){e=g("li"),t=g("button"),i=g("img"),o=C(),r=g("span"),r.textContent=`${n[6]}`,l=C(),a=g("iconify-icon"),d=C(),f=g("iconify-icon"),$e(i.src,s=n[0].image)||m(i,"src",s),m(i,"alt",""),Re(a,"icon",c=n[5]?"heroicons-solid:switch-vertical":"maki:cross"),Re(a,"id",u=n[5]?"switchable":"cross"),Re(f,"icon","eva:info-outline"),Re(f,"id","info"),t.disabled=h=!n[4]&&!n[5],oe(e,"selectedItem",n[1]),oe(e,"non-eligible",!n[4]&&!n[5]),oe(e,"switchable",n[5])},m(v,y){M(v,e,y),p(e,t),p(t,i),p(t,o),p(t,r),p(t,l),p(t,a),p(t,d),p(t,f),n[19](e),_||(b=[ca(n[7].call(null,r)),N(t,"touchstart",n[10],{passive:!0}),N(t,"touchend",n[11],{passive:!0}),N(t,"mousedown",n[10]),N(t,"mouseup",n[11]),N(t,"click",n[18]),N(e,"contextmenu",K_)],_=!0)},p(v,[y]){y&1&&!$e(i.src,s=v[0].image)&&m(i,"src",s),y&32&&c!==(c=v[5]?"heroicons-solid:switch-vertical":"maki:cross")&&Re(a,"icon",c),y&32&&u!==(u=v[5]?"switchable":"cross")&&Re(a,"id",u),y&48&&h!==(h=!v[4]&&!v[5])&&(t.disabled=h),y&2&&oe(e,"selectedItem",v[1]),y&48&&oe(e,"non-eligible",!v[4]&&!v[5]),y&32&&oe(e,"switchable",v[5])},i:re,o:re,d(v){v&&P(e),n[19](null),_=!1,be(b)}}}const K_=n=>n.preventDefault();function Y_(n,e,t){let i,s,o,r,l;Q(n,jt,D=>t(17,i=D)),Q(n,Z,D=>t(2,s=D)),Q(n,qt,D=>t(21,o=D)),Q(n,qn,D=>t(22,r=D)),Q(n,ao,D=>t(23,l=D));let{itemData:a,slotOpen:c,index:u,weaponExpand:d,scrolling:f}=e;const h=Gt();let _,b=!1,v=!0,y=!1,E=a.name,w=0,I,T={"Orange Salamander":["Green Salamander","Purple Salamander"],"Green Salamander":["Orange Salamander","Purple Salamander"],"Purple Salamander":["Orange Salamander","Green Salamander"],"White Salamander":["Black Salamander","Gold Salamander"],"Black Salamander":["White Salamander","Gold Salamander"],"Gold Salamander":["White Salamander","Black Salamander"]};function j(D){setTimeout(()=>{Go(_,E)&&l.push({node:_,itemName:E})})}function O(D){v&&(c||!c&&D.isTrusted==!1)&&(a.tool&&d&&h("toolSelect"),h("itemSelect",{element:_,trusted:D.isTrusted}),_.classList.contains("selectedItem")||t(1,b=!1),t(12,c=!1),y?setTimeout(()=>{r[u][E].querySelector("button").click(),r[Object.keys(i).find(J=>i[J].name==E)][i[u]&&i[u].name?i[u].name:E].querySelector("button").click(),t(4,v=!0),t(5,y=!1)},5):(t(1,b=!b),G(jt,i[u]=b?a:ys,i)),cu(o,i))}function W(){f||(G(Z,s.item.ongoing=!0,s),G(Z,s.item.data={...a,type:"gear",element:_},s))}function z(){I=setInterval(()=>t(16,w+=50),50)}function K(){clearInterval(I),w>=750&&W(),t(16,w=0)}const R=D=>{D.shiftKey?W():s.item.ongoing||O(D)};function S(D){le[D?"unshift":"push"](()=>{_=D,t(3,_)})}return n.$$set=D=>{"itemData"in D&&t(0,a=D.itemData),"slotOpen"in D&&t(12,c=D.slotOpen),"index"in D&&t(13,u=D.index),"weaponExpand"in D&&t(14,d=D.weaponExpand),"scrolling"in D&&t(15,f=D.scrolling)},n.$$.update=()=>{if(n.$$.dirty&155650&&i)for(let D in i){if(!d&&D!=u&&i[D].name==E){t(5,y=!0);break}if(D!=u&&T[i[D].name]&&T[i[D].name].includes(E)){t(4,v=!1);break}else b||t(4,v=!0)}if(n.$$.dirty&139268)if(s.randomize.ongoing)t(5,y=!1);else for(let D in i)if(D!=u&&i[D].name==E){t(5,y=!0);break}else t(5,y=!1);n.$$.dirty&65536&&w==750&&h("displayInfo")},[a,b,s,_,v,y,E,j,O,W,z,K,c,u,d,f,w,i,R,S]}class Q_ extends Ne{constructor(e){super(),Te(this,e,Y_,V_,ge,{itemData:0,slotOpen:12,index:13,weaponExpand:14,scrolling:15})}}function X_(n){const e=n-1;return e*e*e+1}function Xe(n,{delay:e=0,duration:t=400,easing:i=ns}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:o=>`opacity: ${o*s}`}}function Je(n,{delay:e=0,duration:t=400,easing:i=X_,start:s=0,opacity:o=0}={}){const r=getComputedStyle(n),l=+r.opacity,a=r.transform==="none"?"":r.transform,c=1-s,u=l*(1-o);return{delay:e,duration:t,easing:i,css:(d,f)=>`
			transform: ${a} scale(${1-c*f});
			opacity: ${l-u*f}
		`}}function Ur(n){let e,t,i,s;return{c(){e=g("img"),$e(e.src,t=n[5][n[3]])||m(e,"src",t),m(e,"alt","")},m(o,r){M(o,e,r),s=!0},p(o,r){(!s||r&8&&!$e(e.src,t=o[5][o[3]]))&&m(e,"src",t)},i(o){s||(o&&we(()=>{s&&(i||(i=me(e,Xe,{duration:150},!0)),i.run(1))}),s=!0)},o(o){o&&(i||(i=me(e,Xe,{duration:150},!1)),i.run(0)),s=!1},d(o){o&&P(e),o&&i&&i.end()}}}function J_(n){let e,t,i=n[5][n[3]],s,o,r=n[0].name+"",l,a,c,u=Ur(n);return{c(){e=g("li"),t=g("button"),u.c(),s=C(),o=g("span"),l=te(r),oe(e,"selectedItem",n[4])},m(d,f){M(d,e,f),p(e,t),u.m(t,null),p(t,s),p(t,o),p(o,l),n[8](e),a||(c=[N(t,"click",n[6]),N(e,"mouseenter",n[9]),N(e,"focusin",n[10]),N(e,"mouseleave",n[11]),N(e,"focusout",n[12])],a=!0)},p(d,[f]){f&8&&ge(i,i=d[5][d[3]])?(qe(),H(u,1,1,re),We(),u=Ur(d),u.c(),L(u,1),u.m(t,s)):u.p(d,f),f&1&&r!==(r=d[0].name+"")&&Ee(l,r)},i(d){L(u)},o(d){H(u)},d(d){d&&P(e),u.d(d),n[8](null),a=!1,be(c)}}}function Z_(n,e,t){let i,s,o;Q(n,Bn,W=>t(14,i=W)),Q(n,qt,W=>t(15,s=W)),Q(n,Bt,W=>t(16,o=W));let{itemData:r,ddOpen:l=!1}=e;const a=Gt();let c,u=!1,d=!1,f,h=0,_=r.pieces.length,b=[];for(let W of r.pieces)e:for(let z of Un)for(let K of o[z])if(K.name==W){b.push(z);break e}let v=[];for(let W=0;W<_;W++)v.push(o[b[W]].find(z=>z.name==r.pieces[W]).image);function y(){d?f=setInterval(()=>{t(3,h++,h),h==_&&t(3,h=0)},750):(clearInterval(f),t(3,h=0))}function E(){a("setSelect");let W=0;for(let z=0;z<_;z++)!s[b[z]]||s[b[z]].name!=r.pieces[z]?i[b[z]][r.pieces[z]].querySelector("button").click():W++;W!=_&&t(7,l=!1)}function w(W){le[W?"unshift":"push"](()=>{c=W,t(2,c)})}const I=()=>t(1,d=!0),T=()=>t(1,d=!0),j=()=>t(1,d=!1),O=()=>t(1,d=!1);return n.$$set=W=>{"itemData"in W&&t(0,r=W.itemData),"ddOpen"in W&&t(7,l=W.ddOpen)},n.$$.update=()=>{n.$$.dirty&2&&(d||!d)&&y()},[r,d,c,h,u,v,E,l,w,I,T,j,O]}class x_ extends Ne{constructor(e){super(),Te(this,e,Z_,J_,ge,{itemData:0,ddOpen:7})}}const $_=n=>({}),Gr=n=>({});function em(n){let e,t,i,s,o,r,l,a,c;const u=n[8].tooltip,d=gu(u,n,n[7],Gr);return{c(){e=g("div"),t=g("span"),i=C(),s=g("input"),r=C(),d&&d.c(),m(s,"id",o=n[2]?"firstFocusable":n[3]?"lastFocusable":""),s.disabled=n[4],m(s,"type","checkbox"),s.checked=n[1],m(s,"class","svelte-i9pcgn"),m(e,"class","toggleCont svelte-i9pcgn"),oe(e,"unavailable",n[4])},m(f,h){M(f,e,h),p(e,t),t.innerHTML=n[0],p(e,i),p(e,s),p(e,r),d&&d.m(e,null),l=!0,a||(c=[N(s,"change",n[9]),N(s,"keydown",n[10])],a=!0)},p(f,[h]){(!l||h&1)&&(t.innerHTML=f[0]),(!l||h&12&&o!==(o=f[2]?"firstFocusable":f[3]?"lastFocusable":""))&&m(s,"id",o),(!l||h&16)&&(s.disabled=f[4]),(!l||h&2)&&(s.checked=f[1]),d&&d.p&&(!l||h&128)&&vu(d,u,f,f[7],l?bu(u,f[7],h,$_):yu(f[7]),Gr),(!l||h&16)&&oe(e,"unavailable",f[4])},i(f){l||(L(d,f),l=!0)},o(f){H(d,f),l=!1},d(f){f&&P(e),d&&d.d(f),a=!1,be(c)}}}function tm(n,e,t){let{$$slots:i={},$$scope:s}=e,{text:o,checked:r=!1,first:l=!1,last:a=!1,disabled:c=!1,forced:u=!1}=e;const d=Gt(),f=_=>{_.target.blur(),u?_.target.checked=!0:d("toggle",_.target.checked)},h=_=>{l&&yt(_),a&&wt(_),_.key=="Enter"&&!u?(_.target.checked=!_.target.checked,d("toggle",_.target.checked)):u&&(_.target.checked=!0)};return n.$$set=_=>{"text"in _&&t(0,o=_.text),"checked"in _&&t(1,r=_.checked),"first"in _&&t(2,l=_.first),"last"in _&&t(3,a=_.last),"disabled"in _&&t(4,c=_.disabled),"forced"in _&&t(5,u=_.forced),"$$scope"in _&&t(7,s=_.$$scope)},[o,r,l,a,c,u,d,s,i,f,h]}class mt extends Ne{constructor(e){super(),Te(this,e,tm,em,ge,{text:0,checked:1,first:2,last:3,disabled:4,forced:5})}}function Vr(n,e,t){const i=n.slice();return i[28]=e[t][0],i[29]=e[t][1],i}function Kr(n,e,t){const i=n.slice();return i[28]=e[t][0],i[29]=e[t][1],i}function Yr(n){let e,t;function i(...s){return n[19](n[28],...s)}return e=new mt({props:{text:n[29],checked:n[6][n[28]]}}),e.$on("toggle",i),{c(){se(e.$$.fragment)},m(s,o){ne(e,s,o),t=!0},p(s,o){n=s;const r={};o[0]&64&&(r.checked=n[6][n[28]]),e.$set(r)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function nm(n){let e,t,i,s,o,r,l,a,c;s=new mt({props:{text:"Descension",checked:n[4],forced:n[4]}}),s.$on("toggle",n[20]),r=new mt({props:{text:"Ascension",checked:n[5],forced:n[5]}}),r.$on("toggle",n[21]);let u=Ie(Object.entries(n[9])),d=[];for(let h=0;h<u.length;h+=1)d[h]=Qr(Vr(n,u,h));const f=h=>H(d[h],1,1,()=>{d[h]=null});return{c(){e=g("p"),e.textContent="Sort",t=C(),i=g("div"),se(s.$$.fragment),o=C(),se(r.$$.fragment),l=C(),a=g("div");for(let h=0;h<d.length;h+=1)d[h].c();m(e,"id","title"),m(e,"class","svelte-6kxnh3"),m(i,"class","radio ttFocus svelte-6kxnh3"),m(i,"id","sort"),m(a,"class","options svelte-6kxnh3")},m(h,_){M(h,e,_),M(h,t,_),M(h,i,_),ne(s,i,null),p(i,o),ne(r,i,null),M(h,l,_),M(h,a,_);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(a,null);c=!0},p(h,_){const b={};_[0]&16&&(b.checked=h[4]),_[0]&16&&(b.forced=h[4]),s.$set(b);const v={};if(_[0]&32&&(v.checked=h[5]),_[0]&32&&(v.forced=h[5]),r.$set(v),_[0]&1664){u=Ie(Object.entries(h[9]));let y;for(y=0;y<u.length;y+=1){const E=Vr(h,u,y);d[y]?(d[y].p(E,_),L(d[y],1)):(d[y]=Qr(E),d[y].c(),L(d[y],1),d[y].m(a,null))}for(qe(),y=u.length;y<d.length;y+=1)f(y);We()}},i(h){if(!c){L(s.$$.fragment,h),L(r.$$.fragment,h);for(let _=0;_<u.length;_+=1)L(d[_]);c=!0}},o(h){H(s.$$.fragment,h),H(r.$$.fragment,h),d=d.filter(Boolean);for(let _=0;_<d.length;_+=1)H(d[_]);c=!1},d(h){h&&(P(e),P(t),P(i),P(l),P(a)),ie(s),ie(r),ht(d,h)}}}function Qr(n){let e,t;function i(...s){return n[22](n[28],...s)}return e=new mt({props:{text:n[29],checked:n[7][n[28]],last:n[28]=="none"||n[28]=="tool"}}),e.$on("toggle",i),{c(){se(e.$$.fragment)},m(s,o){ne(e,s,o),t=!0},p(s,o){n=s;const r={};o[0]&128&&(r.checked=n[7][n[28]]),e.$set(r)},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){ie(e,s)}}}function im(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O;r=new mt({props:{text:"Inclusive",checked:n[1],forced:n[1]}}),r.$on("toggle",n[14]),a=new mt({props:{text:"Exclusive",checked:n[2],forced:n[2]}}),a.$on("toggle",n[15]),u=new mt({props:{text:"Strict",checked:n[3],forced:n[3]}}),u.$on("toggle",n[16]);let W=Ie(Object.entries(n[9])),z=[];for(let S=0;S<W.length;S+=1)z[S]=Yr(Kr(n,W,S));const K=S=>H(z[S],1,1,()=>{z[S]=null});let R=!n[8]&&nm(n);return{c(){e=g("div"),t=g("div"),i=g("p"),i.innerHTML=`Filter
            <span class="tooltip svelte-6kxnh3" id="bottom">Inclusive: Equipment that includes the selected search types
                <br/> <br/>
                Exclusive: Equipment that does not include the selected search types
                <br/> <br/>
                Strict: Equipment that includes the selected search types and no
                others</span> <iconify-icon icon="eva:info-outline"></iconify-icon>`,s=C(),o=g("div"),se(r.$$.fragment),l=C(),se(a.$$.fragment),c=C(),se(u.$$.fragment),d=C(),f=g("div"),h=g("div"),_=g("button"),_.textContent="Select all",b=C(),v=g("div"),y=g("button"),y.textContent="Clear all",E=C(),w=g("div");for(let S=0;S<z.length;S+=1)z[S].c();I=C(),R&&R.c(),m(i,"id","title"),m(i,"class","svelte-6kxnh3"),m(o,"class","radio ttFocus svelte-6kxnh3"),m(o,"id","filter"),m(_,"class","svelte-6kxnh3"),m(h,"class","svelte-6kxnh3"),m(y,"class","svelte-6kxnh3"),m(v,"class","svelte-6kxnh3"),m(f,"class","optionsAll svelte-6kxnh3"),m(w,"class","options svelte-6kxnh3"),m(t,"class","searchOptions svelte-6kxnh3"),m(e,"class","searchOptionsCont svelte-6kxnh3"),oe(e,"optionsOpen",n[0])},m(S,D){M(S,e,D),p(e,t),p(t,i),p(t,s),p(t,o),ne(r,o,null),p(o,l),ne(a,o,null),p(o,c),ne(u,o,null),p(t,d),p(t,f),p(f,h),p(h,_),p(f,b),p(f,v),p(v,y),p(t,E),p(t,w);for(let J=0;J<z.length;J+=1)z[J]&&z[J].m(w,null);p(t,I),R&&R.m(t,null),T=!0,j||(O=[N(_,"click",n[17]),N(y,"click",n[18])],j=!0)},p(S,D){const J={};D[0]&2&&(J.checked=S[1]),D[0]&2&&(J.forced=S[1]),r.$set(J);const A={};D[0]&4&&(A.checked=S[2]),D[0]&4&&(A.forced=S[2]),a.$set(A);const F={};if(D[0]&8&&(F.checked=S[3]),D[0]&8&&(F.forced=S[3]),u.$set(F),D[0]&1600){W=Ie(Object.entries(S[9]));let B;for(B=0;B<W.length;B+=1){const U=Kr(S,W,B);z[B]?(z[B].p(U,D),L(z[B],1)):(z[B]=Yr(U),z[B].c(),L(z[B],1),z[B].m(w,null))}for(qe(),B=W.length;B<z.length;B+=1)K(B);We()}S[8]||R.p(S,D),(!T||D[0]&1)&&oe(e,"optionsOpen",S[0])},i(S){if(!T){L(r.$$.fragment,S),L(a.$$.fragment,S),L(u.$$.fragment,S);for(let D=0;D<W.length;D+=1)L(z[D]);L(R),T=!0}},o(S){H(r.$$.fragment,S),H(a.$$.fragment,S),H(u.$$.fragment,S),z=z.filter(Boolean);for(let D=0;D<z.length;D+=1)H(z[D]);H(R),T=!1},d(S){S&&P(e),ie(r),ie(a),ie(u),ht(z,S),R&&R.d(),j=!1,be(O)}}}function sm(n,e,t){let i;Q(n,Bt,A=>t(24,i=A));let{optionsOpen:s,slotName:o,elementData:r,list:l}=e;const a=Gt();let c=o=="gear",u=!0,d=!1,f=!1,h=!0,_=!1,b={},v={},y=c?{armor:"Armor",magicDmg:"Magic",meleeDmg:"Melee",rangedDmg:"Ranged",unique:"Unique",tool:"Tool"}:{...Wt,none:"No Stats"};for(let A of Object.keys(y))b[A]=!0;for(let A of Object.keys(y))v[A]=!1;let E=["Void Spike Ultradagger","Pureblood Dagger","Gnome Rocket Launcher"],w=[];function I(A){setTimeout(()=>{for(let F in r){let B=i[o].find(ee=>ee.name==F),U={...Wt},Y={armor:!1,magicDmg:!1,meleeDmg:!1,rangedDmg:!1,unique:!1,tool:!1},ue=c?Y:U,ce=!1;if(c)if(!B.tool&&!E.includes(B.name)){for(let ee in b)for(let q of B.moves)if(Y[ee]=q.type.includes(ee),Y[ee])break}else Y.tool=!!B.tool,Y.tool||(Y.unique=B.info.type=="Unique",B.name=="Void Spike Ultradagger"&&(Y.armor=!0,Y.meleeDmg=!0));else{for(let ee in b)U[ee]=B.stats[ee]!=0;U.none=!!B.noStats}if(u)for(let ee in ue)if(b[ee]&&ue[ee]){ce=!1;break}else ce=!0;else if(d)for(let ee in ue)if(b[ee]&&ue[ee]){ce=!0;break}else ce=!1;else if(f)for(let ee in ue)if(b[ee]&&ue[ee]||!b[ee]&&!ue[ee])ce=!1;else{ce=!0;break}ce?r[F].classList.add("hidden","filtered"):r[F].classList.remove("hidden","filtered")}if(A=="sort"){let F=Object.keys(v).find(U=>v[U]),B=0;for(F&&!(F=="none"||F=="tool")?(w.sort((U,Y)=>{let ue=T(U,Y,!0).stats[F]-T(U,Y,!1).stats[F];return B||(B=ue),ue}),B||(w=Object.values(r))):!F&&_&&(w=Object.values(r).toReversed()),F=="none"&&(w=[...Object.entries(r).filter(U=>i[o].find(Y=>Y.name==U[0]).noStats),...Object.entries(r).filter(U=>!i[o].find(Y=>Y.name==U[0]).noStats)],w=w.map(U=>U[1]),_&&w.reverse());l.lastElementChild;)l.removeChild(l.lastElementChild);if(F||!F&&_)for(let U of w)l.appendChild(U);else for(let U in r)l.appendChild(r[U])}a("listUpdate")})}function T(A,F,B){return i[o].find(U=>U.name==Object.keys(r).find(Y=>r[Y]===(h?B?F:A:B?A:F)))}const j=A=>{t(1,u=A.detail),A.detail&&(t(2,d=!1),t(3,f=!1)),I("filter")},O=A=>{t(2,d=A.detail),A.detail&&(t(1,u=!1),t(3,f=!1)),I("filter")},W=A=>{t(3,f=A.detail),A.detail&&(t(1,u=!1),t(2,d=!1)),I("filter")},z=A=>{A.target.blur();for(let F in b)t(6,b[F]=!0,b);I("filter")},K=A=>{A.target.blur();for(let F in b)t(6,b[F]=!1,b);I("filter")},R=(A,F)=>{t(6,b[A]=F.detail,b),I("filter")},S=A=>{t(4,h=A.detail),A.detail&&t(5,_=!1),I("sort")},D=A=>{t(5,_=A.detail),A.detail&&t(4,h=!1),I("sort")},J=(A,F)=>{if(t(7,v[A]=F.detail,v),F.detail)for(let B in v)B!=A&&t(7,v[B]=!1,v);I("sort")};return n.$$set=A=>{"optionsOpen"in A&&t(0,s=A.optionsOpen),"slotName"in A&&t(11,o=A.slotName),"elementData"in A&&t(12,r=A.elementData),"list"in A&&t(13,l=A.list)},n.$$.update=()=>{n.$$.dirty[0]&8192&&l&&(w=[...l.children])},[s,u,d,f,h,_,b,v,c,y,I,o,r,l,j,O,W,z,K,R,S,D,J]}class om extends Ne{constructor(e){super(),Te(this,e,sm,im,ge,{optionsOpen:0,slotName:11,elementData:12,list:13},null,[-1,-1])}}function Xr(n,e,t){const i=n.slice();return i[61]=e[t],i}function rm(n){let e;return{c(){e=g("span"),e.textContent="Loading items...",m(e,"class","svelte-3qe8b")},m(t,i){M(t,e,i)},p:re,i:re,o:re,d(t){t&&P(e)}}}function lm(n){let e,t,i,s,o,r,l,a=n[3]!="sets"&&Jr(n),c=Ie(n[6]),u=[];for(let f=0;f<c.length;f+=1)u[f]=Zr(Xr(n,c,f));const d=f=>H(u[f],1,1,()=>{u[f]=null});return{c(){e=g("input"),t=C(),a&&a.c(),i=C(),s=g("ul");for(let f=0;f<u.length;f+=1)u[f].c();m(e,"type","text"),m(e,"class","searchBarInput"),m(e,"placeholder","Search..."),m(s,"class","svelte-3qe8b"),oe(s,"no-scrollbar",n[15].length<=4)},m(f,h){M(f,e,h),n[29](e),M(f,t,h),a&&a.m(f,h),M(f,i,h),M(f,s,h);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(s,null);n[42](s),o=!0,r||(l=[N(e,"keydown",n[18]),N(e,"input",n[19]),N(s,"mouseup",n[43]),N(s,"touchend",n[44],{passive:!0}),N(s,"scroll",n[45]),N(s,"scrollend",n[46])],r=!0)},p(f,h){if(f[3]!="sets"?a?a.p(f,h):(a=Jr(f),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null),h[0]&1197019){c=Ie(f[6]);let _;for(_=0;_<c.length;_+=1){const b=Xr(f,c,_);u[_]?(u[_].p(b,h),L(u[_],1)):(u[_]=Zr(b),u[_].c(),L(u[_],1),u[_].m(s,null))}for(qe(),_=c.length;_<u.length;_+=1)d(_);We()}(!o||h[0]&32768)&&oe(s,"no-scrollbar",f[15].length<=4)},i(f){if(!o){for(let h=0;h<c.length;h+=1)L(u[h]);o=!0}},o(f){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)H(u[h]);o=!1},d(f){f&&(P(e),P(t),P(i),P(s)),n[29](null),a&&a.d(f),ht(u,f),n[42](null),r=!1,be(l)}}}function Jr(n){let e,t,i;return{c(){e=g("button"),e.innerHTML='<iconify-icon icon="mi:filter"></iconify-icon>',m(e,"class","optionsButton svelte-3qe8b")},m(s,o){M(s,e,o),n[30](e),t||(i=N(e,"click",n[31]),t=!0)},p:re,d(s){s&&P(e),n[30](null),t=!1,i()}}}function am(n){let e,t,i,s;function o(a){n[39](a)}function r(a){n[40](a)}let l={itemData:n[61],eqSlotName:n[3]};return n[0]!==void 0&&(l.slotOpen=n[0]),n[9]!==void 0&&(l.scrolling=n[9]),e=new G_({props:l}),le.push(()=>Pe(e,"slotOpen",o)),le.push(()=>Pe(e,"scrolling",r)),e.$on("itemSelect",n[20]),e.$on("displayInfo",n[41]),{c(){se(e.$$.fragment)},m(a,c){ne(e,a,c),s=!0},p(a,c){const u={};c[0]&64&&(u.itemData=a[61]),c[0]&8&&(u.eqSlotName=a[3]),!t&&c[0]&1&&(t=!0,u.slotOpen=a[0],Ae(()=>t=!1)),!i&&c[0]&512&&(i=!0,u.scrolling=a[9],Ae(()=>i=!1)),e.$set(u)},i(a){s||(L(e.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),s=!1},d(a){ie(e,a)}}}function cm(n){let e,t,i;function s(r){n[37](r)}let o={itemData:n[61]};return n[0]!==void 0&&(o.ddOpen=n[0]),e=new x_({props:o}),le.push(()=>Pe(e,"ddOpen",s)),e.$on("setSelect",n[38]),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};l[0]&64&&(a.itemData=r[61]),!t&&l[0]&1&&(t=!0,a.ddOpen=r[0],Ae(()=>t=!1)),e.$set(a)},i(r){i||(L(e.$$.fragment,r),i=!0)},o(r){H(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function um(n){let e,t,i,s,o;function r(u){n[32](u)}function l(u){n[33](u)}function a(u){n[34](u)}let c={itemData:n[61],index:n[4]};return n[0]!==void 0&&(c.slotOpen=n[0]),n[1]!==void 0&&(c.weaponExpand=n[1]),n[9]!==void 0&&(c.scrolling=n[9]),e=new Q_({props:c}),le.push(()=>Pe(e,"slotOpen",r)),le.push(()=>Pe(e,"weaponExpand",l)),le.push(()=>Pe(e,"scrolling",a)),e.$on("itemSelect",n[20]),e.$on("toolSelect",n[35]),e.$on("displayInfo",n[36]),{c(){se(e.$$.fragment)},m(u,d){ne(e,u,d),o=!0},p(u,d){const f={};d[0]&64&&(f.itemData=u[61]),d[0]&16&&(f.index=u[4]),!t&&d[0]&1&&(t=!0,f.slotOpen=u[0],Ae(()=>t=!1)),!i&&d[0]&2&&(i=!0,f.weaponExpand=u[1],Ae(()=>i=!1)),!s&&d[0]&512&&(s=!0,f.scrolling=u[9],Ae(()=>s=!1)),e.$set(f)},i(u){o||(L(e.$$.fragment,u),o=!0)},o(u){H(e.$$.fragment,u),o=!1},d(u){ie(e,u)}}}function Zr(n){let e,t,i,s;const o=[um,cm,am],r=[];function l(a,c){return a[4]?0:a[3]=="sets"?1:2}return e=l(n),t=r[e]=o[e](n),{c(){t.c(),i=pt()},m(a,c){r[e].m(a,c),M(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?r[e].p(a,c):(qe(),H(r[u],1,1,()=>{r[u]=null}),We(),t=r[e],t?t.p(a,c):(t=r[e]=o[e](a),t.c()),L(t,1),t.m(i.parentNode,i))},i(a){s||(L(t),s=!0)},o(a){H(t),s=!1},d(a){a&&P(i),r[e].d(a)}}}function xr(n){let e,t,i,s;function o(a){n[47](a)}function r(a){n[48](a)}let l={slotName:n[3],elementData:n[16]};return n[2]!==void 0&&(l.optionsOpen=n[2]),n[5]!==void 0&&(l.list=n[5]),e=new om({props:l}),le.push(()=>Pe(e,"optionsOpen",o)),le.push(()=>Pe(e,"list",r)),e.$on("listUpdate",n[19]),{c(){se(e.$$.fragment)},m(a,c){ne(e,a,c),s=!0},p(a,c){const u={};c[0]&8&&(u.slotName=a[3]),c[0]&65536&&(u.elementData=a[16]),!t&&c[0]&4&&(t=!0,u.optionsOpen=a[2],Ae(()=>t=!1)),!i&&c[0]&32&&(i=!0,u.list=a[5],Ae(()=>i=!1)),e.$set(u)},i(a){s||(L(e.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),s=!1},d(a){ie(e,a)}}}function dm(n){let e,t,i,s,o,r,l;const a=[lm,rm],c=[];function u(f,h){return f[6]?0:1}t=u(n),i=c[t]=a[t](n);let d=n[3]!="sets"&&xr(n);return{c(){e=g("div"),i.c(),s=C(),d&&d.c(),m(e,"class","dropdown svelte-3qe8b"),oe(e,"infoDisplay",n[7])},m(f,h){M(f,e,h),c[t].m(e,null),p(e,s),d&&d.m(e,null),n[49](e),o=!0,r||(l=[N(window,"keydown",n[26]),N(window,"keyup",n[27]),N(window,"mousedown",n[28]),N(e,"transitionend",n[50]),N(e,"transitioncancel",n[51])],r=!0)},p(f,h){let _=t;t=u(f),t===_?c[t].p(f,h):(qe(),H(c[_],1,1,()=>{c[_]=null}),We(),i=c[t],i?i.p(f,h):(i=c[t]=a[t](f),i.c()),L(i,1),i.m(e,s)),f[3]!="sets"?d?(d.p(f,h),h[0]&8&&L(d,1)):(d=xr(f),d.c(),L(d,1),d.m(e,null)):d&&(qe(),H(d,1,1,()=>{d=null}),We()),(!o||h[0]&128)&&oe(e,"infoDisplay",f[7])},i(f){o||(L(i),L(d),o=!0)},o(f){H(i),H(d),o=!1},d(f){f&&P(e),c[t].d(),d&&d.d(),n[49](null),r=!1,be(l)}}}function fm(n,e,t){let i,s,o,r,l,a,c,u,d;Q(n,Bt,x=>t(22,o=x)),Q(n,Bn,x=>t(23,r=x)),Q(n,qu,x=>t(24,l=x)),Q(n,qn,x=>t(25,a=x)),Q(n,Nt,x=>t(54,c=x)),Q(n,jt,x=>t(55,u=x)),Q(n,qt,x=>t(56,d=x));let{slotName:f,index:h=0,slotOpen:_,weaponExpand:b=null,optionsOpen:v=!1}=e;const y=Gt();h?G(qn,a[h]={},a):G(Bn,r[f]={},r);let E=!1,w=!1,I=!1,T,j,O,W,z,K=null,R=!1,S=!1,D=[];function J(){z&&z.classList.remove("lastElement"),t(15,D=O.querySelectorAll("li:not(.hidden)")),z=D[D.length-1],z&&z.classList.add("lastElement"),(!z||z.classList.contains("non-eligible"))&&(z=W)}function A(x){!x.shiftKey&&x.key=="Tab"&&!v&&(x.preventDefault(),setTimeout(()=>j.focus()))}function F(){z&&z.removeEventListener("keydown",A),J(),z&&z.addEventListener("keydown",A)}function B(x){x.shiftKey&&x.key=="Tab"&&(x.preventDefault(),setTimeout(()=>(z.querySelector("button")||z).focus()))}function U(){uu(j.value,i),F()}function Y(x){y("itemSelect",x.detail.element),t(13,K=x.detail.element),R=x.detail.trusted;let Dt=O.querySelector(".selectedItem");Dt&&Dt!=x.detail.element&&Dt.classList.remove("selectedItem"),t(14,S=!0),R||(ce(),O.scrollTo(0,K.offsetTop)),setTimeout(ue)}function ue(){G(Nt,c=structuredClone(F_),c);for(let x in d)d[x].cost.min!=null&&(G(Nt,c.armor.min+=d[x].cost.min,c),G(Nt,c.armor.max+=d[x].cost.max,c));G(Nt,c.armor.avg=Math.ceil((c.armor.min+c.armor.max)/2),c);for(let x in u)u[x].cost.min!=null&&(G(Nt,c.gear.min+=u[x].cost.min,c),G(Nt,c.gear.max+=u[x].cost.max,c));G(Nt,c.gear.avg=Math.ceil((c.gear.min+c.gear.max)/2),c),G(Nt,c.total.min=c.armor.min+c.gear.min,c),G(Nt,c.total.max=c.armor.max+c.gear.max,c),G(Nt,c.total.avg=Math.ceil((c.total.min+c.total.max)/2),c)}function ce(){t(14,S=!1),t(11,j.value="",j),U()}const ee=x=>{f!="sets"&&!E&&x.shiftKey&&t(7,E=!0)},q=x=>{f!="sets"&&x.key=="Shift"&&!w&&t(7,E=!1)},X=()=>(t(7,E=!1),t(8,w=!1));function de(x){le[x?"unshift":"push"](()=>{j=x,t(11,j)})}function Be(x){le[x?"unshift":"push"](()=>{W=x,t(12,W)})}const Me=()=>t(2,v=!v);function Oe(x){_=x,t(0,_)}function nt(x){b=x,t(1,b)}function ze(x){I=x,t(9,I)}const De=()=>y("toolSelect"),je=()=>(t(7,E=!0),t(8,w=!0));function _e(x){_=x,t(0,_)}const ae=()=>t(14,S=!0);function gt(x){_=x,t(0,_)}function it(x){I=x,t(9,I)}const Ot=()=>(t(7,E=!0),t(8,w=!0));function et(x){le[x?"unshift":"push"](()=>{O=x,t(5,O)})}const st=()=>t(7,E=!1),k=()=>t(7,E=!1),fe=()=>t(9,I=!0),he=()=>t(9,I=!1);function ve(x){v=x,t(2,v)}function Le(x){O=x,t(5,O)}function He(x){le[x?"unshift":"push"](()=>{T=x,t(10,T)})}const Ge=x=>{x.propertyName=="visibility"&&x.target==T&&(S&&ce(),!_&&K&&setTimeout(()=>O.scrollTo(0,K.offsetTop)),es(j,_))},Ze=x=>{x.propertyName=="visibility"&&x.target==T&&(t(14,S=!1),es(j,_))};return n.$$set=x=>{"slotName"in x&&t(3,f=x.slotName),"index"in x&&t(4,h=x.index),"slotOpen"in x&&t(0,_=x.slotOpen),"weaponExpand"in x&&t(1,b=x.weaponExpand),"optionsOpen"in x&&t(2,v=x.optionsOpen)},n.$$.update=()=>{if(n.$$.dirty[0]&58720280&&t(16,i=h?a[h]:f=="sets"?l:r[f]),n.$$.dirty[0]&4194312&&t(6,s=o[f]),n.$$.dirty[0]&96&&O){t(15,D=O.querySelectorAll("li:not(.hidden)"));for(let x=0;x<O.childElementCount;x++)t(16,i[s[x].name]=O.children[x],i);J(),F()}},[_,b,v,f,h,O,s,E,w,I,T,j,W,K,S,D,i,y,B,U,Y,ce,o,r,l,a,ee,q,X,de,Be,Me,Oe,nt,ze,De,je,_e,ae,gt,it,Ot,et,st,k,fe,he,ve,Le,He,Ge,Ze]}class Ko extends Ne{constructor(e){super(),Te(this,e,fm,dm,ge,{slotName:3,index:4,slotOpen:0,weaponExpand:1,optionsOpen:2},null,[-1,-1,-1])}}function $r(n){let e,t,i,s,o,r,l=n[1].name+"",a,c,u,d,f;return{c(){e=g("button"),t=g("img"),o=C(),r=g("span"),a=te(l),$e(t.src,i=n[1].image)||m(t,"src",i),m(t,"alt",s=n[1].name),m(t,"draggable","false"),m(t,"class","svelte-v1cn2p"),m(r,"class","tooltip"),m(r,"id","left"),m(e,"class","svelte-v1cn2p"),tt(e,"display",n[1].link?"":"none")},m(h,_){M(h,e,_),p(e,t),p(e,o),p(e,r),p(r,a),u=!0,d||(f=[N(e,"click",n[13]),N(e,"focusin",n[14]),N(e,"outroend",n[15])],d=!0)},p(h,_){(!u||_&2&&!$e(t.src,i=h[1].image))&&m(t,"src",i),(!u||_&2&&s!==(s=h[1].name))&&m(t,"alt",s),(!u||_&2)&&l!==(l=h[1].name+"")&&Ee(a,l),_&2&&tt(e,"display",h[1].link?"":"none")},i(h){u||(h&&we(()=>{u&&(c||(c=me(e,Xe,{duration:150},!0)),c.run(1))}),u=!0)},o(h){h&&(c||(c=me(e,Xe,{duration:150},!1)),c.run(0)),u=!1},d(h){h&&P(e),h&&c&&c.end(),d=!1,be(f)}}}function hm(n){let e,t,i=n[1],s,o,r=n[0].charAt(0).toUpperCase()+n[0].slice(1)+"",l,a,c,u,d,f,h,_,b,v,y,E,w=$r(n);function I(O){n[19](O)}function T(O){n[20](O)}let j={slotName:n[0]};return n[4]!==void 0&&(j.slotOpen=n[4]),n[6]!==void 0&&(j.optionsOpen=n[6]),h=new Ko({props:j}),le.push(()=>Pe(h,"slotOpen",I)),le.push(()=>Pe(h,"optionsOpen",T)),h.$on("itemSelect",n[21]),{c(){e=g("div"),t=g("div"),w.c(),s=C(),o=g("button"),l=te(r),a=C(),c=g("iconify-icon"),u=C(),d=g("button"),d.innerHTML='<iconify-icon icon="maki:cross" class="svelte-v1cn2p"></iconify-icon> <span class="tooltip" id="top">Clear selection</span>',f=C(),se(h.$$.fragment),m(t,"class","eqSlotIcon ff-border svelte-v1cn2p"),Re(c,"icon","iconamoon:arrow-down-2-fill"),Re(c,"class","svelte-v1cn2p"),m(o,"class","ddButton svelte-v1cn2p"),m(d,"class","clearButton svelte-v1cn2p"),m(e,"class","eqSlotCont svelte-v1cn2p"),oe(e,"slotOpen",n[4]),oe(e,"clearAllowed",n[5]&&n[7])},m(O,W){M(O,e,W),p(e,t),w.m(t,null),n[16](t),p(e,s),p(e,o),p(o,l),p(o,a),p(o,c),p(e,u),p(e,d),p(e,f),ne(h,e,null),n[22](e),v=!0,y||(E=[N(window,"mousedown",n[11]),N(window,"keydown",n[12]),N(o,"click",n[17]),N(d,"click",n[18]),N(e,"mouseenter",n[23]),N(e,"mouseleave",n[24])],y=!0)},p(O,[W]){W&2&&ge(i,i=O[1])?(qe(),H(w,1,1,re),We(),w=$r(O),w.c(),L(w,1),w.m(t,null)):w.p(O,W),(!v||W&1)&&r!==(r=O[0].charAt(0).toUpperCase()+O[0].slice(1)+"")&&Ee(l,r);const z={};W&1&&(z.slotName=O[0]),!_&&W&16&&(_=!0,z.slotOpen=O[4],Ae(()=>_=!1)),!b&&W&64&&(b=!0,z.optionsOpen=O[6],Ae(()=>b=!1)),h.$set(z),(!v||W&16)&&oe(e,"slotOpen",O[4]),(!v||W&160)&&oe(e,"clearAllowed",O[5]&&O[7])},i(O){v||(L(w),L(h.$$.fragment,O),v=!0)},o(O){H(w),H(h.$$.fragment,O),v=!1},d(O){O&&P(e),w.d(O),n[16](null),ie(h),n[22](null),y=!1,be(E)}}}function pm(n,e,t){let i,s,o;Q(n,qt,S=>t(10,i=S)),Q(n,vn,S=>t(8,s=S)),Q(n,Z,S=>t(9,o=S));let{eqSlotName:r}=e,l,a,c=vs,u,d,f,h;const _=S=>{(!l.contains(S.target)&&!s||S.target==l||S.target==a)&&(t(4,u=!1),t(6,f=!1),S.target!=l&&S.target!=a&&t(5,d=!1))},b=S=>{S.key=="Tab"?setTimeout(()=>{t(5,d=l.contains(document.activeElement))}):S.key=="Escape"&&(t(4,u=!1),t(6,f=!1))},v=()=>{s||(t(4,u=!1),G(Z,o.item.ongoing=!0,o),G(Z,o.item.data={...c,slot:r,type:"eq"},o))},y=S=>{S.relatedTarget==null&&t(5,d=!0)},E=()=>{setTimeout(()=>W_(a))};function w(S){le[S?"unshift":"push"](()=>{a=S,t(3,a)})}const I=()=>{o.screenshot.ongoing||t(4,u=!u)},T=()=>{t(5,d=!1),l.classList.contains("clearAllowed")&&h.querySelector("button").click()};function j(S){u=S,t(4,u)}function O(S){f=S,t(6,f)}const W=S=>{setTimeout(()=>{t(7,h=S.detail.classList.contains("selectedItem")?S.detail:null),t(6,f=!1)})};function z(S){le[S?"unshift":"push"](()=>{l=S,t(2,l)})}const K=()=>t(5,d=!0),R=()=>{l.contains(document.activeElement)||t(5,d=!1)};return n.$$set=S=>{"eqSlotName"in S&&t(0,r=S.eqSlotName)},n.$$.update=()=>{n.$$.dirty&1027&&i[r]&&i[r].name!=c.name&&t(1,c=i[r])},[r,c,l,a,u,d,f,h,s,o,i,_,b,v,y,E,w,I,T,j,O,W,z,K,R]}class _m extends Ne{constructor(e){super(),Te(this,e,pm,hm,ge,{eqSlotName:0})}}function el(n,e,t){const i=n.slice();return i[1]=e[t],i[2]=e,i[3]=t,i}function tl(n){let e,t,i;function s(r){n[0](r,n[1],n[2],n[3])}let o={};return n[1]!==void 0&&(o.eqSlotName=n[1]),e=new _m({props:o}),le.push(()=>Pe(e,"eqSlotName",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){n=r;const a={};!t&&l&0&&(t=!0,a.eqSlotName=n[1],Ae(()=>t=!1)),e.$set(a)},i(r){i||(L(e.$$.fragment,r),i=!0)},o(r){H(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function mm(n){let e,t,i=Ie(Array(...Un)),s=[];for(let r=0;r<i.length;r+=1)s[r]=tl(el(n,i,r));const o=r=>H(s[r],1,1,()=>{s[r]=null});return{c(){e=g("div");for(let r=0;r<s.length;r+=1)s[r].c();m(e,"class","armorBox svelte-16092aw")},m(r,l){M(r,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,[l]){if(l&0){i=Ie(Array(...Un));let a;for(a=0;a<i.length;a+=1){const c=el(r,i,a);s[a]?(s[a].p(c,l),L(s[a],1)):(s[a]=tl(c),s[a].c(),L(s[a],1),s[a].m(e,null))}for(qe(),a=i.length;a<s.length;a+=1)o(a);We()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)L(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)H(s[l]);t=!1},d(r){r&&P(e),ht(s,r)}}}function gm(n,e,t){function i(s,o,r,l){r[l]=s}return[i]}class bm extends Ne{constructor(e){super(),Te(this,e,gm,mm,ge,{})}}function vm(n){let e,t=(n[3]?`${Math.floor(n[5]*.675+19.8)}% Reduction`:n[5])+"",i,s,o;return{c(){e=g("span"),i=te(t),m(e,"class","statValue svelte-78f402"),m(e,"tabindex","0"),oe(e,"hidden",n[2]),oe(e,"negative",n[5]<0),oe(e,"zero",n[5]==0),oe(e,"reduction",n[3])},m(r,l){M(r,e,l),p(e,i),s||(o=[N(e,"mouseenter",n[11]),N(e,"mouseleave",n[12]),N(e,"focusin",n[13]),N(e,"focusout",n[14])],s=!0)},p(r,l){l&40&&t!==(t=(r[3]?`${Math.floor(r[5]*.675+19.8)}% Reduction`:r[5])+"")&&Ee(i,t),l&4&&oe(e,"hidden",r[2]),l&32&&oe(e,"negative",r[5]<0),l&32&&oe(e,"zero",r[5]==0),l&8&&oe(e,"reduction",r[3])},d(r){r&&P(e),s=!1,be(o)}}}function ym(n){let e,t=(n[0]!="endurance"?n[5]:n[5].toFixed(2))+"",i;return{c(){e=g("span"),i=te(t),m(e,"class","statValue svelte-78f402"),oe(e,"hidden",n[2]),oe(e,"negative",n[5]<0),oe(e,"zero",n[5]==0)},m(s,o){M(s,e,o),p(e,i)},p(s,o){o&33&&t!==(t=(s[0]!="endurance"?s[5]:s[5].toFixed(2))+"")&&Ee(i,t),o&4&&oe(e,"hidden",s[2]),o&32&&oe(e,"negative",s[5]<0),o&32&&oe(e,"zero",s[5]==0)},d(s){s&&P(e)}}}function wm(n){let e;return{c(){e=g("iconify-icon"),Re(e,"icon","codicon:sparkle-filled"),Re(e,"class","svelte-78f402")},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function km(n){let e,t=`${n[1]} Bonus`,i;return{c(){e=g("span"),i=te(t),m(e,"class","statName svelte-78f402")},m(s,o){M(s,e,o),p(e,i)},p(s,o){o&2&&t!==(t=`${s[1]} Bonus`)&&Ee(i,t)},d(s){s&&P(e)}}}function Cm(n){let e,t,i,s,o,r,l;function a(_,b){return _[0]!="armor"?ym:vm}let c=a(n),u=c(n);function d(_,b){if(_[2])return km;if(_[4])return wm}let f=d(n),h=f&&f(n);return{c(){e=g("div"),t=g("img"),s=C(),u.c(),o=C(),h&&h.c(),$e(t.src,i="stats/"+n[0]+".svg")||m(t,"src",i),m(t,"alt",n[1]),m(t,"class","svelte-78f402"),m(e,"id",n[0]),m(e,"class","svelte-78f402"),oe(e,"hidden",n[5]==0)},m(_,b){M(_,e,b),p(e,t),p(e,s),u.m(e,null),p(e,o),h&&h.m(e,null),r||(l=[N(t,"mouseenter",n[9]),N(t,"mouseleave",n[10])],r=!0)},p(_,[b]){b&1&&!$e(t.src,i="stats/"+_[0]+".svg")&&m(t,"src",i),b&2&&m(t,"alt",_[1]),c===(c=a(_))&&u?u.p(_,b):(u.d(1),u=c(_),u&&(u.c(),u.m(e,o))),f===(f=d(_))&&h?h.p(_,b):(h&&h.d(1),h=f&&f(_),h&&(h.c(),h.m(e,null))),b&1&&m(e,"id",_[0]),b&32&&oe(e,"hidden",_[5]==0)},i:re,o:re,d(_){_&&P(e),u.d(),h&&h.d(),r=!1,be(l)}}}function Em(n,e,t){let i,s,o,r;Q(n,Bt,E=>t(6,s=E)),Q(n,Pn,E=>t(7,o=E)),Q(n,bt,E=>t(8,r=E));let{codeName:l,formalName:a}=e,c,u,d=!1;const f=()=>t(2,c=!0),h=()=>t(2,c=!1),_=()=>t(3,u=!0),b=()=>t(3,u=!1),v=()=>t(3,u=!0),y=()=>t(3,u=!1);return n.$$set=E=>{"codeName"in E&&t(0,l=E.codeName),"formalName"in E&&t(1,a=E.formalName)},n.$$.update=()=>{if(n.$$.dirty&257&&t(5,i=r[l]),n.$$.dirty&193)for(let E in o)if(o[E]&&s.bonuses.find(w=>w.name==E).stats[l]!=0){t(4,d=!0);break}else t(4,d=!1)},[l,a,c,u,d,i,s,o,r,f,h,_,b,v,y]}class Sm extends Ne{constructor(e){super(),Te(this,e,Em,Cm,ge,{codeName:0,formalName:1})}}function nl(n,e,t){const i=n.slice();return i[8]=e[t][0],i[9]=e[t][1],i[10]=e,i[11]=t,i}function il(n){let e,t,i,s;function o(a){n[4](a,n[8],n[10],n[11])}function r(a){n[5](a,n[9],n[10],n[11])}let l={};return n[8]!==void 0&&(l.codeName=n[8]),n[9]!==void 0&&(l.formalName=n[9]),e=new Sm({props:l}),le.push(()=>Pe(e,"codeName",o)),le.push(()=>Pe(e,"formalName",r)),{c(){se(e.$$.fragment)},m(a,c){ne(e,a,c),s=!0},p(a,c){n=a;const u={};!t&&c&0&&(t=!0,u.codeName=n[8],Ae(()=>t=!1)),!i&&c&0&&(i=!0,u.formalName=n[9],Ae(()=>i=!1)),e.$set(u)},i(a){s||(L(e.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),s=!1},d(a){ie(e,a)}}}function sl(n){let e,t,i,s,o=n[2]?"Copied!":`Copy ${n[1]?"all":""} as text`,r,l,a,c,u;return{c(){e=g("button"),t=g("iconify-icon"),i=C(),s=g("span"),r=te(o),Re(t,"icon","ic:round-content-copy"),Re(t,"class","svelte-cimkzy"),m(s,"class","tooltip"),m(s,"id","top"),m(e,"class","copyStatsButton svelte-cimkzy")},m(d,f){M(d,e,f),p(e,t),p(e,i),p(e,s),p(s,r),a=!0,c||(u=N(e,"click",n[6]),c=!0)},p(d,f){(!a||f&6)&&o!==(o=d[2]?"Copied!":`Copy ${d[1]?"all":""} as text`)&&Ee(r,o)},i(d){a||(d&&we(()=>{a&&(l||(l=me(e,Xe,{duration:100},!0)),l.run(1))}),a=!0)},o(d){d&&(l||(l=me(e,Xe,{duration:100},!1)),l.run(0)),a=!1},d(d){d&&P(e),d&&l&&l.end(),c=!1,u()}}}function Im(n){let e;return{c(){e=g("span"),e.textContent="Show all stats",m(e,"slot","tooltip"),m(e,"class","tooltip"),m(e,"id","top")},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function Tm(n){let e,t,i,s,o,r=Ie(Object.entries(Wt)),l=[];for(let u=0;u<r.length;u+=1)l[u]=il(nl(n,r,u));const a=u=>H(l[u],1,1,()=>{l[u]=null});let c=n[3]&&sl(n);return s=new mt({props:{text:"",$$slots:{tooltip:[Im]},$$scope:{ctx:n}}}),s.$on("toggle",n[7]),{c(){e=g("div");for(let u=0;u<l.length;u+=1)l[u].c();t=C(),c&&c.c(),i=C(),se(s.$$.fragment),m(e,"class","statBox svelte-cimkzy"),oe(e,"showAll",n[1])},m(u,d){M(u,e,d);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);p(e,t),c&&c.m(e,null),p(e,i),ne(s,e,null),o=!0},p(u,[d]){if(d&0){r=Ie(Object.entries(Wt));let h;for(h=0;h<r.length;h+=1){const _=nl(u,r,h);l[h]?(l[h].p(_,d),L(l[h],1)):(l[h]=il(_),l[h].c(),L(l[h],1),l[h].m(e,t))}for(qe(),h=r.length;h<l.length;h+=1)a(h);We()}u[3]?c?(c.p(u,d),d&8&&L(c,1)):(c=sl(u),c.c(),L(c,1),c.m(e,i)):c&&(qe(),H(c,1,1,()=>{c=null}),We());const f={};d&4096&&(f.$$scope={dirty:d,ctx:u}),s.$set(f),(!o||d&2)&&oe(e,"showAll",u[1])},i(u){if(!o){for(let d=0;d<r.length;d+=1)L(l[d]);L(c),L(s.$$.fragment,u),o=!0}},o(u){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)H(l[d]);H(c),H(s.$$.fragment,u),o=!1},d(u){u&&P(e),ht(l,u),c&&c.d(),ie(s)}}}function Nm(n,e,t){let i;Q(n,bt,d=>t(0,i=d));let s=!1,o=!1,r=!1;function l(d,f,h,_){h[_][0]=d}function a(d,f,h,_){h[_][1]=d}const c=d=>{if(on(d),o)return;let f="";for(let[h,_]of Object.entries(Wt)){let b=h=="armor"?"":`
`,v=i[h];h=="armor"?v+=` (${Math.floor(v*.675+19.8)}% Reduction)`:h=="endurance"?v=v.toFixed(2)+"%":h=="ammoReturn"&&(v+="%"),(s||!s&&i[h])&&(f+=`${b}${_}: ${v}`)}navigator.clipboard.writeText(f),t(2,o=!0),setTimeout(()=>t(2,o=!1),1e3)},u=d=>t(1,s=d.detail);return n.$$.update=()=>{if(n.$$.dirty&1&&i){t(3,r=!1);for(let d in i)if(i[d]){t(3,r=!0);break}}},[i,s,o,r,l,a,c,u]}class Om extends Ne{constructor(e){super(),Te(this,e,Nm,Tm,ge,{})}}function Dm(n){let e,t,i,s,o,r,l,a,c,u;return{c(){e=g("div"),t=g("button"),t.textContent="-",i=C(),s=g("input"),o=C(),r=g("b"),r.textContent="%",l=C(),a=g("button"),a.textContent="+",m(t,"id","decrease"),m(t,"class","svelte-f5qib2"),m(s,"type","number"),m(s,"placeholder","0"),m(s,"class","svelte-f5qib2"),m(r,"class","svelte-f5qib2"),m(a,"id","increase"),m(a,"class","svelte-f5qib2"),m(e,"class","svelte-f5qib2"),oe(e,"non-percent",!n[1])},m(d,f){M(d,e,f),p(e,t),p(e,i),p(e,s),zt(s,n[0]),p(e,o),p(e,r),p(e,l),p(e,a),c||(u=[N(t,"click",n[4]),N(s,"input",n[5]),N(s,"input",n[2]),N(a,"click",n[6])],c=!0)},p(d,[f]){f&1&&ha(s.value)!==d[0]&&zt(s,d[0])},i:re,o:re,d(d){d&&P(e),c=!1,be(u)}}}function Rm(n,e,t){let{weaponName:i,value:s}=e,o=i!="Nature's Wrath Spellbook",r;o?(s=100,r=100):(s=4,r=4);function l(){s<0?t(0,s=0):s>r&&t(0,s=r),s%1!=0&&t(0,s=Math.floor(s))}const a=()=>{t(0,s--,s),l()};function c(){s=ha(this.value),t(0,s)}const u=()=>{t(0,s++,s),l()};return n.$$set=d=>{"weaponName"in d&&t(3,i=d.weaponName),"value"in d&&t(0,s=d.value)},[s,o,l,i,a,c,u]}class Am extends Ne{constructor(e){super(),Te(this,e,Rm,Dm,ge,{weaponName:3,value:0})}}function ol(n,e,t){const i=n.slice();i[53]=e[t];const s=i[53].name.includes("Fantastic Beamstorm")?"~":"";i[23]=s;const o=i[24].includes(i[53].name);return i[54]=o,i}function Pm(n){let e,t,i=n[2].description+"",s,o;return{c(){e=g("span"),t=te('"'),s=te(i),o=te('"'),m(e,"id","toolDesc"),m(e,"class","svelte-1th16h3")},m(r,l){M(r,e,l),p(e,t),p(e,s),p(e,o)},p(r,l){l[0]&4&&i!==(i=r[2].description+"")&&Ee(s,i)},d(r){r&&P(e)}}}function Mm(n){let e,t,i,s=`${n[5]?"Type":n[3].name}:`,o,r,l=n[20],a,c,u,d,f,h=n[5]?"Return":"Expand",_,b,v,y,E=ll(n),w=n[4]&&al(n);return{c(){e=g("button"),t=g("div"),i=g("span"),o=te(s),r=C(),E.c(),c=C(),w&&w.c(),u=C(),d=g("span"),f=te("("),_=te(h),b=te(")"),m(i,"class","svelte-1th16h3"),tt(i,"font-size",Object.keys(n[21]).includes(n[3].name)?`calc(1rem * ${n[21][n[3].name]})`:""),m(t,"id",a=n[5]?"":"basic"),m(t,"class","svelte-1th16h3"),m(d,"class","tooltip svelte-1th16h3"),m(d,"id","top"),m(e,"class","gearPreview svelte-1th16h3"),tt(e,"line-height",`${n[10]/6.5}px`)},m(I,T){M(I,e,T),p(e,t),p(t,i),p(i,o),p(t,r),E.m(t,null),p(e,c),w&&w.m(e,null),p(e,u),p(e,d),p(d,f),p(d,_),p(d,b),n[36](e),v||(y=N(e,"click",n[37]),v=!0)},p(I,T){T[0]&40&&s!==(s=`${I[5]?"Type":I[3].name}:`)&&Ee(o,s),T[0]&2097160&&tt(i,"font-size",Object.keys(I[21]).includes(I[3].name)?`calc(1rem * ${I[21][I[3].name]})`:""),T[0]&1048576&&ge(l,l=I[20])?(E.d(1),E=ll(I),E.c(),E.m(t,null)):E.p(I,T),T[0]&32&&a!==(a=I[5]?"":"basic")&&m(t,"id",a),I[4]?w?w.p(I,T):(w=al(I),w.c(),w.m(e,u)):w&&(w.d(1),w=null),T[0]&32&&h!==(h=I[5]?"Return":"Expand")&&Ee(_,h),T[0]&1024&&tt(e,"line-height",`${I[10]/6.5}px`)},d(I){I&&P(e),E.d(I),w&&w.d(),n[36](null),v=!1,y()}}}function rl(n){let e;return{c(){e=g("iconify-icon"),Re(e,"icon","codicon:sparkle-filled"),Re(e,"class","svelte-1th16h3")},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function ll(n){let e,t,i=(n[5]?n[2].info.type.replace("/","<b>,</b><br/>"):n[26](n[3]))+"",s,o=!n[5]&&n[6].basic&&rl();return{c(){e=g("span"),t=new Tu(!1),s=C(),o&&o.c(),t.a=s,m(e,"class","svelte-1th16h3")},m(r,l){M(r,e,l),t.m(i,e),p(e,s),o&&o.m(e,null)},p(r,l){l[0]&44&&i!==(i=(r[5]?r[2].info.type.replace("/","<b>,</b><br/>"):r[26](r[3]))+"")&&t.p(i),!r[5]&&r[6].basic?o||(o=rl(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&P(e),o&&o.d()}}}function al(n){let e,t,i,s=`${n[5]?"Special":n[4].name.split(" (")[0]}:`,o,r,l,a=n[20],c,u=!n[5]&&cl(n),d=fl(n);return{c(){e=g("div"),t=g("span"),i=g("span"),o=te(s),r=C(),u&&u.c(),l=C(),d.c(),m(i,"class","svelte-1th16h3"),m(t,"class","svelte-1th16h3"),tt(t,"font-size",Object.keys(n[21]).includes(n[4].name)?`calc(1rem * ${n[21][n[4].name]})`:""),m(e,"id",c=n[5]?"":"special"),m(e,"class","svelte-1th16h3")},m(f,h){M(f,e,h),p(e,t),p(t,i),p(i,o),p(t,r),u&&u.m(t,null),p(e,l),d.m(e,null)},p(f,h){h[0]&48&&s!==(s=`${f[5]?"Special":f[4].name.split(" (")[0]}:`)&&Ee(o,s),f[5]?u&&(u.d(1),u=null):u?u.p(f,h):(u=cl(f),u.c(),u.m(t,null)),h[0]&2097168&&tt(t,"font-size",Object.keys(f[21]).includes(f[4].name)?`calc(1rem * ${f[21][f[4].name]})`:""),h[0]&1048576&&ge(a,a=f[20])?(d.d(1),d=fl(f),d.c(),d.m(e,null)):d.p(f,h),h[0]&32&&c!==(c=f[5]?"":"special")&&m(e,"id",c)},d(f){f&&P(e),u&&u.d(),d.d(f)}}}function cl(n){let e,t,i=n[4].cd+"",s,o;return{c(){e=g("span"),t=te("("),s=te(i),o=te("s cd.)"),m(e,"id","cd"),m(e,"class","svelte-1th16h3")},m(r,l){M(r,e,l),p(e,t),p(e,s),p(e,o)},p(r,l){l[0]&16&&i!==(i=r[4].cd+"")&&Ee(s,i)},d(r){r&&P(e)}}}function ul(n){let e,t;return{c(){e=g("span"),t=te(n[23]),m(e,"id","prefix"),m(e,"class","svelte-1th16h3")},m(i,s){M(i,e,s),p(e,t)},p(i,s){s[0]&8388608&&Ee(t,i[23])},d(i){i&&P(e)}}}function dl(n){let e;return{c(){e=g("iconify-icon"),Re(e,"icon","codicon:sparkle-filled"),Re(e,"class","svelte-1th16h3")},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function fl(n){let e,t,i=(n[5]?n[2].info.special:n[26](n[4]))+"",s,o,r=n[23]&&!n[5]&&ul(n),l=!n[5]&&n[6].special&&dl();return{c(){e=g("span"),r&&r.c(),t=C(),s=te(i),o=C(),l&&l.c(),m(e,"class","svelte-1th16h3")},m(a,c){M(a,e,c),r&&r.m(e,null),p(e,t),p(e,s),p(e,o),l&&l.m(e,null)},p(a,c){a[23]&&!a[5]?r?r.p(a,c):(r=ul(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),c[0]&52&&i!==(i=(a[5]?a[2].info.special:a[26](a[4]))+"")&&Ee(s,i),!a[5]&&a[6].special?l||(l=dl(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&P(e),r&&r.d(),l&&l.d()}}}function hl(n){let e,t,i,s,o,r,l=n[2].name+"",a,c,u,d,f,h;return{c(){e=g("button"),t=g("img"),o=C(),r=g("span"),a=te(l),$e(t.src,i=n[2].image)||m(t,"src",i),m(t,"alt",s=n[2].name),m(t,"draggable","false"),m(t,"class","svelte-1th16h3"),m(r,"class","tooltip svelte-1th16h3"),m(r,"id",c=n[19].screenshot.ongoing?"right":"top"),m(e,"class","svelte-1th16h3"),tt(e,"display",n[2].link?"":"none"),tt(e,"border-radius",n[2].tool?"calc(1rem)":"")},m(_,b){M(_,e,b),p(e,t),p(e,o),p(e,r),p(r,a),d=!0,f||(h=N(e,"click",n[38]),f=!0)},p(_,b){(!d||b[0]&4&&!$e(t.src,i=_[2].image))&&m(t,"src",i),(!d||b[0]&4&&s!==(s=_[2].name))&&m(t,"alt",s),(!d||b[0]&4)&&l!==(l=_[2].name+"")&&Ee(a,l),(!d||b[0]&524288&&c!==(c=_[19].screenshot.ongoing?"right":"top"))&&m(r,"id",c),b[0]&4&&tt(e,"display",_[2].link?"":"none"),b[0]&4&&tt(e,"border-radius",_[2].tool?"calc(1rem)":"")},i(_){d||(_&&we(()=>{d&&(u||(u=me(e,Xe,{duration:150},!0)),u.run(1))}),d=!0)},o(_){_&&(u||(u=me(e,Xe,{duration:150},!1)),u.run(0)),d=!1},d(_){_&&P(e),_&&u&&u.end(),f=!1,h()}}}function pl(n){let e,t,i,s,o,r,l,a,c,u;i=new mt({props:{text:"Toggle base values",checked:n[16]}}),i.$on("toggle",n[47]),o=new mt({props:{text:"Eyeball of Reckoning buff",checked:n[17]}}),o.$on("toggle",n[48]);let d=Ie(n[2].moves),f=[];for(let _=0;_<d.length;_+=1)f[_]=vl(ol(n,d,_));const h=_=>H(f[_],1,1,()=>{f[_]=null});return{c(){e=g("div"),t=g("div"),se(i.$$.fragment),s=C(),se(o.$$.fragment),r=C(),l=g("div");for(let _=0;_<f.length;_+=1)f[_].c();m(t,"class","weaponToggles svelte-1th16h3"),m(l,"class","weaponMoves svelte-1th16h3"),m(e,"class","fullWeaponView svelte-1th16h3")},m(_,b){M(_,e,b),p(e,t),ne(i,t,null),p(t,s),ne(o,t,null),p(e,r),p(e,l);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(l,null);u=!0},p(_,b){const v={};b[0]&65536&&(v.checked=_[16]),i.$set(v);const y={};if(b[0]&131072&&(y.checked=_[17]),o.$set(y),b[0]&219611268){d=Ie(_[2].moves);let E;for(E=0;E<d.length;E+=1){const w=ol(_,d,E);f[E]?(f[E].p(w,b),L(f[E],1)):(f[E]=vl(w),f[E].c(),L(f[E],1),f[E].m(l,null))}for(qe(),E=d.length;E<f.length;E+=1)h(E);We()}},i(_){if(!u){L(i.$$.fragment,_),L(o.$$.fragment,_);for(let b=0;b<d.length;b+=1)L(f[b]);_&&we(()=>{u&&(c&&c.end(1),a=ga(e,Xe,{duration:150,delay:300}),a.start())}),u=!0}},o(_){H(i.$$.fragment,_),H(o.$$.fragment,_),f=f.filter(Boolean);for(let b=0;b<f.length;b+=1)H(f[b]);a&&a.invalidate(),_&&(c=ba(e,Xe,{duration:150})),u=!1},d(_){_&&P(e),ie(i),ie(o),ht(f,_),_&&c&&c.end()}}}function _l(n){let e,t,i,s;function o(a){n[49](a)}function r(a){n[50](a)}let l={};return n[7]!==void 0&&(l.value=n[7]),n[2].name!==void 0&&(l.weaponName=n[2].name),e=new Am({props:l}),le.push(()=>Pe(e,"value",o)),le.push(()=>Pe(e,"weaponName",r)),{c(){se(e.$$.fragment)},m(a,c){ne(e,a,c),s=!0},p(a,c){const u={};!t&&c[0]&128&&(t=!0,u.value=a[7],Ae(()=>t=!1)),!i&&c[0]&4&&(i=!0,u.weaponName=a[2].name,Ae(()=>i=!1)),e.$set(u)},i(a){s||(L(e.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),s=!1},d(a){ie(e,a)}}}function ml(n){let e,t,i=n[53].cd+"",s,o;return{c(){e=g("span"),t=te("("),s=te(i),o=te("s cd.)"),m(e,"id","cd"),m(e,"class","svelte-1th16h3")},m(r,l){M(r,e,l),p(e,t),p(e,s),p(e,o)},p(r,l){l[0]&4&&i!==(i=r[53].cd+"")&&Ee(s,i)},d(r){r&&P(e)}}}function gl(n){let e;return{c(){e=g("iconify-icon"),Re(e,"icon","codicon:sparkle-filled"),Re(e,"class","svelte-1th16h3")},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function bl(n){let e,t=n[23]+(n[16]&&!n[54]?n[53].base:n[54]?n[27](n[53]):n[26](n[53]))+"",i,s,o=n[18][n[53].name]&&!n[16]&&gl();return{c(){e=g("span"),i=te(t),s=C(),o&&o.c(),m(e,"class","svelte-1th16h3")},m(r,l){M(r,e,l),p(e,i),p(e,s),o&&o.m(e,null)},p(r,l){l[0]&65540&&t!==(t=r[23]+(r[16]&&!r[54]?r[53].base:r[54]?r[27](r[53]):r[26](r[53]))+"")&&Ee(i,t),r[18][r[53].name]&&!r[16]?o||(o=gl(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&P(e),o&&o.d()}}}function vl(n){let e,t,i,s,o,r=(n[54]&&n[2].name=="Nature's Wrath Spellbook"?n[53].name.replace("Charged","Charge(s)"):n[53].name)+":",l,a,c,u=n[54]?[n[20],n[7],n[17]]:[n[20],n[17]],d,f,h=n[54]&&_l(n),_=n[53].special&&ml(n),b=bl(n);return{c(){e=g("div"),t=g("div"),i=g("span"),s=g("span"),h&&h.c(),o=C(),l=te(r),a=C(),_&&_.c(),c=C(),b.c(),d=C(),m(s,"class","flex fd-col svelte-1th16h3"),m(i,"class","flex fd-col ai-center svelte-1th16h3"),m(t,"class","ff-border svelte-1th16h3"),m(e,"class","svelte-1th16h3")},m(v,y){M(v,e,y),p(e,t),p(t,i),p(i,s),h&&h.m(s,null),p(s,o),p(s,l),p(i,a),_&&_.m(i,null),p(t,c),b.m(t,null),p(e,d),f=!0},p(v,y){v[54]?h?(h.p(v,y),y[0]&4&&L(h,1)):(h=_l(v),h.c(),L(h,1),h.m(s,o)):h&&(qe(),H(h,1,1,()=>{h=null}),We()),(!f||y[0]&4)&&r!==(r=(v[54]&&v[2].name=="Nature's Wrath Spellbook"?v[53].name.replace("Charged","Charge(s)"):v[53].name)+":")&&Ee(l,r),v[53].special?_?_.p(v,y):(_=ml(v),_.c(),_.m(i,null)):_&&(_.d(1),_=null),y[0]&1179780&&ge(u,u=v[54]?[v[20],v[7],v[17]]:[v[20],v[17]])?(b.d(1),b=bl(v),b.c(),b.m(t,null)):b.p(v,y)},i(v){f||(L(h),f=!0)},o(v){H(h),f=!1},d(v){v&&P(e),h&&h.d(),_&&_.d(),b.d(v)}}}function Lm(n){let e,t,i,s,o="Gear"+(n[19].screenshot.ongoing?":":""),r,l,a,c,u,d=n[2],f,h,_,b,v,y,E,w,I,T,j,O;function W(B,U){if(B[2].name&&!B[2].tool)return Mm;if(B[2].tool)return Pm}let z=W(n),K=z&&z(n),R=hl(n);function S(B){n[42](B)}function D(B){n[43](B)}function J(B){n[44](B)}let A={slotName:n[0],index:n[1]};n[14]!==void 0&&(A.slotOpen=n[14]),n[5]!==void 0&&(A.weaponExpand=n[5]),n[15]!==void 0&&(A.optionsOpen=n[15]),b=new Ko({props:A}),le.push(()=>Pe(b,"slotOpen",S)),le.push(()=>Pe(b,"weaponExpand",D)),le.push(()=>Pe(b,"optionsOpen",J)),b.$on("itemSelect",n[45]),b.$on("toolSelect",n[28]);let F=n[5]&&pl(n);return{c(){e=g("div"),t=g("button"),i=g("iconify-icon"),s=C(),r=te(o),l=C(),a=g("div"),K&&K.c(),c=C(),u=g("div"),R.c(),_=C(),se(b.$$.fragment),w=C(),F&&F.c(),I=pt(),Re(i,"icon","iconamoon:arrow-down-2-fill"),Re(i,"class","svelte-1th16h3"),m(t,"class","ddButton svelte-1th16h3"),m(u,"class","gearSlotIcon svelte-1th16h3"),we(()=>n[39].call(u)),tt(u,"min-width",`${n[11]}px`),m(a,"class","gearInfoCont ff-border svelte-1th16h3"),we(()=>n[41].call(a)),tt(a,"justify-content",n[2].name?"":"flex-end"),m(e,"class","gearSlot svelte-1th16h3"),oe(e,"slotOpen",n[14]),oe(e,"weapon-expand",n[5])},m(B,U){M(B,e,U),p(e,t),p(t,i),p(t,s),p(t,r),n[34](t),p(e,l),p(e,a),K&&K.m(a,null),p(a,c),p(a,u),R.m(u,null),f=rn(u,n[39].bind(u)),n[40](a),h=rn(a,n[41].bind(a)),p(e,_),ne(b,e,null),n[46](e),M(B,w,U),F&&F.m(B,U),M(B,I,U),T=!0,j||(O=[N(window,"mousedown",n[32]),N(window,"keydown",n[33]),N(t,"click",n[35])],j=!0)},p(B,U){(!T||U[0]&524288)&&o!==(o="Gear"+(B[19].screenshot.ongoing?":":""))&&Ee(r,o),z===(z=W(B))&&K?K.p(B,U):(K&&K.d(1),K=z&&z(B),K&&(K.c(),K.m(a,c))),U[0]&4&&ge(d,d=B[2])?(qe(),H(R,1,1,re),We(),R=hl(B),R.c(),L(R,1),R.m(u,null)):R.p(B,U),U[0]&2048&&tt(u,"min-width",`${B[11]}px`),U[0]&4&&tt(a,"justify-content",B[2].name?"":"flex-end");const Y={};U[0]&1&&(Y.slotName=B[0]),U[0]&2&&(Y.index=B[1]),!v&&U[0]&16384&&(v=!0,Y.slotOpen=B[14],Ae(()=>v=!1)),!y&&U[0]&32&&(y=!0,Y.weaponExpand=B[5],Ae(()=>y=!1)),!E&&U[0]&32768&&(E=!0,Y.optionsOpen=B[15],Ae(()=>E=!1)),b.$set(Y),(!T||U[0]&16384)&&oe(e,"slotOpen",B[14]),(!T||U[0]&32)&&oe(e,"weapon-expand",B[5]),B[5]?F?(F.p(B,U),U[0]&32&&L(F,1)):(F=pl(B),F.c(),L(F,1),F.m(I.parentNode,I)):F&&(qe(),H(F,1,1,()=>{F=null}),We())},i(B){T||(L(R),L(b.$$.fragment,B),L(F),T=!0)},o(B){H(R),H(b.$$.fragment,B),H(F),T=!1},d(B){B&&(P(e),P(w),P(I)),n[34](null),K&&K.d(),R.d(B),f(),n[40](null),h(),ie(b),n[46](null),F&&F.d(B),j=!1,be(O)}}}function Fm(n,e,t){let i,s,o,r,l,a,c;Q(n,Pn,k=>t(30,i=k)),Q(n,jt,k=>t(31,s=k)),Q(n,Bt,k=>t(51,o=k)),Q(n,Z,k=>t(19,r=k)),Q(n,bt,k=>t(20,l=k)),Q(n,ks,k=>t(21,a=k)),Q(n,vn,k=>t(22,c=k));let{gearBox:u,slotName:d,index:f}=e,h,_,b,v,y,E,w,I=ys,T,j,O,W,z,K=!1,R=!1,S="",D=["Charged Basic Attack","Charged Solar Beam"],J={basic:!1,special:!1},A={};function F(){if(w)for(let k of w.querySelectorAll(".gearPreview > div")){if(Object.keys(a).includes(k.id=="basic"?T.name:j?j.name:null))return;let fe=q_(k,c);fe&&(k.id=="basic"?G(ks,a[T.name]=fe,a):G(ks,a[j.name]=fe,a))}}function B(k){let fe;if(k.name=="Void Needle")fe=k.base+l[k.type]-l.armor*5.625;else if(I.name=="Pureblood Dagger"){let he,ve={magicDmg:l.magicDmg,meleeDmg:l.meleeDmg,rangedDmg:l.rangedDmg},Le=Object.keys(ve).reduce((Ge,Ze)=>ve[Ge]>ve[Ze]?Ge:Ze),He=0;for(let Ge in ve)Ge!=Le&&(He+=ve[Ge]);he=l[Le]*2-He,fe=k.base+(k.name.includes("HP")?he/2:he)}else if(k.type.includes("/")){let he=k.type.split("/"),ve=0;for(let Le of he)ve+=l[Le]*k[`${Le}Mult`];fe=k.base+ve}else fe=k.base+l[k.type]*k.mult;return R&&(!k.name.includes("HP")||k.name.includes("HP")&&I.name=="Pureblood Dagger")&&(fe+=fe*.08775),z?Math.floor(fe*10)/10:Math.floor(fe)}function U(k){let fe,he=K?0:l[k.type];return I.name=="Celestial Powers Spellbook"?fe=(80+he*1.1)*(.8+2.2*h/100):I.name=="Staff of Dreams"?fe=160+160*h/100+he*(.4+1.3*h/100):I.name=="Nature's Wrath Spellbook"&&(fe=260+400*h/4+he*(1+1.5*h/4)),R&&(fe+=fe*.08775),Math.floor(fe*10)/10}function Y(){r.screenshot.ongoing||(t(16,K=!1),t(17,R=!1),z?(t(5,z=!1),u.classList.remove("weapon-expand"),setTimeout(F)):(u.classList.add("weapon-expand"),t(5,z=!0)))}function ue(k,fe){e:for(let he in i){let ve=o.bonuses.find(He=>He.name==he).stats,Le=k?k.type:null;for(let He in Wt){if(Le===null)break e;if(I.name=="Void Spike Ultradagger"&&fe=="special"||k.name=="Void Needle"?Le="armor/meleeDmg":I.name=="Pureblood Dagger"?Le=he=="Fish of Rage"?"":"magicDmg/meleeDmg/rangedDmg":I.name=="Gnome Rocket Launcher"&&(Le=""),i[he]&&ve[He]!=0&&Le.includes(He)){t(18,A[k.name]=!0,A),fe&&t(6,J[fe]=!0,J);break e}else t(18,A[k.name]=!1,A),fe&&t(6,J[fe]=!1,J)}}}const ce=k=>{(!_.contains(k.target)&&!c||_.contains(k.target)&&b.contains(k.target))&&(t(14,O=!1),t(15,W=!1))},ee=k=>{k.key=="Escape"&&(t(14,O=!1),t(15,W=!1))};function q(k){le[k?"unshift":"push"](()=>{E=k,t(12,E)})}const X=()=>{r.screenshot.ongoing||t(14,O=!O)};function de(k){le[k?"unshift":"push"](()=>{w=k,t(13,w)})}const Be=k=>{on(k),Y()},Me=()=>{c||(G(Z,r.item.ongoing=!0,r),G(Z,r.item.data={...I,type:"gear"},r))};function Oe(){y=this.offsetHeight,t(11,y)}function nt(k){le[k?"unshift":"push"](()=>{b=k,t(9,b)})}function ze(){v=this.offsetHeight,t(10,v)}function De(k){O=k,t(14,O)}function je(k){z=k,t(5,z)}function _e(k){W=k,t(15,W)}const ae=()=>{setTimeout(()=>{F(),(!I.name||I.tool)&&z&&Y(),t(15,W=!1)})};function gt(k){le[k?"unshift":"push"](()=>{_=k,t(8,_)})}const it=k=>{t(16,K=k.detail),k.detail&&t(17,R=!1)},Ot=k=>{t(17,R=k.detail),k.detail&&t(16,K=!1)};function et(k){h=k,t(7,h)}function st(k){n.$$.not_equal(I.name,k)&&(I.name=k,t(2,I),t(31,s),t(1,f),t(4,j))}return n.$$set=k=>{"gearBox"in k&&t(29,u=k.gearBox),"slotName"in k&&t(0,d=k.slotName),"index"in k&&t(1,f=k.index)},n.$$.update=()=>{if(n.$$.dirty[0]&22|n.$$.dirty[1]&1&&s[f]&&s[f].name!=I.name&&(t(2,I=s[f]),!I.tool&&I.name)){t(3,T=I.moves.filter(k=>k.basic)[0]),t(4,j=I.moves.filter(k=>k.special)[0]),t(18,A={});for(let k of I.moves)t(18,A[k.name]=!1,A),ue(k);j&&j.name.includes("Fantastic Beamstorm")?t(23,S="~"):t(23,S="")}if(n.$$.dirty[0]&1073741948&&(i||z)&&!I.tool&&I.name){for(let k in J)ue(k=="basic"?T:j||null,k);for(let k of I.moves)ue(k)}},[d,f,I,T,j,z,J,h,_,b,v,y,E,w,O,W,K,R,A,r,l,a,c,S,D,F,B,U,Y,u,i,s,ce,ee,q,X,de,Be,Me,Oe,nt,ze,De,je,_e,ae,gt,it,Ot,et,st]}class Bm extends Ne{constructor(e){super(),Te(this,e,Fm,Lm,ge,{gearBox:29,slotName:0,index:1},null,[-1,-1])}}function yl(n,e,t){const i=n.slice();return i[3]=e[t],i}function wl(n){let e,t,i;function s(r){n[1](r)}let o={slotName:"gear",index:n[3]};return n[0]!==void 0&&(o.gearBox=n[0]),e=new Bm({props:o}),le.push(()=>Pe(e,"gearBox",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};!t&&l&1&&(t=!0,a.gearBox=r[0],Ae(()=>t=!1)),e.$set(a)},i(r){i||(L(e.$$.fragment,r),i=!0)},o(r){H(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function qm(n){let e,t,i=Ie(En),s=[];for(let r=0;r<i.length;r+=1)s[r]=wl(yl(n,i,r));const o=r=>H(s[r],1,1,()=>{s[r]=null});return{c(){e=g("div");for(let r=0;r<s.length;r+=1)s[r].c();m(e,"class","gearBox svelte-oyqozi")},m(r,l){M(r,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n[2](e),t=!0},p(r,[l]){if(l&1){i=Ie(En);let a;for(a=0;a<i.length;a+=1){const c=yl(r,i,a);s[a]?(s[a].p(c,l),L(s[a],1)):(s[a]=wl(c),s[a].c(),L(s[a],1),s[a].m(e,null))}for(qe(),a=i.length;a<s.length;a+=1)o(a);We()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)L(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)H(s[l]);t=!1},d(r){r&&P(e),ht(s,r),n[2](null)}}}function Wm(n,e,t){let i;function s(r){i=r,t(0,i)}function o(r){le[r?"unshift":"push"](()=>{i=r,t(0,i)})}return[i,s,o]}class zm extends Ne{constructor(e){super(),Te(this,e,Wm,qm,ge,{})}}function Hm(n){let e,t,i,s,o,r,l,a;return{c(){e=g("div"),t=g("div"),i=g("button"),i.textContent="Clear armor",s=C(),o=g("div"),r=g("button"),r.textContent="Clear gear",m(i,"class","svelte-5d0uid"),m(t,"class","buttonCont svelte-5d0uid"),m(r,"class","svelte-5d0uid"),m(o,"class","buttonCont svelte-5d0uid"),m(e,"class","mainFeatures svelte-5d0uid"),m(e,"id","box")},m(c,u){M(c,e,u),p(e,t),p(t,i),p(e,s),p(e,o),p(o,r),l||(a=[N(i,"click",n[3]),N(r,"click",n[4])],l=!0)},p:re,i:re,o:re,d(c){c&&P(e),l=!1,be(a)}}}function jm(n,e,t){let i,s,o,r,l;Q(n,jt,f=>t(5,i=f)),Q(n,qn,f=>t(6,s=f)),Q(n,qt,f=>t(7,o=f)),Q(n,Bn,f=>t(8,r=f)),Q(n,vn,f=>t(0,l=f));function a(){for(let f in o)o[f].name&&r[f][o[f].name].querySelector("button").click()}function c(){for(let f in i)i[f].name&&s[f][i[f].name].querySelector("button").click()}return[l,a,c,f=>{f.target.blur(),l||a()},f=>{f.target.blur(),l||c()}]}class Um extends Ne{constructor(e){super(),Te(this,e,jm,Hm,ge,{})}}function kl(n){let e,t,i;function s(r){n[3](r)}let o={slotName:"sets"};return n[0]!==void 0&&(o.slotOpen=n[0]),e=new Ko({props:o}),le.push(()=>Pe(e,"slotOpen",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};!t&&l&1&&(t=!0,a.slotOpen=r[0],Ae(()=>t=!1)),e.$set(a)},i(r){i||(L(e.$$.fragment,r),i=!0)},o(r){H(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function Gm(n){let e,t,i,s,o,r,l=n[1].head&&n[1].body&&n[1].legs&&n[1].feet&&kl(n);return{c(){e=g("button"),e.innerHTML=`Load armor set
    <iconify-icon icon="iconamoon:arrow-down-2-fill" rotate="180deg" class="svelte-l9dczq"></iconify-icon>`,t=C(),l&&l.c(),i=pt(),m(e,"class","svelte-l9dczq"),oe(e,"ddOpen",n[0])},m(a,c){M(a,e,c),M(a,t,c),l&&l.m(a,c),M(a,i,c),s=!0,o||(r=N(e,"click",n[2]),o=!0)},p(a,[c]){(!s||c&1)&&oe(e,"ddOpen",a[0]),a[1].head&&a[1].body&&a[1].legs&&a[1].feet?l?(l.p(a,c),c&2&&L(l,1)):(l=kl(a),l.c(),L(l,1),l.m(i.parentNode,i)):l&&(qe(),H(l,1,1,()=>{l=null}),We())},i(a){s||(L(l),s=!0)},o(a){H(l),s=!1},d(a){a&&(P(e),P(t),P(i)),l&&l.d(a),o=!1,r()}}}function Vm(n,e,t){let i;Q(n,Bt,l=>t(1,i=l));let{ddOpen:s=!1}=e;const o=()=>t(0,s=!s);function r(l){s=l,t(0,s)}return n.$$set=l=>{"ddOpen"in l&&t(0,s=l.ddOpen)},[s,i,o,r]}class Km extends Ne{constructor(e){super(),Te(this,e,Vm,Gm,ge,{ddOpen:0})}}function Ym(n){let e;return{c(){e=g("span"),e.textContent="Create some builds to get started!",m(e,"class","tooltip svelte-1cwaghb"),m(e,"id","top"),tt(e,"left","70.5%")},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function Qm(n){let e;return{c(){e=g("span"),e.textContent="Select some gear or armor to get started!",m(e,"class","tooltip svelte-1cwaghb"),m(e,"id","top"),tt(e,"left",n[3]?"38%":"")},m(t,i){M(t,e,i)},p(t,i){i&8&&tt(e,"left",t[3]?"38%":"")},d(t){t&&P(e)}}}function Xm(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K,R,S;function D(U,Y){if(!U[4])return Qm;if(!U[3])return Ym}let J=D(n),A=J&&J(n);function F(U){n[18](U)}let B={};return n[1]!==void 0&&(B.ddOpen=n[1]),W=new Km({props:B}),le.push(()=>Pe(W,"ddOpen",F)),{c(){e=g("div"),t=g("div"),i=g("div"),s=g("button"),o=te("Export new build"),l=C(),a=g("div"),c=g("button"),u=te("Save to build"),f=C(),h=g("div"),_=g("button"),b=te("Delete build"),y=C(),A&&A.c(),E=C(),w=g("div"),I=g("div"),T=g("button"),T.textContent="Load build",j=C(),O=g("div"),se(W.$$.fragment),s.disabled=r=!n[4],m(s,"class","svelte-1cwaghb"),m(i,"class","buttonCont svelte-1cwaghb"),c.disabled=d=!n[4]||!n[3],m(c,"class","svelte-1cwaghb"),m(a,"class","buttonCont svelte-1cwaghb"),m(a,"id","middle"),_.disabled=v=!n[3],m(_,"class","svelte-1cwaghb"),m(h,"class","buttonCont svelte-1cwaghb"),m(t,"id","modify"),m(t,"class","svelte-1cwaghb"),oe(t,"no-tooltip",n[2]),m(T,"class","svelte-1cwaghb"),m(I,"class","buttonCont svelte-1cwaghb"),m(O,"class","buttonCont svelte-1cwaghb"),m(w,"id","load"),m(w,"class","svelte-1cwaghb"),m(e,"class","mainFeatures svelte-1cwaghb"),m(e,"id","build")},m(U,Y){M(U,e,Y),p(e,t),p(t,i),p(i,s),p(s,o),p(t,l),p(t,a),p(a,c),p(c,u),p(t,f),p(t,h),p(h,_),p(_,b),p(t,y),A&&A.m(t,null),p(e,E),p(e,w),p(w,I),p(I,T),p(w,j),p(w,O),ne(W,O,null),n[19](O),K=!0,R||(S=[N(window,"mousedown",n[8]),N(window,"keydown",n[9]),N(s,"click",n[10]),N(s,"mouseenter",n[11]),N(s,"mouseleave",n[12]),N(c,"click",n[13]),N(_,"click",n[14]),N(_,"mouseenter",n[15]),N(_,"mouseleave",n[16]),N(T,"click",n[17])],R=!0)},p(U,[Y]){(!K||Y&16&&r!==(r=!U[4]))&&(s.disabled=r),(!K||Y&24&&d!==(d=!U[4]||!U[3]))&&(c.disabled=d),(!K||Y&8&&v!==(v=!U[3]))&&(_.disabled=v),J===(J=D(U))&&A?A.p(U,Y):(A&&A.d(1),A=J&&J(U),A&&(A.c(),A.m(t,null))),(!K||Y&4)&&oe(t,"no-tooltip",U[2]);const ue={};!z&&Y&2&&(z=!0,ue.ddOpen=U[1],Ae(()=>z=!1)),W.$set(ue)},i(U){K||(L(W.$$.fragment,U),K=!0)},o(U){H(W.$$.fragment,U),K=!1},d(U){U&&P(e),A&&A.d(),ie(W),n[19](null),R=!1,be(S)}}}function Jm(n,e,t){let i,s,o,r,l;Q(n,Rt,O=>t(7,i=O)),Q(n,xt,O=>t(3,s=O)),Q(n,co,O=>t(4,o=O)),Q(n,vn,O=>t(5,r=O)),Q(n,Z,O=>t(6,l=O));let a,c=!1,u=!1;const d=O=>{a.contains(O.target)||t(1,c=!1)},f=O=>{O.key=="Escape"&&t(1,c=!1)},h=()=>{o&&!r&&G(Z,l.export.ongoing=!0,l)},_=()=>t(2,u=!0),b=()=>t(2,u=!1),v=()=>{o&&s&&!r&&G(Z,l.save.ongoing=!0,l)},y=()=>{s&&!r&&G(Z,l.delete.ongoing=!0,l)},E=()=>t(2,u=!0),w=()=>t(2,u=!1),I=()=>{r||G(Z,l.load.ongoing=!0,l)};function T(O){c=O,t(1,c)}function j(O){le[O?"unshift":"push"](()=>{a=O,t(0,a)})}return n.$$.update=()=>{n.$$.dirty&128&&G(xt,s=Object.keys(i).length>0,s)},[a,c,u,s,o,r,l,i,d,f,h,_,b,v,y,E,w,I,T,j]}class Zm extends Ne{constructor(e){super(),Te(this,e,Jm,Xm,ge,{})}}function Cl(n){let e;return{c(){e=g("span"),e.textContent="New changes! Exiting will erase them.",m(e,"id","alert")},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function xm(n){let e,t,i,s,o,r,l,a=25-n[3].length+"",c,u,d,f,h,_,b,v,y,E,w,I=275-n[4].length+"",T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce=(n[3]||n[4])&&Cl();return{c(){e=g("div"),t=g("div"),i=te(`Name:\r
        `),s=g("input"),r=C(),l=g("span"),c=te(a),u=C(),d=g("div"),f=g("div"),h=g("span"),h.textContent="Description / Notes:",_=C(),ce&&ce.c(),b=C(),v=g("textarea"),E=C(),w=g("span"),T=te(I),j=C(),O=g("div"),W=g("div"),z=g("button"),K=te("CANCEL"),S=C(),D=g("div"),J=g("button"),A=te("EXPORT"),m(s,"class","buildNameInput"),m(s,"id","firstFocusable"),s.disabled=o=n[5].export.status==0,m(s,"type","text"),m(s,"placeholder",n[6]),m(s,"maxlength","25"),m(l,"class","charCounter svelte-9d2eec"),m(l,"id","buildName"),m(t,"class","buildNameCont svelte-9d2eec"),m(v,"class","buildDescInput"),v.disabled=y=n[5].export.status==0,m(v,"placeholder","[Empty]"),m(v,"maxlength","275"),m(v,"autocomplete","off"),m(w,"class","charCounter"),m(w,"id","buildDesc"),m(d,"class","buildDescCont"),z.disabled=R=n[5].export.status==0,m(J,"id","lastFocusable"),J.disabled=F=n[5].export.status==0,m(O,"class","promptOptions"),m(e,"class","buildExporter svelte-9d2eec")},m(ee,q){M(ee,e,q),p(e,t),p(t,i),p(t,s),n[8](s),zt(s,n[3]),p(t,r),p(t,l),p(l,c),p(e,u),p(e,d),p(d,f),p(f,h),p(f,_),ce&&ce.m(f,null),p(d,b),p(d,v),zt(v,n[4]),n[13](v),p(d,E),p(d,w),p(w,T),p(e,j),p(e,O),p(O,W),p(W,z),p(z,K),n[16](z),p(O,S),p(O,D),p(D,J),p(J,A),U=!0,Y||(ue=[N(s,"input",n[9]),N(s,"input",n[10]),N(s,"keydown",n[11]),N(v,"input",n[12]),N(v,"input",n[14]),N(v,"keydown",n[15]),N(z,"click",n[17]),N(J,"click",n[18]),N(J,"keydown",wt),N(e,"introstart",n[19])],Y=!0)},p(ee,[q]){(!U||q&32&&o!==(o=ee[5].export.status==0))&&(s.disabled=o),q&8&&s.value!==ee[3]&&zt(s,ee[3]),(!U||q&8)&&a!==(a=25-ee[3].length+"")&&Ee(c,a),ee[3]||ee[4]?ce||(ce=Cl(),ce.c(),ce.m(f,null)):ce&&(ce.d(1),ce=null),(!U||q&32&&y!==(y=ee[5].export.status==0))&&(v.disabled=y),q&16&&zt(v,ee[4]),(!U||q&16)&&I!==(I=275-ee[4].length+"")&&Ee(T,I),(!U||q&32&&R!==(R=ee[5].export.status==0))&&(z.disabled=R),(!U||q&32&&F!==(F=ee[5].export.status==0))&&(J.disabled=F)},i(ee){U||(ee&&we(()=>{U&&(B||(B=me(e,Je,{duration:250},!0)),B.run(1))}),U=!0)},o(ee){ee&&(B||(B=me(e,Je,{duration:250},!1)),B.run(0)),U=!1},d(ee){ee&&P(e),n[8](null),ce&&ce.d(),n[13](null),n[16](null),ee&&B&&B.end(),Y=!1,be(ue)}}}function $m(n,e,t){let i,s,o,r,l,a;Q(n,Z,D=>t(5,i=D)),Q(n,kt,D=>t(20,s=D)),Q(n,xt,D=>t(21,o=D)),Q(n,jt,D=>t(22,r=D)),Q(n,qt,D=>t(23,l=D)),Q(n,Rt,D=>t(24,a=D));let c=Object.keys(a).length,u,d,f,h="",_="",b=`My ${c+1+au[(c+1)%10]} build`;function v(){if(G(Z,i.export.status=0,i),h.endsWith(" ")&&t(3,h=h.replace(/  +/g," ").replace(/ $/,"")),_.endsWith(" ")&&t(4,_=_.replace(/  +/g," ").replace(/ $/,"")),Object.keys(a).includes(h)){G(Z,i.export.status=-1,i),G(Z,i.message="duplicate_name",i);return}let D=m_(Xt(jn(Gn),"builds")).key,J=du(l,r);J.name=h||b,J.desc=_||"[Empty]",_s(Xt(jn(Gn),`builds/${D}`),J).then(()=>{G(Z,i.export.status=1,i),G(xt,o=!0,o),Vo(),Rt.update(A=>({...A,[J.name]:{id:D,desc:J.desc}})),G(kt,s=J,s),G(kt,s.id=D,s),navigator.clipboard.writeText(`${location.origin+location.pathname}?id=${D}`)}).catch(()=>{G(Z,i.export.status=-1,i),G(Z,i.message="firebase_fail",i)})}function y(D){le[D?"unshift":"push"](()=>{u=D,t(0,u)})}function E(){h=this.value,t(3,h)}const w=D=>{t(3,h=ts(D.target.value,25))},I=D=>{i.export.status==0&&D.preventDefault(),yt(D),to(u,D.target.value,25)};function T(){_=this.value,t(4,_)}function j(D){le[D?"unshift":"push"](()=>{d=D,t(1,d)})}const O=D=>{t(4,_=ts(D.target.value,275))},W=D=>{i.export.status==0&&D.preventDefault(),to(d,D.target.value,275)};function z(D){le[D?"unshift":"push"](()=>{f=D,t(2,f)})}return[u,d,f,h,_,i,b,v,y,E,w,I,T,j,O,W,z,()=>{i.export.status!=0&&G(Z,i.export.ongoing=!1,i)},()=>{i.export.status!=0&&v()},()=>f.focus()]}class eg extends Ne{constructor(e){super(),Te(this,e,$m,xm,ge,{})}}function tg(n){let e,t,i,s,o=n[2]?"Copied!":"Copy link",r,l,a;return{c(){e=g("button"),t=g("b"),t.textContent="Build link",i=C(),s=g("span"),r=te(o),m(s,"class","tooltip"),m(s,"id","top"),m(e,"class","copyButton svelte-1qz7uzx"),m(e,"id","firstFocusable")},m(c,u){M(c,e,u),p(e,t),p(e,i),p(e,s),p(s,r),l||(a=[N(e,"click",n[7]),N(e,"keydown",yt)],l=!0)},p(c,u){u&4&&o!==(o=c[2]?"Copied!":"Copy link")&&Ee(r,o)},d(c){c&&P(e),l=!1,be(a)}}}function ng(n){let e,t,i,s,o,r,l=n[2]?"Copied!":"Copy ID",a,c,u,d;return{c(){e=g("button"),t=g("b"),t.textContent="ID:",i=C(),s=te(n[4]),o=C(),r=g("span"),a=te(l),m(r,"class","tooltip"),m(r,"id","top"),m(e,"class","copyButton svelte-1qz7uzx"),m(e,"id",c=n[1]!="save"?"firstFocusable":"")},m(f,h){M(f,e,h),p(e,t),p(e,i),p(e,s),p(e,o),p(e,r),p(r,a),u||(d=[N(e,"click",n[5]),N(e,"keydown",n[6])],u=!0)},p(f,h){h&4&&l!==(l=f[2]?"Copied!":"Copy ID")&&Ee(a,l),h&2&&c!==(c=f[1]!="save"?"firstFocusable":"")&&m(e,"id",c)},d(f){f&&P(e),u=!1,be(d)}}}function ig(n){let e;function t(o,r){if(o[0]=="id")return ng;if(o[0]=="link")return tg}let i=t(n),s=i&&i(n);return{c(){s&&s.c(),e=pt()},m(o,r){s&&s.m(o,r),M(o,e,r)},p(o,[r]){i===(i=t(o))&&s?s.p(o,r):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},i:re,o:re,d(o){o&&P(e),s&&s.d(o)}}}function sg(n,e,t){let i;Q(n,kt,f=>t(8,i=f));let{type:s,source:o}=e,r=!1;function l(f){r||(navigator.clipboard.writeText(f),t(2,r=!0),setTimeout(()=>t(2,r=!1),1e3))}let a=i?i.id:null;const c=()=>l(a),u=()=>{o!="save"&&yt()},d=()=>l(`${location.origin+location.pathname}?id=${a}`);return n.$$set=f=>{"type"in f&&t(0,s=f.type),"source"in f&&t(1,o=f.source)},[s,o,r,l,a,c,u,d]}class yi extends Ne{constructor(e){super(),Te(this,e,sg,ig,ge,{type:0,source:1})}}function og(n){let e,t,i,s;return e=new yi({props:{type:"link",source:"share"}}),i=new yi({props:{type:"id",source:"share"}}),{c(){se(e.$$.fragment),t=C(),se(i.$$.fragment)},m(o,r){ne(e,o,r),M(o,t,r),ne(i,o,r),s=!0},p:re,i(o){s||(L(e.$$.fragment,o),L(i.$$.fragment,o),s=!0)},o(o){H(e.$$.fragment,o),H(i.$$.fragment,o),s=!1},d(o){o&&P(t),ie(e,o),ie(i,o)}}}function rg(n){let e;return{c(){e=g("span"),e.textContent="Your build has been erased from your local saves and the database."},m(t,i){M(t,e,i)},p:re,i:re,o:re,d(t){t&&P(e)}}}function lg(n){let e;function t(o,r){if(o[2].message=="not_found")return fg;if(o[2].message=="invalid_id")return dg}let i=t(n),s=i&&i(n);return{c(){s&&s.c(),e=pt()},m(o,r){s&&s.m(o,r),M(o,e,r)},p(o,r){i!==(i=t(o))&&(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},i:re,o:re,d(o){o&&P(e),s&&s.d(o)}}}function ag(n){let e,t,i,s,o,r;return i=new yi({props:{type:"link",source:"save"}}),o=new yi({props:{type:"id",source:"save"}}),{c(){e=g("span"),e.textContent="Your build has been overwritten.",t=C(),se(i.$$.fragment),s=C(),se(o.$$.fragment)},m(l,a){M(l,e,a),M(l,t,a),ne(i,l,a),M(l,s,a),ne(o,l,a),r=!0},p:re,i(l){r||(L(i.$$.fragment,l),L(o.$$.fragment,l),r=!0)},o(l){H(i.$$.fragment,l),H(o.$$.fragment,l),r=!1},d(l){l&&(P(e),P(t),P(s)),ie(i,l),ie(o,l)}}}function cg(n){let e,t,i,s;const o=[pg,hg],r=[];function l(a,c){return a[2].export.status==1?0:a[2].export.status==-1&&a[2].message=="duplicate_name"?1:-1}return~(e=l(n))&&(t=r[e]=o[e](n)),{c(){t&&t.c(),i=pt()},m(a,c){~e&&r[e].m(a,c),M(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e!==u&&(t&&(qe(),H(r[u],1,1,()=>{r[u]=null}),We()),~e?(t=r[e],t||(t=r[e]=o[e](a),t.c()),L(t,1),t.m(i.parentNode,i)):t=null)},i(a){s||(L(t),s=!0)},o(a){H(t),s=!1},d(a){a&&P(i),~e&&r[e].d(a)}}}function ug(n){let e,t,i=n[2].export.status?"exporting":n[2].save.status?"saving":n[2].load.status?"loading":"deleting",s,o,r,l,a,c,u,d;return{c(){e=g("span"),t=te("A problem occurred while "),s=te(i),o=te(` your build.\r
            `),r=g("br"),l=te(`\r
            If needed`),a=g("b"),a.textContent=",",c=te(" you may contact "),u=g("hl"),u.textContent="xt.ss",d=te(` on Discord for more\r
            details.`)},m(f,h){M(f,e,h),p(e,t),p(e,s),p(e,o),p(e,r),p(e,l),p(e,a),p(e,c),p(e,u),p(e,d)},p(f,h){h&4&&i!==(i=f[2].export.status?"exporting":f[2].save.status?"saving":f[2].load.status?"loading":"deleting")&&Ee(s,i)},i:re,o:re,d(f){f&&P(e)}}}function dg(n){let e;return{c(){e=g("span"),e.textContent="The ID you have entered is invalid. Please check it again."},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function fg(n){let e;return{c(){e=g("span"),e.innerHTML=`Your build could not be found within the database.
                <br/>
                If needed<b>,</b> you may contact <hl>xt.ss</hl> on Discord for more
                details.`},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function hg(n){let e;return{c(){e=g("span"),e.innerHTML=`Another build of yours with the same name already exists.
                <br/>
                Please use a different one.`},m(t,i){M(t,e,i)},i:re,o:re,d(t){t&&P(e)}}}function pg(n){let e,t,i,s;return i=new yi({props:{type:"id",source:"export"}}),{c(){e=g("span"),e.textContent="Your build's link has been copied to your clipboard.",t=C(),se(i.$$.fragment)},m(o,r){M(o,e,r),M(o,t,r),ne(i,o,r),s=!0},i(o){s||(L(i.$$.fragment,o),s=!0)},o(o){H(i.$$.fragment,o),s=!1},d(o){o&&(P(e),P(t)),ie(i,o)}}}function _g(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y;const E=[ug,cg,ag,lg,rg,og],w=[];function I(T,j){return T[1]==-1&&T[2].message=="firebase_fail"?0:T[2].export.status?1:T[2].save.status==1?2:T[2].load.status==-1?3:T[2].delete.status==1?4:T[2].share.ongoing?5:-1}return~(o=I(n))&&(r=w[o]=E[o](n)),{c(){e=g("div"),t=g("span"),i=te(n[4]),s=C(),r&&r.c(),l=C(),a=g("div"),c=g("div"),u=g("button"),d=te("OK"),m(t,"id","messageTitle"),m(t,"class","svelte-8i8nbx"),m(u,"id",f=(n[1]==-1?"firstFocusable ":"")+"lastFocusable"),m(a,"class","promptOptions svelte-8i8nbx"),m(e,"class","promptMessage svelte-8i8nbx")},m(T,j){M(T,e,j),p(e,t),p(t,i),p(e,s),~o&&w[o].m(e,null),p(e,l),p(e,a),p(a,c),p(c,u),p(u,d),n[6](u),b=!0,v||(y=[N(u,"click",n[7]),N(u,"keydown",n[8]),N(e,"introstart",n[9])],v=!0)},p(T,[j]){(!b||j&16)&&Ee(i,T[4]);let O=o;o=I(T),o===O?~o&&w[o].p(T,j):(r&&(qe(),H(w[O],1,1,()=>{w[O]=null}),We()),~o?(r=w[o],r?r.p(T,j):(r=w[o]=E[o](T),r.c()),L(r,1),r.m(e,l)):r=null),(!b||j&2&&f!==(f=(T[1]==-1?"firstFocusable ":"")+"lastFocusable"))&&m(u,"id",f)},i(T){b||(L(r),T&&we(()=>{b&&(_&&_.end(1),h=ga(e,Je,{duration:200,delay:75}),h.start())}),b=!0)},o(T){H(r),h&&h.invalidate(),T&&(_=ba(e,Je,{duration:200})),b=!1},d(T){T&&P(e),~o&&w[o].d(),n[6](null),T&&_&&_.end(),v=!1,be(y)}}}function mg(n,e,t){let i,s,o;Q(n,Z,h=>t(2,o=h));let{loadID:r}=e;const l=Gt();let a;function c(h){le[h?"unshift":"push"](()=>{a=h,t(3,a)})}const u=()=>{t(0,r=null),l("resetActions")},d=h=>{s==-1&&yt(h),wt(h)},f=()=>a.focus();return n.$$set=h=>{"loadID"in h&&t(0,r=h.loadID)},n.$$.update=()=>{n.$$.dirty&4&&t(1,s=o.export.status||o.save.status||o.load.status||o.delete.status),n.$$.dirty&6&&t(4,i=o.share.ongoing?"Share this build":`${o.export.status?"Export":o.save.status?"Save":o.load.status?"Load":"Delete"} ${s==1?"Success":"Failure"}!`)},[r,s,o,a,i,l,c,u,d,f]}class gg extends Ne{constructor(e){super(),Te(this,e,mg,_g,ge,{loadID:0})}}function bg(n){let e,t,i,s,o,r;return{c(){e=g("li"),t=g("button"),i=g("span"),s=te(n[0]),m(i,"class","svelte-1hzohsl"),m(e,"class","svelte-1hzohsl"),oe(e,"selectedItem",n[2])},m(l,a){M(l,e,a),p(e,t),p(t,i),p(i,s),n[7](e),o||(r=N(t,"click",n[3]),o=!0)},p(l,[a]){a&1&&Ee(s,l[0]),a&4&&oe(e,"selectedItem",l[2])},i:re,o:re,d(l){l&&P(e),n[7](null),o=!1,r()}}}function vg(n,e,t){let{chosenBuild:i,buildData:s,buildName:o,ddOpen:r}=e;const l=Gt();let a,c=i[0]==o;function u(){if(r){if(a.classList.contains("selectedItem")||t(2,c=!1),c)return;l("buildSelect",a),t(2,c=!0),t(5,r=!1),t(4,i=[o,s])}}function d(f){le[f?"unshift":"push"](()=>{a=f,t(1,a)})}return n.$$set=f=>{"chosenBuild"in f&&t(4,i=f.chosenBuild),"buildData"in f&&t(6,s=f.buildData),"buildName"in f&&t(0,o=f.buildName),"ddOpen"in f&&t(5,r=f.ddOpen)},[o,a,c,u,i,r,s,d]}class yg extends Ne{constructor(e){super(),Te(this,e,vg,bg,ge,{chosenBuild:4,buildData:6,buildName:0,ddOpen:5})}}function El(n,e,t){const i=n.slice();return i[25]=e[t][0],i[26]=e[t][1],i}function Sl(n){let e,t,i,s;function o(a){n[13](a)}function r(a){n[14](a)}let l={buildData:n[26],buildName:n[25]};return n[0]!==void 0&&(l.chosenBuild=n[0]),n[1]!==void 0&&(l.ddOpen=n[1]),e=new yg({props:l}),le.push(()=>Pe(e,"chosenBuild",o)),le.push(()=>Pe(e,"ddOpen",r)),e.$on("buildSelect",n[11]),{c(){se(e.$$.fragment)},m(a,c){ne(e,a,c),s=!0},p(a,c){const u={};c&16&&(u.buildData=a[26]),c&16&&(u.buildName=a[25]),!t&&c&1&&(t=!0,u.chosenBuild=a[0],Ae(()=>t=!1)),!i&&c&2&&(i=!0,u.ddOpen=a[1],Ae(()=>i=!1)),e.$set(u)},i(a){s||(L(e.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),s=!1},d(a){ie(e,a)}}}function wg(n){let e,t,i,s,o,r,l,a=Ie(Object.entries(n[4])),c=[];for(let d=0;d<a.length;d+=1)c[d]=Sl(El(n,a,d));const u=d=>H(c[d],1,1,()=>{c[d]=null});return{c(){e=g("div"),t=g("input"),i=C(),s=g("ul");for(let d=0;d<c.length;d+=1)c[d].c();m(t,"type","text"),m(t,"class","searchBarInput svelte-nka60b"),m(t,"placeholder","Search..."),m(s,"class","svelte-nka60b"),oe(s,"no-scrollbar",n[8].length<=4),m(e,"class","dropdown svelte-nka60b"),oe(e,"ddOpen",n[1])},m(d,f){M(d,e,f),p(e,t),n[12](t),p(e,i),p(e,s);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(s,null);n[15](s),n[16](e),o=!0,r||(l=[N(t,"input",n[10]),N(t,"keydown",n[9]),N(e,"transitionend",n[17]),N(e,"transitioncancel",n[18])],r=!0)},p(d,[f]){if(f&2067){a=Ie(Object.entries(d[4]));let h;for(h=0;h<a.length;h+=1){const _=El(d,a,h);c[h]?(c[h].p(_,f),L(c[h],1)):(c[h]=Sl(_),c[h].c(),L(c[h],1),c[h].m(s,null))}for(qe(),h=a.length;h<c.length;h+=1)u(h);We()}(!o||f&256)&&oe(s,"no-scrollbar",d[8].length<=4),(!o||f&2)&&oe(e,"ddOpen",d[1])},i(d){if(!o){for(let f=0;f<a.length;f+=1)L(c[f]);o=!0}},o(d){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)H(c[f]);o=!1},d(d){d&&P(e),n[12](null),ht(c,d),n[15](null),n[16](null),r=!1,be(l)}}}function kg(n,e,t){let i;Q(n,Rt,S=>t(4,i=S));let{chosenBuild:s,ddOpen:o=!1,dropdown:r}=e;const l=Gt();let a,c,u,d,f={},h=!1,_=[];function b(S){!S.shiftKey&&S.key=="Tab"&&(S.preventDefault(),setTimeout(()=>a.focus()))}function v(){c&&c.removeEventListener("keydown",b),w(),c&&c.addEventListener("keydown",b)}function y(S){S.shiftKey&&S.key=="Tab"&&(S.preventDefault(),setTimeout(()=>(c.querySelector("button")||c).focus()))}function E(){uu(a.value,f),v()}function w(){c&&c.classList.remove("lastElement"),t(8,_=u.querySelectorAll("li:not(.hidden)")),c=_[_.length-1],c?c.classList.add("lastElement"):c=a}function I(S){l("buildSelect"),t(6,d=S.detail);let D=u.querySelector(".selectedItem");D&&D!=S.detail&&D.classList.remove("selectedItem"),t(7,h=!0)}function T(S){le[S?"unshift":"push"](()=>{a=S,t(5,a)})}function j(S){s=S,t(0,s)}function O(S){o=S,t(1,o)}function W(S){le[S?"unshift":"push"](()=>{u=S,t(3,u)})}function z(S){le[S?"unshift":"push"](()=>{r=S,t(2,r)})}const K=S=>{S.propertyName=="visibility"&&(h&&(t(7,h=!1),t(5,a.value="",a),E()),!o&&d&&u.scrollTo(0,d.offsetTop),es(a,o))},R=S=>{S.propertyName=="visibility"&&(t(7,h=!1),es(a,o))};return n.$$set=S=>{"chosenBuild"in S&&t(0,s=S.chosenBuild),"ddOpen"in S&&t(1,o=S.ddOpen),"dropdown"in S&&t(2,r=S.dropdown)},n.$$.update=()=>{if(n.$$.dirty&24&&u){t(8,_=u.querySelectorAll("li:not(.hidden)"));for(let S=0;S<u.childElementCount;S++)f[Object.keys(i)[S]]=u.children[S];w(),v()}},[s,o,r,u,i,a,d,h,_,y,E,I,T,j,O,W,z,K,R]}class Yo extends Ne{constructor(e){super(),Te(this,e,kg,wg,ge,{chosenBuild:0,ddOpen:1,dropdown:2})}}function Il(n){let e,t=(n[6]>n[5]*.8?n[11].slice(0,20)+"<b>...</b>":n[11])+"",i;return{c(){e=g("span"),we(()=>n[15].call(e))},m(s,o){M(s,e,o),e.innerHTML=t,i=rn(e,n[15].bind(e))},p(s,o){o[0]&2144&&t!==(t=(s[6]>s[5]*.8?s[11].slice(0,20)+"<b>...</b>":s[11])+"")&&(e.innerHTML=t)},d(s){s&&P(e),i()}}}function Tl(n){let e;return{c(){e=g("span"),e.textContent="New changes! Exiting will erase them.",m(e,"id","alert")},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function Cg(n){let e,t,i,s,o,r=n[11],l,a,c,u,d,f,h,_,b,v,y,E,w,I,T=275-n[2].length+"",j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce,ee,q,X,de,Be,Me=Il(n),Oe=n[1]!=null&&n[1]!=n[2]&&Tl();function nt(_e){n[26](_e)}function ze(_e){n[27](_e)}function De(_e){n[28](_e)}let je={};return n[0]!==void 0&&(je.chosenBuild=n[0]),n[3]!==void 0&&(je.ddOpen=n[3]),n[9]!==void 0&&(je.dropdown=n[9]),Y=new Yo({props:je}),le.push(()=>Pe(Y,"chosenBuild",nt)),le.push(()=>Pe(Y,"ddOpen",ze)),le.push(()=>Pe(Y,"dropdown",De)),Y.$on("buildSelect",n[29]),{c(){e=g("div"),t=g("div"),i=g("span"),i.textContent="Save to:",s=C(),o=g("button"),Me.c(),l=C(),a=g("iconify-icon"),d=C(),f=g("div"),h=g("div"),_=g("span"),_.textContent="Description / Notes:",b=C(),Oe&&Oe.c(),v=C(),y=g("textarea"),w=C(),I=g("span"),j=te(T),O=C(),W=g("div"),z=g("div"),K=g("button"),R=te("CANCEL"),D=C(),J=g("div"),A=g("button"),F=te("SAVE"),U=C(),se(Y.$$.fragment),Re(a,"icon","iconamoon:arrow-down-2-fill"),m(o,"id","firstFocusable"),o.disabled=c=n[12].save.status==0,m(o,"class","promptDDButton svelte-106wt5q"),we(()=>n[17].call(o)),oe(o,"ddOpen",n[3]),m(t,"class","chosenBuildCont"),m(y,"class","buildDescInput"),y.disabled=E=n[12].save.status==0,m(y,"placeholder","[Empty]"),m(y,"maxlength","275"),m(y,"autocomplete","off"),m(I,"class","charCounter"),m(I,"id","buildDesc"),m(f,"class","buildDescCont"),K.disabled=S=n[12].save.status==0,m(A,"id","lastFocusable"),A.disabled=B=n[12].save.status==0,m(W,"class","promptOptions"),m(e,"class","buildSaver")},m(_e,ae){M(_e,e,ae),p(e,t),p(t,i),p(t,s),p(t,o),Me.m(o,null),p(o,l),p(o,a),n[16](o),u=rn(o,n[17].bind(o)),p(e,d),p(e,f),p(f,h),p(h,_),p(h,b),Oe&&Oe.m(h,null),p(f,v),p(f,y),n[19](y),zt(y,n[10]),p(f,w),p(f,I),p(I,j),p(e,O),p(e,W),p(W,z),p(z,K),p(K,R),n[23](K),p(W,D),p(W,J),p(J,A),p(A,F),p(e,U),ne(Y,e,null),X=!0,de||(Be=[N(window,"mousedown",n[14]),N(o,"click",n[18]),N(o,"keydown",yt),N(y,"input",n[20]),N(y,"input",n[21]),N(y,"keydown",n[22]),N(K,"click",n[24]),N(A,"click",n[25]),N(A,"keydown",wt),N(e,"introstart",n[30]),N(e,"keydown",n[31])],de=!0)},p(_e,ae){ae[0]&2048&&ge(r,r=_e[11])?(Me.d(1),Me=Il(_e),Me.c(),Me.m(o,l)):Me.p(_e,ae),(!X||ae[0]&4096&&c!==(c=_e[12].save.status==0))&&(o.disabled=c),(!X||ae[0]&8)&&oe(o,"ddOpen",_e[3]),_e[1]!=null&&_e[1]!=_e[2]?Oe||(Oe=Tl(),Oe.c(),Oe.m(h,null)):Oe&&(Oe.d(1),Oe=null),(!X||ae[0]&4096&&E!==(E=_e[12].save.status==0))&&(y.disabled=E),ae[0]&1024&&zt(y,_e[10]),(!X||ae[0]&4)&&T!==(T=275-_e[2].length+"")&&Ee(j,T),(!X||ae[0]&4096&&S!==(S=_e[12].save.status==0))&&(K.disabled=S),(!X||ae[0]&4096&&B!==(B=_e[12].save.status==0))&&(A.disabled=B);const gt={};!ue&&ae[0]&1&&(ue=!0,gt.chosenBuild=_e[0],Ae(()=>ue=!1)),!ce&&ae[0]&8&&(ce=!0,gt.ddOpen=_e[3],Ae(()=>ce=!1)),!ee&&ae[0]&512&&(ee=!0,gt.dropdown=_e[9],Ae(()=>ee=!1)),Y.$set(gt)},i(_e){X||(L(Y.$$.fragment,_e),_e&&we(()=>{X&&(q||(q=me(e,Je,{duration:250},!0)),q.run(1))}),X=!0)},o(_e){H(Y.$$.fragment,_e),_e&&(q||(q=me(e,Je,{duration:250},!1)),q.run(0)),X=!1},d(_e){_e&&P(e),Me.d(_e),n[16](null),u(),Oe&&Oe.d(),n[19](null),n[23](null),ie(Y),_e&&q&&q.end(),de=!1,be(Be)}}}function Eg(n,e,t){let i,s,o,r,l,a,c,u;Q(n,Z,q=>t(12,r=q)),Q(n,kt,q=>t(32,l=q)),Q(n,Rt,q=>t(33,a=q)),Q(n,jt,q=>t(34,c=q)),Q(n,qt,q=>t(35,u=q));let d=!1,f,h,_,b,v,y,E=Object.entries(a)[0],w=null;function I(){G(Z,r.save.status=0,r);let q=du(u,c),X=w==null?s:w==""?"[Empty]":w,de=E[1].id;q.name=i,q.desc=X,_s(Xt(jn(Gn),`builds/${de}`),q).then(()=>{G(Z,r.save.status=1,r);let Be={...a};Be[i].desc=X,Vo(),Rt.update(()=>Be),G(kt,l=q,l),G(kt,l.id=de,l)}).catch(()=>{G(Z,r.save.status=-1,r),G(Z,r.message="firebase_fail",r)})}const T=q=>{!f.contains(q.target)&&!y.contains(q.target)&&t(3,d=!1)};function j(){_=this.offsetWidth,t(6,_)}function O(q){le[q?"unshift":"push"](()=>{f=q,t(4,f)})}function W(){h=this.offsetWidth,t(5,h)}const z=()=>{r.save.status!=0&&t(3,d=!d)};function K(q){le[q?"unshift":"push"](()=>{b=q,t(7,b)})}function R(){o=this.value,t(10,o),t(1,w),t(2,s),t(0,E)}const S=q=>{t(1,w=ts(q.target.value,275))},D=q=>{r.save.status==0&&q.preventDefault(),to(b,q.target.value,275)};function J(q){le[q?"unshift":"push"](()=>{v=q,t(8,v)})}const A=()=>{r.save.status!=0&&G(Z,r.save.ongoing=!1,r)},F=()=>{r.save.status!=0&&I()};function B(q){E=q,t(0,E)}function U(q){d=q,t(3,d)}function Y(q){y=q,t(9,y)}const ue=()=>t(1,w=null),ce=()=>v.focus(),ee=q=>{q.key=="Escape"&&(t(3,d=!1),f.focus())};return n.$$.update=()=>{n.$$.dirty[0]&1&&t(11,i=E[0]),n.$$.dirty[0]&1&&t(2,s=E[1].desc),n.$$.dirty[0]&6&&t(10,o=w??s)},[E,w,s,d,f,h,_,b,v,y,o,i,r,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce,ee]}class Sg extends Ne{constructor(e){super(),Te(this,e,Eg,Cg,ge,{},null,[-1,-1])}}function Ig(n){let e,t,i,s,o,r,l,a,c;return{c(){e=g("div"),t=g("span"),t.textContent="ID:",i=C(),s=g("input"),m(s,"class","buildIDInput svelte-1ort6ez"),s.disabled=o=n[11].load.status==0,m(s,"type","text"),m(s,"placeholder","Example ID: -NDqeA1Scn0EAJcYWN3b"),m(s,"maxlength","25"),m(e,"class","buildIDCont svelte-1ort6ez")},m(u,d){M(u,e,d),p(e,t),p(e,i),p(e,s),n[23](s),zt(s,n[10]),l=!0,a||(c=[N(s,"input",n[24]),N(s,"input",n[25]),N(s,"keydown",n[26])],a=!0)},p(u,d){(!l||d[0]&2048&&o!==(o=u[11].load.status==0))&&(s.disabled=o),d[0]&1024&&s.value!==u[10]&&zt(s,u[10])},i(u){l||(u&&we(()=>{l&&(r||(r=me(e,Xe,{duration:150},!0)),r.run(1))}),l=!0)},o(u){u&&(r||(r=me(e,Xe,{duration:150},!1)),r.run(0)),l=!1},d(u){u&&P(e),n[23](null),u&&r&&r.end(),a=!1,be(c)}}}function Tg(n){let e,t,i,s,o=n[9],r,l,a,c,u,d,f,h,_=Nl(n);return{c(){e=g("div"),t=g("span"),t.textContent="Load:",i=C(),s=g("button"),_.c(),r=C(),l=g("iconify-icon"),Re(l,"icon","iconamoon:arrow-down-2-fill"),s.disabled=a=n[11].load.status==0,m(s,"class","promptDDButton svelte-1ort6ez"),we(()=>n[21].call(s)),oe(s,"ddOpen",n[8]),m(e,"class","chosenBuildCont svelte-1ort6ez")},m(b,v){M(b,e,v),p(e,t),p(e,i),p(e,s),_.m(s,null),p(s,r),p(s,l),n[20](s),c=rn(s,n[21].bind(s)),d=!0,f||(h=N(s,"click",n[22]),f=!0)},p(b,v){v[0]&512&&ge(o,o=b[9])?(_.d(1),_=Nl(b),_.c(),_.m(s,r)):_.p(b,v),(!d||v[0]&2048&&a!==(a=b[11].load.status==0))&&(s.disabled=a),(!d||v[0]&256)&&oe(s,"ddOpen",b[8])},i(b){d||(b&&we(()=>{d&&(u||(u=me(e,Xe,{duration:150},!0)),u.run(1))}),d=!0)},o(b){b&&(u||(u=me(e,Xe,{duration:150},!1)),u.run(0)),d=!1},d(b){b&&P(e),_.d(b),n[20](null),c(),b&&u&&u.end(),f=!1,h()}}}function Nl(n){let e,t=(n[6]>n[5]*.7?n[9].slice(0,20)+"<b>...</b>":n[9])+"",i;return{c(){e=g("span"),we(()=>n[19].call(e))},m(s,o){M(s,e,o),e.innerHTML=t,i=rn(e,n[19].bind(e))},p(s,o){o[0]&608&&t!==(t=(s[6]>s[5]*.7?s[9].slice(0,20)+"<b>...</b>":s[9])+"")&&(e.innerHTML=t)},d(s){s&&P(e),i()}}}function Ol(n){let e,t,i,s,o;function r(u){n[29](u)}function l(u){n[30](u)}function a(u){n[31](u)}let c={};return n[3]!==void 0&&(c.chosenBuild=n[3]),n[8]!==void 0&&(c.ddOpen=n[8]),n[7]!==void 0&&(c.dropdown=n[7]),e=new Yo({props:c}),le.push(()=>Pe(e,"chosenBuild",r)),le.push(()=>Pe(e,"ddOpen",l)),le.push(()=>Pe(e,"dropdown",a)),{c(){se(e.$$.fragment)},m(u,d){ne(e,u,d),o=!0},p(u,d){const f={};!t&&d[0]&8&&(t=!0,f.chosenBuild=u[3],Ae(()=>t=!1)),!i&&d[0]&256&&(i=!0,f.ddOpen=u[8],Ae(()=>i=!1)),!s&&d[0]&128&&(s=!0,f.dropdown=u[7],Ae(()=>s=!1)),e.$set(f)},i(u){o||(L(e.$$.fragment,u),o=!0)},o(u){H(e.$$.fragment,u),o=!1},d(u){ie(e,u)}}}function Ng(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y;const ue=[Tg,Ig],ce=[];function ee(X,de){return X[2]?0:1}E=ee(n),w=ce[E]=ue[E](n);let q=n[2]&&Ol(n);return{c(){e=g("div"),t=g("span"),t.textContent="Load build via:",i=C(),s=g("div"),o=g("div"),r=g("button"),l=te("Local saves"),u=C(),d=g("div"),f=g("button"),h=te("Exported ID"),v=C(),y=g("div"),w.c(),I=C(),T=g("div"),j=g("div"),O=g("button"),W=te("CANCEL"),K=C(),R=g("div"),S=g("button"),D=te("LOAD"),A=C(),q&&q.c(),m(t,"class","svelte-1ort6ez"),m(r,"id",a=n[2]?"firstFocusable":""),r.disabled=c=n[11].load.status==0||!n[12],m(r,"class","svelte-1ort6ez"),oe(r,"chosen",n[2]),oe(r,"unavailable",!n[12]),m(o,"class","svelte-1ort6ez"),m(f,"id",_=n[2]?"":"firstFocusable"),f.disabled=b=n[11].load.status==0,m(f,"class","svelte-1ort6ez"),oe(f,"chosen",!n[2]),m(d,"class","svelte-1ort6ez"),m(s,"class","loadMethodRadio svelte-1ort6ez"),m(y,"class","loadMethodCont svelte-1ort6ez"),O.disabled=z=n[11].load.status==0,m(S,"id","lastFocusable"),S.disabled=J=n[11].load.status==0,m(T,"class","promptOptions svelte-1ort6ez"),m(e,"class","buildLoader svelte-1ort6ez")},m(X,de){M(X,e,de),p(e,t),p(e,i),p(e,s),p(s,o),p(o,r),p(r,l),p(s,u),p(s,d),p(d,f),p(f,h),p(e,v),p(e,y),ce[E].m(y,null),p(e,I),p(e,T),p(T,j),p(j,O),p(O,W),n[27](O),p(T,K),p(T,R),p(R,S),p(S,D),p(e,A),q&&q.m(e,null),B=!0,U||(Y=[N(window,"mousedown",n[14]),N(r,"click",n[15]),N(r,"keydown",n[16]),N(f,"click",n[17]),N(f,"keydown",n[18]),N(O,"click",n[28]),N(S,"keydown",wt),N(S,"click",n[13]),N(e,"introstart",n[32]),N(e,"keydown",n[33])],U=!0)},p(X,de){(!B||de[0]&4&&a!==(a=X[2]?"firstFocusable":""))&&m(r,"id",a),(!B||de[0]&6144&&c!==(c=X[11].load.status==0||!X[12]))&&(r.disabled=c),(!B||de[0]&4)&&oe(r,"chosen",X[2]),(!B||de[0]&4096)&&oe(r,"unavailable",!X[12]),(!B||de[0]&4&&_!==(_=X[2]?"":"firstFocusable"))&&m(f,"id",_),(!B||de[0]&2048&&b!==(b=X[11].load.status==0))&&(f.disabled=b),(!B||de[0]&4)&&oe(f,"chosen",!X[2]);let Be=E;E=ee(X),E===Be?ce[E].p(X,de):(qe(),H(ce[Be],1,1,()=>{ce[Be]=null}),We(),w=ce[E],w?w.p(X,de):(w=ce[E]=ue[E](X),w.c()),L(w,1),w.m(y,null)),(!B||de[0]&2048&&z!==(z=X[11].load.status==0))&&(O.disabled=z),(!B||de[0]&2048&&J!==(J=X[11].load.status==0))&&(S.disabled=J),X[2]?q?(q.p(X,de),de[0]&4&&L(q,1)):(q=Ol(X),q.c(),L(q,1),q.m(e,null)):q&&(qe(),H(q,1,1,()=>{q=null}),We())},i(X){B||(L(w),L(q),X&&we(()=>{B&&(F||(F=me(e,Je,{duration:250},!0)),F.run(1))}),B=!0)},o(X){H(w),H(q),X&&(F||(F=me(e,Je,{duration:250},!1)),F.run(0)),B=!1},d(X){X&&P(e),ce[E].d(),n[27](null),q&&q.d(),X&&F&&F.end(),U=!1,be(Y)}}}function Og(n,e,t){let i,s,o;Q(n,Z,q=>t(11,i=q)),Q(n,Rt,q=>t(34,s=q)),Q(n,xt,q=>t(12,o=q));const r=Gt();let l,a,c,u,d,f,h=o,_=!1,b=o?Object.entries(s)[0]:null,v,y="";function E(){if(!h&&!y.startsWith("-N")){G(Z,i.load.status=-1,i),G(Z,i.message="invalid_id",i);return}let q=iu(jn(Gn,"builds"),nu()),X=0;G(Z,i.load.status=0,i),tu(q).then(de=>{let Be=h?b[1].id:y;for(let Me in de.val()){if(Me==Be){r("buildLoad",{build:de.val()[Me],id:Me});break}else X==Object.keys(de.val()).length-1&&(G(Z,i.load.status=-1,i),G(Z,i.message=h?"not_found":"invalid_id",i));X++}}).catch(()=>{G(Z,i.load.status=-1,i),G(Z,i.message="firebase_fail",i)})}const w=q=>{l&&!l.contains(q.target)&&!f.contains(q.target)&&t(8,_=!1)},I=()=>{i.load.status!=0&&o&&t(2,h=!0)},T=q=>{h&&yt(q)},j=()=>{i.load.status!=0&&t(2,h=!1)},O=q=>{h||yt(q)};function W(){d=this.offsetWidth,t(6,d)}function z(q){le[q?"unshift":"push"](()=>{l=q,t(0,l)})}function K(){u=this.offsetWidth,t(5,u)}const R=()=>{i.load.status!=0&&t(8,_=!_)};function S(q){le[q?"unshift":"push"](()=>{c=q,t(1,c)})}function D(){y=this.value,t(10,y)}const J=q=>{t(10,y=ts(q.target.value,25))},A=q=>{i.load.status==0&&q.preventDefault()};function F(q){le[q?"unshift":"push"](()=>{a=q,t(4,a)})}const B=()=>{i.load.status!=0&&G(Z,i.load.ongoing=!1,i)};function U(q){b=q,t(3,b)}function Y(q){_=q,t(8,_)}function ue(q){f=q,t(7,f)}const ce=()=>a.focus(),ee=q=>{q.key=="Escape"&&(t(8,_=!1),l.focus())};return n.$$.update=()=>{n.$$.dirty[0]&8&&t(9,v=b!=null?b[0]:null),n.$$.dirty[0]&7&&setTimeout(h?()=>l.focus():()=>c.focus())},[l,c,h,b,a,u,d,f,_,v,y,i,o,E,w,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce,ee]}class Dg extends Ne{constructor(e){super(),Te(this,e,Og,Ng,ge,{},null,[-1,-1])}}function Dl(n){let e,t=(n[3]>n[4]*.8?n[8].slice(0,20)+"<b>...</b>":n[8])+"",i;return{c(){e=g("span"),we(()=>n[12].call(e))},m(s,o){M(s,e,o),e.innerHTML=t,i=rn(e,n[12].bind(e))},p(s,o){o&280&&t!==(t=(s[3]>s[4]*.8?s[8].slice(0,20)+"<b>...</b>":s[8])+"")&&(e.innerHTML=t)},d(s){s&&P(e),i()}}}function Rg(n){let e,t,i,s,o,r=n[8],l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y=Dl(n);f=new mt({props:{text:"I'm aware that this action is irreversible and want to erase this build from the database."}}),f.$on("toggle",n[16]);function ue(X){n[21](X)}function ce(X){n[22](X)}function ee(X){n[23](X)}let q={};return n[0]!==void 0&&(q.chosenBuild=n[0]),n[6]!==void 0&&(q.ddOpen=n[6]),n[5]!==void 0&&(q.dropdown=n[5]),R=new Yo({props:q}),le.push(()=>Pe(R,"chosenBuild",ue)),le.push(()=>Pe(R,"ddOpen",ce)),le.push(()=>Pe(R,"dropdown",ee)),{c(){e=g("div"),t=g("div"),i=g("span"),i.textContent="Delete:",s=C(),o=g("button"),Y.c(),l=C(),a=g("iconify-icon"),d=C(),se(f.$$.fragment),h=C(),_=g("div"),b=g("div"),v=g("button"),y=te("CANCEL"),I=C(),T=g("div"),j=g("button"),O=te("DELETE"),K=C(),se(R.$$.fragment),Re(a,"icon","iconamoon:arrow-down-2-fill"),m(o,"class","promptDDButton svelte-1nywh"),m(o,"id","firstFocusable"),o.disabled=c=n[9].delete.status==0,we(()=>n[14].call(o)),oe(o,"ddOpen",n[6]),m(t,"class","chosenBuildCont"),m(v,"id",E=n[7]?"":"lastFocusable"),v.disabled=w=n[9].delete.status==0,j.disabled=W=!n[7]||n[9].delete.status==0,m(j,"id",z=n[7]?"lastFocusable":""),oe(j,"unavailable",!n[7]),m(_,"class","promptOptions svelte-1nywh"),m(e,"class","buildDeleter svelte-1nywh")},m(X,de){M(X,e,de),p(e,t),p(t,i),p(t,s),p(t,o),Y.m(o,null),p(o,l),p(o,a),n[13](o),u=rn(o,n[14].bind(o)),p(e,d),ne(f,e,null),p(e,h),p(e,_),p(_,b),p(b,v),p(v,y),n[17](v),p(_,I),p(_,T),p(T,j),p(j,O),p(e,K),ne(R,e,null),F=!0,B||(U=[N(window,"mousedown",n[11]),N(o,"click",n[15]),N(o,"keydown",yt),N(v,"click",n[18]),N(v,"keydown",n[19]),N(j,"click",n[20]),N(j,"keydown",wt),N(e,"introstart",n[24]),N(e,"keydown",n[25])],B=!0)},p(X,[de]){de&256&&ge(r,r=X[8])?(Y.d(1),Y=Dl(X),Y.c(),Y.m(o,l)):Y.p(X,de),(!F||de&512&&c!==(c=X[9].delete.status==0))&&(o.disabled=c),(!F||de&64)&&oe(o,"ddOpen",X[6]),(!F||de&128&&E!==(E=X[7]?"":"lastFocusable"))&&m(v,"id",E),(!F||de&512&&w!==(w=X[9].delete.status==0))&&(v.disabled=w),(!F||de&640&&W!==(W=!X[7]||X[9].delete.status==0))&&(j.disabled=W),(!F||de&128&&z!==(z=X[7]?"lastFocusable":""))&&m(j,"id",z),(!F||de&128)&&oe(j,"unavailable",!X[7]);const Be={};!S&&de&1&&(S=!0,Be.chosenBuild=X[0],Ae(()=>S=!1)),!D&&de&64&&(D=!0,Be.ddOpen=X[6],Ae(()=>D=!1)),!J&&de&32&&(J=!0,Be.dropdown=X[5],Ae(()=>J=!1)),R.$set(Be)},i(X){F||(L(f.$$.fragment,X),L(R.$$.fragment,X),X&&we(()=>{F&&(A||(A=me(e,Je,{duration:250},!0)),A.run(1))}),F=!0)},o(X){H(f.$$.fragment,X),H(R.$$.fragment,X),X&&(A||(A=me(e,Je,{duration:250},!1)),A.run(0)),F=!1},d(X){X&&P(e),Y.d(X),n[13](null),u(),ie(f),n[17](null),ie(R),X&&A&&A.end(),B=!1,be(U)}}}function Ag(n,e,t){let i,s,o,r;Q(n,Z,A=>t(9,s=A)),Q(n,Rt,A=>t(26,o=A)),Q(n,kt,A=>t(27,r=A));let l,a,c,u,d,f=!1,h=Object.entries(o)[0],_=!1;function b(){G(Z,s.delete.status=0,s);let A=h[1].id;g_(Xt(jn(Gn),`builds/${A}`)).then(()=>{G(Z,s.delete.status=1,s),r&&A==r.id&&G(kt,r=null,r);let F={...o};delete F[i],Vo(),Rt.update(()=>F)}).catch(F=>{G(Z,s.delete.status=-1,s),G(Z,s.message="firebase_fail",s)})}const v=A=>{!a.contains(A.target)&&!d.contains(A.target)&&t(6,f=!1)};function y(){c=this.offsetWidth,t(3,c)}function E(A){le[A?"unshift":"push"](()=>{a=A,t(2,a)})}function w(){u=this.offsetWidth,t(4,u)}const I=()=>{s.delete.status!=0&&t(6,f=!f)},T=A=>t(7,_=A.detail);function j(A){le[A?"unshift":"push"](()=>{l=A,t(1,l)})}const O=()=>{s.delete.status!=0&&G(Z,s.delete.ongoing=!1,s)},W=A=>{_||wt(A)},z=()=>{_&&s.delete.status!=0&&b()};function K(A){h=A,t(0,h)}function R(A){f=A,t(6,f)}function S(A){d=A,t(5,d)}const D=()=>l.focus(),J=A=>{A.key=="Escape"&&(t(6,f=!1),a.focus())};return n.$$.update=()=>{n.$$.dirty&1&&t(8,i=h[0])},[h,l,a,c,u,d,f,_,i,s,b,v,y,E,w,I,T,j,O,W,z,K,R,S,D,J]}class Pg extends Ne{constructor(e){super(),Te(this,e,Ag,Rg,ge,{})}}function Mg(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_;return{c(){e=g("div"),t=g("div"),i=g("button"),i.innerHTML='<iconify-icon icon="tabler:coins" class="svelte-1o20s8w"></iconify-icon> <span class="tooltip" id="right">Build costs</span>',s=C(),o=g("div"),r=g("button"),r.innerHTML='<iconify-icon icon="codicon:sparkle-filled" class="svelte-1o20s8w"></iconify-icon> <span class="tooltip" id="right">Add bonuses</span>',l=C(),a=g("div"),c=g("button"),c.innerHTML='<iconify-icon icon="fa-solid:random" class="svelte-1o20s8w"></iconify-icon> <span class="tooltip" id="right">Randomize build</span>',u=C(),d=g("div"),f=g("button"),f.innerHTML='<iconify-icon icon="fe:picture" class="svelte-1o20s8w"></iconify-icon> <span class="tooltip" id="right">Screenshot mode</span>',m(i,"class","svelte-1o20s8w"),m(t,"class","svelte-1o20s8w"),m(r,"class","svelte-1o20s8w"),m(o,"class","svelte-1o20s8w"),m(c,"class","svelte-1o20s8w"),m(a,"id","randomize"),m(a,"class","svelte-1o20s8w"),m(f,"class","svelte-1o20s8w"),m(d,"id","screenshot"),m(d,"class","svelte-1o20s8w"),m(e,"class","sideFeatures svelte-1o20s8w")},m(b,v){M(b,e,v),p(e,t),p(t,i),p(e,s),p(e,o),p(o,r),p(e,l),p(e,a),p(a,c),p(e,u),p(e,d),p(d,f),h||(_=[N(i,"click",n[2]),N(r,"click",n[3]),N(c,"click",n[4]),N(f,"click",n[5])],h=!0)},p:re,i:re,o:re,d(b){b&&P(e),h=!1,be(_)}}}function Lg(n,e,t){let i,s;return Q(n,vn,c=>t(0,i=c)),Q(n,Z,c=>t(1,s=c)),[i,s,c=>{on(c),i||G(Z,s.costs.ongoing=!0,s)},c=>{on(c),i||G(Z,s.bonus.ongoing=!0,s)},c=>{on(c),i||G(Z,s.randomize.ongoing=!0,s)},()=>{i||(G(Z,s.screenshot.ongoing=!0,s),setTimeout(()=>G(Z,s.screenshot.ongoing=!1,s),3500))}]}class Fg extends Ne{constructor(e){super(),Te(this,e,Lg,Mg,ge,{})}}function Rl(n,e,t){const i=n.slice();i[11]=e[t];const s=i[1].bonuses[0].name==i[11].name;return i[12]=s,i}function Al(n){let e,t,i,s,o,r,l,a,c,u,d,f;function h(...b){return n[5](n[12],...b)}function _(...b){return n[6](n[11],...b)}return a=new mt({props:{text:n[11].name,checked:n[2][n[11].name]}}),a.$on("toggle",_),{c(){e=g("div"),t=g("a"),i=g("img"),l=C(),se(a.$$.fragment),c=C(),$e(i.src,s=n[11].image)||m(i,"src",s),m(i,"alt",""),m(i,"class","svelte-1i20pwb"),m(t,"id",o=n[12]?"firstFocusable":""),m(t,"href",r=n[11].link),m(t,"target","_blank"),m(t,"class","svelte-1i20pwb"),m(e,"class","svelte-1i20pwb")},m(b,v){M(b,e,v),p(e,t),p(t,i),p(e,l),ne(a,e,null),p(e,c),u=!0,d||(f=N(t,"keydown",h),d=!0)},p(b,v){n=b,(!u||v&2&&!$e(i.src,s=n[11].image))&&m(i,"src",s),(!u||v&2&&o!==(o=n[12]?"firstFocusable":""))&&m(t,"id",o),(!u||v&2&&r!==(r=n[11].link))&&m(t,"href",r);const y={};v&2&&(y.text=n[11].name),v&6&&(y.checked=n[2][n[11].name]),a.$set(y)},i(b){u||(L(a.$$.fragment,b),u=!0)},o(b){H(a.$$.fragment,b),u=!1},d(b){b&&P(e),ie(a),d=!1,f()}}}function Bg(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_=Ie(n[1].bonuses),b=[];for(let y=0;y<_.length;y+=1)b[y]=Al(Rl(n,_,y));const v=y=>H(b[y],1,1,()=>{b[y]=null});return{c(){e=g("div"),t=g("div");for(let y=0;y<b.length;y+=1)b[y].c();i=C(),s=g("div"),o=g("div"),r=g("button"),r.textContent="CLEAR",l=C(),a=g("div"),c=g("button"),c.textContent="OK",m(t,"class","bonusesCont svelte-1i20pwb"),m(c,"id","lastFocusable"),m(s,"class","promptOptions svelte-1i20pwb"),m(e,"class","bonusChooser svelte-1i20pwb")},m(y,E){M(y,e,E),p(e,t);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(t,null);p(e,i),p(e,s),p(s,o),p(o,r),p(s,l),p(s,a),p(a,c),n[8](c),d=!0,f||(h=[N(r,"click",n[7]),N(c,"click",n[9]),N(c,"keydown",wt),N(e,"introstart",n[10])],f=!0)},p(y,[E]){if(E&14){_=Ie(y[1].bonuses);let w;for(w=0;w<_.length;w+=1){const I=Rl(y,_,w);b[w]?(b[w].p(I,E),L(b[w],1)):(b[w]=Al(I),b[w].c(),L(b[w],1),b[w].m(t,null))}for(qe(),w=_.length;w<b.length;w+=1)v(w);We()}},i(y){if(!d){for(let E=0;E<_.length;E+=1)L(b[E]);y&&we(()=>{d&&(u||(u=me(e,Je,{duration:250},!0)),u.run(1))}),d=!0}},o(y){b=b.filter(Boolean);for(let E=0;E<b.length;E+=1)H(b[E]);y&&(u||(u=me(e,Je,{duration:250},!1)),u.run(0)),d=!1},d(y){y&&P(e),ht(b,y),n[8](null),y&&u&&u.end(),f=!1,be(h)}}}function qg(n,e,t){let i,s,o,r;Q(n,Bt,_=>t(1,i=_)),Q(n,Pn,_=>t(2,s=_)),Q(n,bt,_=>t(3,o=_)),Q(n,Z,_=>t(4,r=_));let l;const a=(_,b)=>{_&&yt(b)},c=(_,b)=>{G(Pn,s[_.name]=b.detail,s);for(let v in o)b.detail?G(bt,o[v]+=_.stats[v],o):G(bt,o[v]-=_.stats[v],o),G(bt,o[v]=Math.round(o[v]*10)/10,o)},u=()=>{for(let _ in s){if(!s[_])continue;let b=i.bonuses.find(v=>v.name==_);G(Pn,s[_]=!1,s);for(let v in o)G(bt,o[v]-=b.stats[v],o),G(bt,o[v]=Math.round(o[v]*10)/10,o)}};function d(_){le[_?"unshift":"push"](()=>{l=_,t(0,l)})}return[l,i,s,o,r,a,c,u,d,()=>G(Z,r.bonus.ongoing=!1,r),()=>l.focus()]}class Wg extends Ne{constructor(e){super(),Te(this,e,qg,Bg,ge,{})}}function zg(n){let e;return{c(){e=g("span"),e.textContent=`Includes equipment such as ore-based armor and their variants,\r
            ore-based weapons, and shoes with no special stats`,m(e,"slot","tooltip"),m(e,"class","tooltip svelte-21yikp"),m(e,"id","right")},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function Hg(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K;return s=new mt({props:{text:"Force Mushroom Parasol",checked:n[0].parasol,first:!0}}),s.$on("toggle",n[5]),r=new mt({props:{text:"Randomize armor",checked:n[0].armor}}),r.$on("toggle",n[6]),a=new mt({props:{text:"Randomize gear",checked:n[0].gear}}),a.$on("toggle",n[7]),u=new mt({props:{text:"Allow 'basic' equipment",checked:n[0].basic,$$slots:{tooltip:[zg]},$$scope:{ctx:n}}}),u.$on("toggle",n[8]),{c(){e=g("div"),t=g("span"),t.textContent="Randomize your build",i=C(),se(s.$$.fragment),o=C(),se(r.$$.fragment),l=C(),se(a.$$.fragment),c=C(),se(u.$$.fragment),d=C(),f=g("div"),h=g("div"),_=g("button"),b=te("CANCEL"),y=C(),E=g("div"),w=g("button"),I=te("ROLL THE DICE"),m(t,"class","svelte-21yikp"),m(_,"id",v=n[2]?"":"lastFocusable"),m(w,"id",T=n[2]?"lastFocusable":""),w.disabled=j=!n[2],m(f,"class","promptOptions"),m(e,"class","buildRandomizer svelte-21yikp")},m(R,S){M(R,e,S),p(e,t),p(e,i),ne(s,e,null),p(e,o),ne(r,e,null),p(e,l),ne(a,e,null),p(e,c),ne(u,e,null),p(e,d),p(e,f),p(f,h),p(h,_),p(_,b),n[9](_),p(f,y),p(f,E),p(E,w),p(w,I),W=!0,z||(K=[N(_,"click",n[10]),N(_,"keydown",n[11]),N(w,"click",n[12]),N(w,"keydown",n[13]),N(e,"introstart",n[14])],z=!0)},p(R,[S]){const D={};S&1&&(D.checked=R[0].parasol),s.$set(D);const J={};S&1&&(J.checked=R[0].armor),r.$set(J);const A={};S&1&&(A.checked=R[0].gear),a.$set(A);const F={};S&1&&(F.checked=R[0].basic),S&16777216&&(F.$$scope={dirty:S,ctx:R}),u.$set(F),(!W||S&4&&v!==(v=R[2]?"":"lastFocusable"))&&m(_,"id",v),(!W||S&4&&T!==(T=R[2]?"lastFocusable":""))&&m(w,"id",T),(!W||S&4&&j!==(j=!R[2]))&&(w.disabled=j)},i(R){W||(L(s.$$.fragment,R),L(r.$$.fragment,R),L(a.$$.fragment,R),L(u.$$.fragment,R),R&&we(()=>{W&&(O||(O=me(e,Je,{duration:250},!0)),O.run(1))}),W=!0)},o(R){H(s.$$.fragment,R),H(r.$$.fragment,R),H(a.$$.fragment,R),H(u.$$.fragment,R),R&&(O||(O=me(e,Je,{duration:250},!1)),O.run(0)),W=!1},d(R){R&&P(e),ie(s),ie(r),ie(a),ie(u),n[9](null),R&&O&&O.end(),z=!1,be(K)}}}function jg(n,e,t){let i,s,o,r,l,a,c,u;Q(n,xn,R=>t(0,s=R)),Q(n,Z,R=>t(3,o=R)),Q(n,Bt,R=>t(15,r=R)),Q(n,qn,R=>t(16,l=R)),Q(n,jt,R=>t(17,a=R)),Q(n,Bn,R=>t(18,c=R)),Q(n,qt,R=>t(19,u=R));let d,f=["Bronze","Iron","Cobalt","Titanium","Gold","Onyx"],h=["Hardened","Royal"],_=["Black","Brown","Green","Red","White","Dark","Golden","Grey","Phantom"];function b(){if(s.armor){for(let R of Un){let S=u[R]||vs;S.name&&c[R][S.name].querySelector("button").click()}setTimeout(()=>{for(let R of Un)(function S(){let D=Math.floor(Math.random()*r[R].length);!c[R][r[R][D].name].classList.contains("selectedItem")&&(s.basic||!s.basic&&!v(r[R][D].name))?c[R][r[R][D].name].querySelector("button").click():S()})()})}if(s.gear){for(let R in a){let S=a[R]||ys;S.name&&l[R][S.name].querySelector("button").click()}setTimeout(()=>{let R=!1,S=En.length,D=En.length,J=[];for(let A in a)J.push(a[A].name);(function A(){setTimeout(()=>{let F=Math.floor(Math.random()*S);(function B(){let U=Math.floor(Math.random()*r.gear.length);!J.includes(r.gear[U].name)&&!l[D][r.gear[U].name].classList.contains("switchable")&&(!R||R&&U!=0)&&(s.basic||!s.basic&&!v(r.gear[U].name))?(l[D][r.gear[!R&&s.parasol&&!F?0:U].name].querySelector("button").click(),!R&&!F?R=!0:R||S--):B()})(),--D&&A()},25)})()},50)}G(Z,o.randomize.ongoing=!1,o)}function v(R){let S=!1,D=R.split(" ");return S=f.includes(D[0])||h.includes(D[0])||R=="Mining Helmet"||_.includes(D[0]),S}const y=R=>G(xn,s.parasol=R.detail,s),E=R=>G(xn,s.armor=R.detail,s),w=R=>G(xn,s.gear=R.detail,s),I=R=>G(xn,s.basic=R.detail,s);function T(R){le[R?"unshift":"push"](()=>{d=R,t(1,d)})}const j=()=>G(Z,o.randomize.ongoing=!1,o),O=R=>{i||wt(R)},W=()=>{i&&b()},z=R=>{i&&wt(R)},K=()=>d.focus();return n.$$.update=()=>{n.$$.dirty&1&&t(2,i=s.armor||s.gear)},[s,d,i,o,b,y,E,w,I,T,j,O,W,z,K]}class Ug extends Ne{constructor(e){super(),Te(this,e,jg,Hg,ge,{})}}function Pl(n,e,t){const i=n.slice();return i[5]=e[t],i}function Gg(n){let e,t=Ie(n[1]),i=[];for(let s=0;s<t.length;s+=1)i[s]=Ml(Pl(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=pt()},m(s,o){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,o);M(s,e,o)},p(s,o){if(o&2){t=Ie(s[1]);let r;for(r=0;r<t.length;r+=1){const l=Pl(s,t,r);i[r]?i[r].p(l,o):(i[r]=Ml(l),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(s){s&&P(e),ht(i,s)}}}function Vg(n){let e,t,i;return{c(){e=g("span"),t=te(" "),i=te(n[1]),m(e,"id","info"),m(e,"class","svelte-155nax9")},m(s,o){M(s,e,o),p(e,t),p(e,i)},p(s,o){o&2&&Ee(i,s[1])},d(s){s&&P(e)}}}function Ml(n){let e,t,i=n[5]+"",s;return{c(){e=g("span"),t=te(" "),s=te(i),m(e,"id","info"),m(e,"class","svelte-155nax9")},m(o,r){M(o,e,r),p(e,t),p(e,s)},p(o,r){r&2&&i!==(i=o[5]+"")&&Ee(s,i)},d(o){o&&P(e)}}}function Kg(n){let e,t,i,s,o,r,l;function a(d,f){return typeof d[1]=="string"?Vg:Gg}let c=a(n),u=c(n);return{c(){e=g("li"),t=g("span"),i=te("v"),s=te(n[0]),o=C(),r=g("i"),r.textContent=`${n[3][n[2][1]-1]+" "+n[2][0]+(Math.floor(n[2][0]/10)===1?"th":au[n[2][0]%10])+", 20"+n[2][2]}`,l=C(),u.c(),m(t,"id","version"),m(t,"class","svelte-155nax9"),m(r,"id","date"),m(r,"class","svelte-155nax9"),m(e,"class","svelte-155nax9")},m(d,f){M(d,e,f),p(e,t),p(t,i),p(t,s),p(e,o),p(e,r),p(e,l),u.m(e,null)},p(d,[f]){f&1&&Ee(s,d[0]),c===(c=a(d))&&u?u.p(d,f):(u.d(1),u=c(d),u&&(u.c(),u.m(e,null)))},i:re,o:re,d(d){d&&P(e),u.d()}}}function Yg(n,e,t){let{version:i,date:s,text:o}=e,r=s.split("/"),l=["January","February","March","April","May","June","July","August","Semptember","October","November","December"];return n.$$set=a=>{"version"in a&&t(0,i=a.version),"date"in a&&t(4,s=a.date),"text"in a&&t(1,o=a.text)},[i,o,r,l,s]}class ot extends Ne{constructor(e){super(),Te(this,e,Yg,Kg,ge,{version:0,date:4,text:1})}}function Qg(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce,ee,q,X,de,Be,Me,Oe,nt,ze,De,je,_e;return o=new ot({props:{version:"3.26.7",date:"5/4/24",text:["Added special ability cooldown stat to gears","Fixed page size and zoom occasionally breaking"]}}),l=new ot({props:{version:"3.26.6",date:"28/3/24",text:"Added 'support me' link in the case of any kind act"}}),c=new ot({props:{version:"3.26.5",date:"22/3/24",text:"Added policy information"}}),d=new ot({props:{version:"3.26.4",date:"21/3/24",text:["Added feature to copy stats as text","Fixed detailed view prompt activating while scrolling"]}}),h=new ot({props:{version:"3.26.3",date:"24/2/24",text:"Reimplemented 'Strict' filter type in search options"}}),b=new ot({props:{version:"3.26.2",date:"22/2/24",text:"Fixed build randomizer not working properly"}}),y=new ot({props:{version:"3.26.1",date:"22/2/24",text:"Holding Shift and interacting with a dropdown item or simply holding down on it activates detailed view prompt"}}),w=new ot({props:{version:"3.26.0",date:"21/2/24",text:"Added detailed view prompt to armor and gear whenever the selected item's icon is clicked"}}),T=new ot({props:{version:"3.25.9",date:"14/1/24",text:"Added build costs visibility while 'screenshot mode' is active"}}),O=new ot({props:{version:"3.25.8",date:"11/1/24",text:"Fixed mutually exclusive gear staying disabled when deselecting the selected item"}}),z=new ot({props:{version:"3.25.7",date:"9/1/24",text:["Enabled 'unsaved changes' prompt to appear before leaving site when certain conditions are met","Fixed dropdowns blocking interactions behind them for a short period after being closed","Fixed dropdown sort incorrectly defaulting to the last sorted list in some cases"]}}),R=new ot({props:{version:"3.25.6",date:"7/1/24",text:"Fixed armor filter not working properly when 'Exclusive' filter type and 'No Stats' option were selected"}}),D=new ot({props:{version:"3.25.5",date:"6/1/24",text:["Fixed issue with switching gear slots while full weapon view was on","Tools are now selectable even if full weapon view is on"]}}),A=new ot({props:{version:"3.25.4",date:"5/1/24",text:'Fixed crash caused by using the build randomizer while "Force Mushroom Parasol" option was on'}}),B=new ot({props:{version:"3.25.3",date:"5/1/24",text:["Added feature to swap gear slots when clicking on an already selected gear item","Added visual cues to both deselecting and swapping options for dropdown items"]}}),Y=new ot({props:{version:"3.25.2",date:"3/1/24",text:["Replaced 'Strict' filter type with 'Exclusive' filter type in search options of dropdowns","Added icons to resource links and credits"]}}),ce=new ot({props:{version:"3.25.1",date:"2/1/24",text:`"Allow 'basic' equipment" option is no longer restricted when "Randomize gear" option isn't selected in the build randomizer`}}),q=new ot({props:{version:"3.25.0",date:"2/1/24",text:["Added 'Build Costs' feature","Removed spectacles from 'basic' equipment pool in the build randomizer"]}}),de=new ot({props:{version:"3.24.5",date:"31/12/23",text:"v3 Release"}}),{c(){e=g("div"),t=g("span"),t.textContent="Changelog",i=C(),s=g("ul"),se(o.$$.fragment),r=C(),se(l.$$.fragment),a=C(),se(c.$$.fragment),u=C(),se(d.$$.fragment),f=C(),se(h.$$.fragment),_=C(),se(b.$$.fragment),v=C(),se(y.$$.fragment),E=C(),se(w.$$.fragment),I=C(),se(T.$$.fragment),j=C(),se(O.$$.fragment),W=C(),se(z.$$.fragment),K=C(),se(R.$$.fragment),S=C(),se(D.$$.fragment),J=C(),se(A.$$.fragment),F=C(),se(B.$$.fragment),U=C(),se(Y.$$.fragment),ue=C(),se(ce.$$.fragment),ee=C(),se(q.$$.fragment),X=C(),se(de.$$.fragment),Be=C(),Me=g("div"),Oe=g("div"),nt=g("button"),nt.textContent="OK",m(t,"id","title"),m(s,"id","contents"),m(s,"class","svelte-15kc2i1"),m(nt,"id","firstFocusable lastFocusable"),m(Me,"class","promptOptions svelte-15kc2i1"),m(e,"class","infoPrompt svelte-15kc2i1")},m(ae,gt){M(ae,e,gt),p(e,t),p(e,i),p(e,s),ne(o,s,null),p(s,r),ne(l,s,null),p(s,a),ne(c,s,null),p(s,u),ne(d,s,null),p(s,f),ne(h,s,null),p(s,_),ne(b,s,null),p(s,v),ne(y,s,null),p(s,E),ne(w,s,null),p(s,I),ne(T,s,null),p(s,j),ne(O,s,null),p(s,W),ne(z,s,null),p(s,K),ne(R,s,null),p(s,S),ne(D,s,null),p(s,J),ne(A,s,null),p(s,F),ne(B,s,null),p(s,U),ne(Y,s,null),p(s,ue),ne(ce,s,null),p(s,ee),ne(q,s,null),p(s,X),ne(de,s,null),p(e,Be),p(e,Me),p(Me,Oe),p(Oe,nt),n[2](nt),De=!0,je||(_e=[N(nt,"click",n[3]),N(nt,"keydown",n[4]),N(e,"introstart",n[5])],je=!0)},p:re,i(ae){De||(L(o.$$.fragment,ae),L(l.$$.fragment,ae),L(c.$$.fragment,ae),L(d.$$.fragment,ae),L(h.$$.fragment,ae),L(b.$$.fragment,ae),L(y.$$.fragment,ae),L(w.$$.fragment,ae),L(T.$$.fragment,ae),L(O.$$.fragment,ae),L(z.$$.fragment,ae),L(R.$$.fragment,ae),L(D.$$.fragment,ae),L(A.$$.fragment,ae),L(B.$$.fragment,ae),L(Y.$$.fragment,ae),L(ce.$$.fragment,ae),L(q.$$.fragment,ae),L(de.$$.fragment,ae),ae&&we(()=>{De&&(ze||(ze=me(e,Je,{duration:250},!0)),ze.run(1))}),De=!0)},o(ae){H(o.$$.fragment,ae),H(l.$$.fragment,ae),H(c.$$.fragment,ae),H(d.$$.fragment,ae),H(h.$$.fragment,ae),H(b.$$.fragment,ae),H(y.$$.fragment,ae),H(w.$$.fragment,ae),H(T.$$.fragment,ae),H(O.$$.fragment,ae),H(z.$$.fragment,ae),H(R.$$.fragment,ae),H(D.$$.fragment,ae),H(A.$$.fragment,ae),H(B.$$.fragment,ae),H(Y.$$.fragment,ae),H(ce.$$.fragment,ae),H(q.$$.fragment,ae),H(de.$$.fragment,ae),ae&&(ze||(ze=me(e,Je,{duration:250},!1)),ze.run(0)),De=!1},d(ae){ae&&P(e),ie(o),ie(l),ie(c),ie(d),ie(h),ie(b),ie(y),ie(w),ie(T),ie(O),ie(z),ie(R),ie(D),ie(A),ie(B),ie(Y),ie(ce),ie(q),ie(de),n[2](null),ae&&ze&&ze.end(),je=!1,be(_e)}}}function Xg(n,e,t){let i;Q(n,Z,c=>t(1,i=c));let s;function o(c){le[c?"unshift":"push"](()=>{s=c,t(0,s)})}return[s,i,o,()=>G(Z,i.changelog.ongoing=!1,i),c=>{yt(c),wt(c)},()=>s.focus()]}class Jg extends Ne{constructor(e){super(),Te(this,e,Xg,Qg,ge,{})}}function Zg(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j;return{c(){e=g("div"),t=g("span"),t.textContent="Resources",i=C(),s=g("ul"),o=g("li"),r=g("iconify-icon"),l=C(),a=g("a"),a.textContent="Fantastic Frontier Wiki",c=C(),u=g("li"),u.innerHTML='<iconify-icon icon="ic:baseline-discord" class="svelte-1d9mkog"></iconify-icon> <a href="https://discord.gg/ff" target="_blank" class="svelte-1d9mkog">Fantastic Frontier Discord Server</a>',d=C(),f=g("li"),f.innerHTML='<iconify-icon icon="simple-icons:googledocs" class="svelte-1d9mkog"></iconify-icon> <a href="https://docs.google.com/document/d/1H9HXoExCDVfXx15LQ4Te-2tTjrLFB-XCbMmx44Ynld4/edit" target="_blank" class="svelte-1d9mkog">Fantastic Frontier Build List</a>',h=C(),_=g("li"),_.innerHTML='<iconify-icon icon="simple-icons:googledocs" class="svelte-1d9mkog"></iconify-icon> <a href="https://docs.google.com/document/d/15vwSRojTqZ8LI09Wq4dvGF1kSTPmH2_gECQvwlSFki8/edit" target="_blank" class="svelte-1d9mkog">Fantastic Frontier Max Stat List</a>',b=C(),v=g("div"),y=g("div"),E=g("button"),E.textContent="OK",m(t,"id","title"),Re(r,"icon","simple-icons:fandom"),Re(r,"class","svelte-1d9mkog"),m(a,"id","firstFocusable"),m(a,"href","https://fantastic-frontier-roblox.fandom.com/wiki/Fantastic_Frontier_-_Roblox_Wiki"),m(a,"target","_blank"),m(a,"class","svelte-1d9mkog"),m(o,"class","svelte-1d9mkog"),m(u,"class","svelte-1d9mkog"),m(f,"class","svelte-1d9mkog"),m(_,"class","svelte-1d9mkog"),m(s,"class","svelte-1d9mkog"),m(E,"id","lastFocusable"),m(v,"class","promptOptions"),m(e,"class","infoPrompt")},m(O,W){M(O,e,W),p(e,t),p(e,i),p(e,s),p(s,o),p(o,r),p(o,l),p(o,a),p(s,c),p(s,u),p(s,d),p(s,f),p(s,h),p(s,_),p(e,b),p(e,v),p(v,y),p(y,E),n[2](E),I=!0,T||(j=[N(a,"keydown",yt),N(E,"click",n[3]),N(E,"keydown",wt),N(e,"introstart",n[4])],T=!0)},p:re,i(O){I||(O&&we(()=>{I&&(w||(w=me(e,Je,{duration:250},!0)),w.run(1))}),I=!0)},o(O){O&&(w||(w=me(e,Je,{duration:250},!1)),w.run(0)),I=!1},d(O){O&&P(e),n[2](null),O&&w&&w.end(),T=!1,be(j)}}}function xg(n,e,t){let i;Q(n,Z,a=>t(1,i=a));let s;function o(a){le[a?"unshift":"push"](()=>{s=a,t(0,s)})}return[s,i,o,()=>G(Z,i.resources.ongoing=!1,i),()=>s.focus()]}class $g extends Ne{constructor(e){super(),Te(this,e,xg,Zg,ge,{})}}function Ll(n,e,t){const i=n.slice();return i[7]=e[t],i}function Fl(n,e,t){const i=n.slice();return i[10]=e[t],i}function Bl(n){let e,t,i,s,o,r,l,a=n[1][n[7]][n[10]].toLocaleString()+" Gold",c,u;return{c(){e=g("div"),t=g("span"),t.textContent=`${n[10].charAt(0).toUpperCase()+n[10].slice(1)+":"}`,i=C(),s=g("img"),r=C(),l=g("span"),c=te(a),u=C(),m(t,"id","costTypeName"),m(t,"class","svelte-1u2pv9q"),$e(s.src,o="https://static.wikia.nocookie.net/fantastic-frontier-roblox/images/b/ba/GoldCoins.png")||m(s,"src",o),m(s,"alt",""),m(s,"class","svelte-1u2pv9q"),m(e,"class","svelte-1u2pv9q")},m(d,f){M(d,e,f),p(e,t),p(e,i),p(e,s),p(e,r),p(e,l),p(l,c),p(e,u)},p(d,f){f&2&&a!==(a=d[1][d[7]][d[10]].toLocaleString()+" Gold")&&Ee(c,a)},d(d){d&&P(e)}}}function ql(n){let e,t,i,s,o,r=Ie(["min","avg","max"]),l=[];for(let a=0;a<3;a+=1)l[a]=Bl(Fl(n,r,a));return{c(){e=g("div"),t=g("span"),t.textContent=`${n[7].charAt(0).toUpperCase()+n[7].slice(1)+" Costs"}`,i=C(),s=g("div");for(let a=0;a<3;a+=1)l[a].c();o=C(),m(t,"id","subtitle"),m(t,"class","svelte-1u2pv9q"),m(s,"class","costTypes svelte-1u2pv9q"),m(e,"class","costs svelte-1u2pv9q"),m(e,"id",n[7])},m(a,c){M(a,e,c),p(e,t),p(e,i),p(e,s);for(let u=0;u<3;u+=1)l[u]&&l[u].m(s,null);p(e,o)},p(a,c){if(c&2){r=Ie(["min","avg","max"]);let u;for(u=0;u<3;u+=1){const d=Fl(a,r,u);l[u]?l[u].p(d,c):(l[u]=Bl(d),l[u].c(),l[u].m(s,null))}for(;u<3;u+=1)l[u].d(1)}},d(a){a&&P(e),ht(l,a)}}}function eb(n){let e,t,i,s,o,r,l,a,c,u,d=Ie(["armor","gear","total"]),f=[];for(let h=0;h<3;h+=1)f[h]=ql(Ll(n,d,h));return{c(){e=g("div"),t=g("div");for(let h=0;h<3;h+=1)f[h].c();i=C(),s=g("div"),o=g("div"),r=g("button"),r.textContent="OK",m(t,"class","costsInfo svelte-1u2pv9q"),m(r,"id","firstFocusable lastFocusable"),m(s,"class","promptOptions svelte-1u2pv9q"),m(e,"class","buildCosts svelte-1u2pv9q")},m(h,_){M(h,e,_),p(e,t);for(let b=0;b<3;b+=1)f[b]&&f[b].m(t,null);p(e,i),p(e,s),p(s,o),p(o,r),n[3](r),a=!0,c||(u=[N(r,"click",n[4]),N(r,"keydown",n[5]),N(e,"introstart",n[6])],c=!0)},p(h,[_]){if(_&2){d=Ie(["armor","gear","total"]);let b;for(b=0;b<3;b+=1){const v=Ll(h,d,b);f[b]?f[b].p(v,_):(f[b]=ql(v),f[b].c(),f[b].m(t,null))}for(;b<3;b+=1)f[b].d(1)}},i(h){a||(h&&we(()=>{a&&(l||(l=me(e,Je,{duration:250},!0)),l.run(1))}),a=!0)},o(h){h&&(l||(l=me(e,Je,{duration:250},!1)),l.run(0)),a=!1},d(h){h&&P(e),ht(f,h),n[3](null),h&&l&&l.end(),c=!1,be(u)}}}function tb(n,e,t){let i,s;Q(n,Nt,u=>t(1,i=u)),Q(n,Z,u=>t(2,s=u));let o;function r(u){le[u?"unshift":"push"](()=>{o=u,t(0,o)})}return[o,i,s,r,()=>G(Z,s.costs.ongoing=!1,s),u=>{yt(u),wt(u)},()=>o.focus()]}class nb extends Ne{constructor(e){super(),Te(this,e,tb,eb,ge,{})}}function Wl(n,e,t){const i=n.slice();return i[19]=e[t][0],i[20]=e[t][1],i}function zl(n,e,t){const i=n.slice();return i[11]=e[t],i}function Hl(n,e,t){const i=n.slice();return i[16]=e[t],i}function ib(n){const e=n.slice(),t=e[14]?e[5][e[2].name][e[11].name]:`${Math.round(e[11].mult*100*10)/10}<b>%</b> ${Wt[e[11].type]}`;return e[15]=t,e}function jl(n){const e=n.slice(),t=e[5][e[2].name]!=null&&e[5][e[2].name][e[11].name]!=null;return e[14]=t,e}function sb(n){let e;return{c(){e=g("span"),e.textContent=`Slot: ${n[2].slot.charAt(0).toUpperCase()+n[2].slot.slice(1)}`},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function ob(n){let e;return{c(){e=g("span"),e.textContent=`Type: ${n[2].tool?"Tool":n[2].info.type}`},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function rb(n){let e,t,i,s,o=Ie(Object.entries(Wt)),r=[];for(let l=0;l<o.length;l+=1)r[l]=Ul(Wl(n,o,l));return{c(){e=g("div"),t=g("span"),t.textContent=`${n[2].noStats?"No stats available":"Stats:"}`,i=C(),s=g("div");for(let l=0;l<r.length;l+=1)r[l].c();m(t,"id","subtitle"),m(t,"class","svelte-1c4y2ce"),m(s,"class","svelte-1c4y2ce"),m(e,"id","itemStats"),m(e,"class","svelte-1c4y2ce")},m(l,a){M(l,e,a),p(e,t),p(e,i),p(e,s);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,null)},p(l,a){if(a&4){o=Ie(Object.entries(Wt));let c;for(c=0;c<o.length;c+=1){const u=Wl(l,o,c);r[c]?r[c].p(u,a):(r[c]=Ul(u),r[c].c(),r[c].m(s,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(l){l&&P(e),ht(r,l)}}}function lb(n){let e;function t(o,r){return o[2].tool?ub:cb}let s=t(n)(n);return{c(){s.c(),e=pt()},m(o,r){s.m(o,r),M(o,e,r)},p(o,r){s.p(o,r)},d(o){o&&P(e),s.d(o)}}}function ab(n){let e,t,i,s,o,r=(n[19]=="endurance"?n[2].stats[n[19]].toFixed(2):n[2].stats[n[19]])+"",l,a;return{c(){e=g("div"),t=g("img"),s=C(),o=g("span"),l=te(r),a=C(),$e(t.src,i="stats/"+n[19]+".svg")||m(t,"src",i),m(t,"alt",n[20]),m(t,"class","svelte-1c4y2ce"),m(o,"class","statValue svelte-1c4y2ce"),m(o,"id",n[19]),oe(o,"negative",n[2].stats[n[19]]<0),m(e,"class","svelte-1c4y2ce")},m(c,u){M(c,e,u),p(e,t),p(e,s),p(e,o),p(o,l),p(e,a)},p(c,u){u&4&&oe(o,"negative",c[2].stats[c[19]]<0)},d(c){c&&P(e)}}}function Ul(n){let e,t=n[2].stats[n[19]]!=0&&ab(n);return{c(){t&&t.c(),e=pt()},m(i,s){t&&t.m(i,s),M(i,e,s)},p(i,s){i[2].stats[i[19]]!=0&&t.p(i,s)},d(i){i&&P(e),t&&t.d(i)}}}function cb(n){let e,t,i,s,o,r=Ie(n[2].moves),l=[];for(let a=0;a<r.length;a+=1)l[a]=Kl(zl(n,r,a));return{c(){e=g("div"),t=g("div"),i=g("div"),s=g("div"),s.innerHTML='<span class="svelte-1c4y2ce">Move</span> <span class="svelte-1c4y2ce">Base Value</span> <span class="svelte-1c4y2ce">Scaling(s)</span>',o=C();for(let a=0;a<l.length;a+=1)l[a].c();m(s,"id","subtitle"),m(s,"class","svelte-1c4y2ce"),m(i,"class","svelte-1c4y2ce"),m(t,"id","itemMoves"),m(t,"class","svelte-1c4y2ce"),m(e,"id","itemMovesCont"),m(e,"class","svelte-1c4y2ce")},m(a,c){M(a,e,c),p(e,t),p(t,i),p(i,s),p(i,o);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(i,null)},p(a,c){if(c&52){r=Ie(a[2].moves);let u;for(u=0;u<r.length;u+=1){const d=zl(a,r,u);l[u]?l[u].p(d,c):(l[u]=Kl(d),l[u].c(),l[u].m(i,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=r.length}},d(a){a&&P(e),ht(l,a)}}}function ub(n){let e;return{c(){e=g("div"),e.innerHTML='<span id="subtitle" class="svelte-1c4y2ce">No moves available</span>',m(e,"id","itemMovesCont"),m(e,"class","svelte-1c4y2ce"),tt(e,"text-align","center")},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function db(n){let e,t,i,s,o,r;function l(d,f){return!d[11].type||!d[11].type.includes("/")?Gl:fb}function a(d,f){return f===Gl?ib(d):d}let c=l(n),u=c(a(n,c));return{c(){e=g("div"),t=g("span"),t.textContent=`${n[11].name}`,i=C(),s=g("span"),s.textContent=`${(n[11].name.includes("Fantastic Beamstorm")?"~":"")+n[11].base}`,o=C(),u.c(),r=C(),m(t,"class","svelte-1c4y2ce"),m(s,"class","svelte-1c4y2ce"),m(e,"class","svelte-1c4y2ce")},m(d,f){M(d,e,f),p(e,t),p(e,i),p(e,s),p(e,o),u.m(e,null),p(e,r)},p(d,f){u.p(a(d,c),f)},d(d){d&&P(e),u.d()}}}function fb(n){let e,t=Ie(n[11].type.split("/")),i=[];for(let s=0;s<t.length;s+=1)i[s]=Vl(Hl(n,t,s));return{c(){e=g("span");for(let s=0;s<i.length;s+=1)i[s].c();m(e,"id","hybrid"),m(e,"class","svelte-1c4y2ce")},m(s,o){M(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,o){if(o&4){t=Ie(s[11].type.split("/"));let r;for(r=0;r<t.length;r+=1){const l=Hl(s,t,r);i[r]?i[r].p(l,o):(i[r]=Vl(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(s){s&&P(e),ht(i,s)}}}function Gl(n){let e,t=n[15]+"";return{c(){e=g("span"),m(e,"class","svelte-1c4y2ce"),tt(e,"font-size",n[15].length>30?"2.5rem":"")},m(i,s){M(i,e,s),e.innerHTML=t},p:re,d(i){i&&P(e)}}}function Vl(n){let e,t=Math.round(n[11][`${n[16]}Mult`]*100*10)/10+"",i,s,o,r=Wt[n[16]]+"",l,a;return{c(){e=g("span"),i=te(t),s=g("b"),s.textContent="%",o=C(),l=te(r),a=C()},m(c,u){M(c,e,u),p(e,i),p(e,s),p(e,o),p(e,l),p(e,a)},p:re,d(c){c&&P(e)}}}function Kl(n){let e=!n[4].includes(n[11].name),t,i=e&&db(jl(n));return{c(){i&&i.c(),t=pt()},m(s,o){i&&i.m(s,o),M(s,t,o)},p(s,o){e&&i.p(jl(s),o)},d(s){s&&P(t),i&&i.d(s)}}}function hb(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce,ee,q,X;function de(De,je){return De[3]?ob:sb}let Me=de(n)(n);function Oe(De,je){return De[3]?lb:rb}let ze=Oe(n)(n);return{c(){e=g("div"),t=g("div"),i=g("a"),s=g("img"),r=C(),l=g("div"),a=g("span"),a.textContent="Click the image in order to visit the wiki page",c=C(),u=g("span"),u.textContent=`Name: ${n[2].name}`,d=C(),Me.c(),f=C(),ze.c(),h=C(),_=g("div"),b=g("span"),b.textContent="Costs:",v=C(),y=g("div"),E=g("div"),w=g("span"),w.textContent="Minimum:",I=C(),T=g("img"),O=C(),W=g("span"),W.textContent=`${n[2].cost.min==null?"Unpurchasable":n[2].cost.min.toLocaleString()+" Gold"}`,z=C(),K=g("div"),R=g("span"),R.textContent="Maximum:",S=C(),D=g("img"),A=C(),F=g("span"),F.textContent=`${n[2].cost.max==null?"Unpurchasable":n[2].cost.max.toLocaleString()+" Gold"}`,B=C(),U=g("div"),Y=g("div"),ue=g("button"),ue.textContent="OK",$e(s.src,o=n[2].image)||m(s,"src",o),m(s,"alt",""),m(s,"class","svelte-1c4y2ce"),m(i,"href",n[2].link),m(i,"target","_blank"),m(i,"class","svelte-1c4y2ce"),m(a,"id","tip"),m(a,"class","svelte-1c4y2ce"),m(l,"class","svelte-1c4y2ce"),m(t,"id","basicInfo"),m(t,"class","svelte-1c4y2ce"),m(b,"id","subtitle"),m(b,"class","svelte-1c4y2ce"),m(w,"class","svelte-1c4y2ce"),$e(T.src,j="https://static.wikia.nocookie.net/fantastic-frontier-roblox/images/b/ba/GoldCoins.png")||m(T,"src",j),m(T,"alt",""),m(T,"class","svelte-1c4y2ce"),m(W,"class","svelte-1c4y2ce"),m(E,"class","svelte-1c4y2ce"),m(R,"class","svelte-1c4y2ce"),$e(D.src,J="https://static.wikia.nocookie.net/fantastic-frontier-roblox/images/b/ba/GoldCoins.png")||m(D,"src",J),m(D,"alt",""),m(D,"class","svelte-1c4y2ce"),m(F,"class","svelte-1c4y2ce"),m(K,"class","svelte-1c4y2ce"),m(y,"class","svelte-1c4y2ce"),m(_,"id","itemCosts"),m(_,"class","svelte-1c4y2ce"),m(ue,"id","firstFocusable lastFocusable"),m(U,"class","promptOptions svelte-1c4y2ce"),m(e,"class","itemInfo svelte-1c4y2ce")},m(De,je){M(De,e,je),p(e,t),p(t,i),p(i,s),p(t,r),p(t,l),p(l,a),p(l,c),p(l,u),p(l,d),Me.m(l,null),p(e,f),ze.m(e,null),p(e,h),p(e,_),p(_,b),p(_,v),p(_,y),p(y,E),p(E,w),p(E,I),p(E,T),p(E,O),p(E,W),p(y,z),p(y,K),p(K,R),p(K,S),p(K,D),p(K,A),p(K,F),p(e,B),p(e,U),p(U,Y),p(Y,ue),n[6](ue),ee=!0,q||(X=[N(ue,"click",n[7]),N(ue,"keydown",n[8]),N(e,"introstart",n[9]),N(e,"outroend",n[10])],q=!0)},p(De,[je]){Me.p(De,je),ze.p(De,je)},i(De){ee||(De&&we(()=>{ee&&(ce||(ce=me(e,Je,{duration:250},!0)),ce.run(1))}),ee=!0)},o(De){De&&(ce||(ce=me(e,Je,{duration:250},!1)),ce.run(0)),ee=!1},d(De){De&&P(e),Me.d(),ze.d(),n[6](null),De&&ce&&ce.end(),q=!1,be(X)}}}function pb(n,e,t){let i;Q(n,Z,_=>t(1,i=_));let s,o=i.item.data,r=o.type=="gear",l=["Charged Basic Attack","Charged Solar Beam"],a={"Void Spike Ultradagger":{"Void Needle":"100<b>%</b> Melee - 562.5<b>%</b> Armor"},"Pureblood Dagger":{"Basic Attack":"200<b>%</b> HighestBonus - 100<b>%</b> LowerBonuses","Blood Sap":"200<b>%</b> HighestBonus - 100<b>%</b> LowerBonuses","+ HP per Blood Sap":"(200<b>%</b> HighestBonus - 100<b>%</b> LowerBonuses) / 2"},"Gnome Rocket Launcher":{"Basic Attack":"None"}};function c(_){le[_?"unshift":"push"](()=>{s=_,t(0,s)})}return[s,i,o,r,l,a,c,()=>G(Z,i.item.ongoing=!1,i),_=>{yt(_),wt(_)},()=>s.focus(),()=>{o.element&&o.element.querySelector("button").focus()}]}class _b extends Ne{constructor(e){super(),Te(this,e,pb,hb,ge,{})}}function mb(n){let e,t,i,s,o,r,l,a,c,u,d,f;return{c(){e=g("div"),t=g("span"),t.textContent="Fantastic Calculator Policy",i=C(),s=g("div"),s.innerHTML=`<span id="subtitle" class="svelte-1fj0tys">About</span> <p class="svelte-1fj0tys">This tool is a passion project, one that is independent and is not
            affiliated with or sponsored by the creators of Fantastic Frontier.</p> <span id="subtitle" class="svelte-1fj0tys">Privacy Policy</span> <p class="svelte-1fj0tys">This policy explains what information Fantastic Calculator (&quot;we&quot;,
            &quot;us&quot; or &quot;our&quot;) collects, uses, and shares when you use our website.</p> <span id="subtitle" class="svelte-1fj0tys">Information We Collect</span> <p class="svelte-1fj0tys">We collect information provided by you; that is which is inputted
            directly into our tool. We also collect information about how you
            use and interact with our website, general demographic details, and
            information about your device or browser.</p> <span id="subtitle" class="svelte-1fj0tys">How We Use This Information</span> <p class="svelte-1fj0tys">Your information may be utilized to test and improve the tool, once
            the aggregated, non-identifying information provided has been
            collected and analyzed.</p> <span id="subtitle" class="svelte-1fj0tys">Contact</span> <p class="svelte-1fj0tys">For any questions or inquiries, feel free to contact us at <hl>@xt.ss</hl>.</p>`,o=C(),r=g("div"),l=g("div"),a=g("button"),a.textContent="OK",m(t,"id","title"),m(s,"id","contents"),m(a,"id","firstFocusable lastFocusable"),m(r,"class","promptOptions svelte-1fj0tys"),m(e,"class","infoPrompt svelte-1fj0tys")},m(h,_){M(h,e,_),p(e,t),p(e,i),p(e,s),p(e,o),p(e,r),p(r,l),p(l,a),n[2](a),u=!0,d||(f=[N(a,"click",n[3]),N(a,"keydown",n[4])],d=!0)},p:re,i(h){u||(h&&we(()=>{u&&(c||(c=me(e,Je,{duration:250},!0)),c.run(1))}),u=!0)},o(h){h&&(c||(c=me(e,Je,{duration:250},!1)),c.run(0)),u=!1},d(h){h&&P(e),n[2](null),h&&c&&c.end(),d=!1,be(f)}}}function gb(n,e,t){let i;Q(n,Z,a=>t(1,i=a));let s;function o(a){le[a?"unshift":"push"](()=>{s=a,t(0,s)})}return[s,i,o,()=>G(Z,i.policy.ongoing=!1,i),a=>{yt(a),wt(a)}]}class bb extends Ne{constructor(e){super(),Te(this,e,gb,mb,ge,{})}}const{document:At,window:pn}=wu;function Yl(n,e,t){const i=n.slice();return i[53]=e[t],i}function Ql(n,e,t){const i=n.slice();return i[53]=e[t],i}function Xl(n){let e;return{c(){e=g("style"),e.textContent=`* {\r
                pointer-events: none;\r
            }\r
        `},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function Jl(n){let e;return{c(){e=g("link"),m(e,"rel","preload"),m(e,"as","image"),m(e,"href",n[53])},m(t,i){M(t,e,i)},p:re,d(t){t&&P(e)}}}function Zl(n){let e;return{c(){e=g("style"),e.textContent=`body > div:not(.backgrounds),\r
            main > :not(.promptCont),\r
            .backgrounds > img,\r
            #donate,\r
            #resources,\r
            #changelog,\r
            #policy {\r
                filter: blur(0.5rem);\r
                pointer-events: none;\r
            }\r
            .sideFeatures {\r
                z-index: 3;\r
            }\r
            .sideFeatures button:hover,\r
            .sideFeatures button:focus,\r
            .info:hover,\r
            .info:focus {\r
                background-color: var(--transparent);\r
            }\r
            .sideFeatures button > .tooltip,\r
            .info:not(#credits) > .tooltip {\r
                opacity: 0 !important;\r
                visibility: hidden !important;\r
            }\r
        `},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function xl(n){let e;return{c(){e=g("style"),e.textContent=`body {\r
                overflow: hidden;\r
            }\r
        `},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function $l(n){let e;return{c(){e=g("style"),e.textContent=`body {\r
                pointer-events: none;\r
            }\r
            #donate,\r
            #resources,\r
            #changelog,\r
            #policy,\r
            .mainFeatures,\r
            .sideFeatures,\r
            .statBox > .toggleCont,\r
            .ddButton > iconify-icon,\r
            .copyStatsButton {\r
                opacity: 0;\r
                visibility: hidden;\r
            }\r
            .gearBox .ddButton > iconify-icon {\r
                width: 15% !important;\r
            }\r
            .eqSlotIcon button > .tooltip,\r
            .gearSlotIcon button > .tooltip {\r
                opacity: 1;\r
                visibility: visible;\r
            }\r
            .calcBox {\r
                translate: -3%;\r
            }\r
            .currentBuild {\r
                left: 50% !important;\r
                padding: 2rem !important;\r
            }\r
            .currentBuild > button {\r
                min-width: 0 !important;\r
                width: 0;\r
                opacity: 0;\r
                visibility: hidden;\r
            }`},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function ea(n){let e,t;return{c(){e=g("img"),m(e,"class","background svelte-v3bd1x"),$e(e.src,t=n[53])||m(e,"src",t),m(e,"alt",""),oe(e,"active",n[21].indexOf(n[53])==n[8])},m(i,s){M(i,e,s)},p(i,s){s[0]&2097408&&oe(e,"active",i[21].indexOf(i[53])==i[8])},d(i){i&&P(e)}}}function ta(n){let e,t,i=Math.floor(n[17][n[2]]*100)+"",s,o,r,l;return{c(){e=g("span"),t=te("Zoom: "),s=te(i),o=g("b"),o.textContent="%",m(e,"class","info svelte-v3bd1x"),m(e,"id","zoomLevel")},m(a,c){M(a,e,c),p(e,t),p(e,s),p(e,o),l=!0},p(a,c){(!l||c[0]&4)&&i!==(i=Math.floor(a[17][a[2]]*100)+"")&&Ee(s,i)},i(a){l||(a&&we(()=>{l&&(r||(r=me(e,Xe,{duration:150},!0)),r.run(1))}),l=!0)},o(a){a&&(r||(r=me(e,Xe,{duration:150},!1)),r.run(0)),l=!1},d(a){a&&P(e),a&&r&&r.end()}}}function na(n){let e,t,i,s,o,r,l,a,c=n[16].armor.avg.toLocaleString()+" Gold",u,d,f,h,_,b,v,y,E,w=n[16].gear.avg.toLocaleString()+" Gold",I,T,j;return{c(){e=g("div"),t=g("div"),i=g("span"),i.textContent="Avg. armor cost:",s=C(),o=g("img"),l=C(),a=g("span"),u=te(c),d=C(),f=g("div"),h=g("span"),h.textContent="Avg. gear cost:",_=C(),b=g("img"),y=C(),E=g("span"),I=te(w),$e(o.src,r="https://static.wikia.nocookie.net/fantastic-frontier-roblox/images/b/ba/GoldCoins.png")||m(o,"src",r),m(o,"alt",""),m(o,"class","svelte-v3bd1x"),m(t,"class","svelte-v3bd1x"),$e(b.src,v="https://static.wikia.nocookie.net/fantastic-frontier-roblox/images/b/ba/GoldCoins.png")||m(b,"src",v),m(b,"alt",""),m(b,"class","svelte-v3bd1x"),m(f,"class","svelte-v3bd1x"),m(e,"class","costPreview svelte-v3bd1x"),m(e,"id","specific")},m(O,W){M(O,e,W),p(e,t),p(t,i),p(t,s),p(t,o),p(t,l),p(t,a),p(a,u),p(e,d),p(e,f),p(f,h),p(f,_),p(f,b),p(f,y),p(f,E),p(E,I),j=!0},p(O,W){(!j||W[0]&65536)&&c!==(c=O[16].armor.avg.toLocaleString()+" Gold")&&Ee(u,c),(!j||W[0]&65536)&&w!==(w=O[16].gear.avg.toLocaleString()+" Gold")&&Ee(I,w)},i(O){j||(O&&we(()=>{j&&(T||(T=me(e,Xe,{duration:150},!0)),T.run(1))}),j=!0)},o(O){O&&(T||(T=me(e,Xe,{duration:150},!1)),T.run(0)),j=!1},d(O){O&&P(e),O&&T&&T.end()}}}function ia(n){let e,t,i=n[3].name+"",s,o,r,l,a,c,u,d,f,h,_=n[3].desc+"",b,v,y,E,w;return{c(){e=g("div"),t=g("span"),s=te(i),o=C(),r=g("button"),r.innerHTML='<iconify-icon icon="ri:share-fill"></iconify-icon> <span class="tooltip" id="right">Share build</span>',l=C(),a=g("span"),c=te(`Description / Notes:\r
                `),u=g("br"),d=C(),f=g("br"),h=C(),b=te(_),m(t,"id","buildName"),m(t,"class","svelte-v3bd1x"),m(r,"class","svelte-v3bd1x"),m(a,"class","tooltip"),m(a,"id","bottom"),m(e,"class","currentBuild svelte-v3bd1x"),oe(e,"no-tooltip",n[9])},m(I,T){M(I,e,T),p(e,t),p(t,s),p(e,o),p(e,r),p(e,l),p(e,a),p(a,c),p(a,u),p(a,d),p(a,f),p(a,h),p(a,b),y=!0,E||(w=[N(r,"click",n[33]),N(r,"mouseenter",n[34]),N(r,"mouseleave",n[35])],E=!0)},p(I,T){(!y||T[0]&8)&&i!==(i=I[3].name+"")&&Ee(s,i),(!y||T[0]&8)&&_!==(_=I[3].desc+"")&&Ee(b,_),(!y||T[0]&512)&&oe(e,"no-tooltip",I[9])},i(I){y||(I&&we(()=>{y&&(v||(v=me(e,Xe,{duration:100},!0)),v.run(1))}),y=!0)},o(I){I&&(v||(v=me(e,Xe,{duration:100},!1)),v.run(0)),y=!1},d(I){I&&P(e),I&&v&&v.end(),E=!1,be(w)}}}function sa(n){let e,t,i,s,o,r,l,a,c=n[16].total.avg.toLocaleString()+" Gold",u,d,f;return{c(){e=g("div"),t=g("div"),i=g("span"),i.textContent="Avg. total cost:",s=C(),o=g("img"),l=C(),a=g("span"),u=te(c),$e(o.src,r="https://static.wikia.nocookie.net/fantastic-frontier-roblox/images/b/ba/GoldCoins.png")||m(o,"src",r),m(o,"alt",""),m(o,"class","svelte-v3bd1x"),m(t,"class","svelte-v3bd1x"),m(e,"class","costPreview svelte-v3bd1x"),m(e,"id","total")},m(h,_){M(h,e,_),p(e,t),p(t,i),p(t,s),p(t,o),p(t,l),p(t,a),p(a,u),f=!0},p(h,_){(!f||_[0]&65536)&&c!==(c=h[16].total.avg.toLocaleString()+" Gold")&&Ee(u,c)},i(h){f||(h&&we(()=>{f&&(d||(d=me(e,Xe,{duration:150},!0)),d.run(1))}),f=!0)},o(h){h&&(d||(d=me(e,Xe,{duration:150},!1)),d.run(0)),f=!1},d(h){h&&P(e),h&&d&&d.end()}}}function vb(n){let e,t,i;return t=new bb({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function yb(n){let e,t,i;return t=new Jg({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function wb(n){let e,t,i;return t=new $g({}),t.$on("loadPending",n[19]),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function kb(n){let e,t,i;return t=new Ug({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Cb(n){let e,t,i;return t=new Wg({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Eb(n){let e,t,i;return t=new nb({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Sb(n){let e,t,i;return t=new Pg({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Ib(n){let e,t,i;return t=new Dg({}),t.$on("buildLoad",n[37]),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Tb(n){let e,t,i;return t=new Sg({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Nb(n){let e,t,i;return t=new eg({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function Ob(n){let e,t,i,s;function o(l){n[36](l)}let r={};return n[7]!==void 0&&(r.loadID=n[7]),t=new gg({props:r}),le.push(()=>Pe(t,"loadID",o)),t.$on("resetActions",n[23]),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(l,a){M(l,e,a),ne(t,e,null),s=!0},p(l,a){const c={};!i&&a[0]&128&&(i=!0,c.loadID=l[7],Ae(()=>i=!1)),t.$set(c)},i(l){s||(L(t.$$.fragment,l),s=!0)},o(l){H(t.$$.fragment,l),s=!1},d(l){l&&P(e),ie(t)}}}function Db(n){let e,t,i;return t=new _b({}),{c(){e=g("div"),se(t.$$.fragment),m(e,"class","promptCont svelte-v3bd1x")},m(s,o){M(s,e,o),ne(t,e,null),i=!0},p:re,i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&P(e),ie(t)}}}function oa(n){let e,t,i;return{c(){e=g("iconify-icon"),Re(e,"icon","uil:exclamation"),Re(e,"id","unseen"),Re(e,"class","svelte-v3bd1x")},m(s,o){M(s,e,o),i=!0},i(s){i||(s&&we(()=>{i&&(t||(t=me(e,Xe,{duration:150},!0)),t.run(1))}),i=!0)},o(s){s&&(t||(t=me(e,Xe,{duration:150},!1)),t.run(0)),i=!1},d(s){s&&P(e),s&&t&&t.end()}}}function ra(n){let e;return{c(){e=g("div"),e.innerHTML='<iconify-icon icon="eos-icons:three-dots-loading" class="svelte-v3bd1x"></iconify-icon>',m(e,"class","promptCont svelte-v3bd1x")},m(t,i){M(t,e,i)},d(t){t&&P(e)}}}function Rb(n){let e,t,i,s,o,r,l,a,c,u,d,f,h,_,b,v,y,E,w,I,T,j,O,W,z,K,R,S,D,J,A,F,B,U,Y,ue,ce,ee,q,X,de,Be,Me,Oe,nt,ze,De,je,_e,ae,gt;we(n[30]);let it=!n[5]&&Xl(),Ot=Ie(n[21]),et=[];for(let V=0;V<Ot.length;V+=1)et[V]=Jl(Ql(n,Ot,V));let st=(n[11]||!n[5])&&Zl(),k=n[4].screenshot.ongoing&&n[17][n[2]]<=1&&xl(),fe=n[4].screenshot.ongoing&&$l(),he=Ie(n[21]),ve=[];for(let V=0;V<he.length;V+=1)ve[V]=ea(Yl(n,he,V));let Le=n[6]&&ta(n),He=n[4].screenshot.ongoing&&na(n),Ge=n[3]&&ia(n);I=new Um({}),j=new Fg({}),K=new bm({}),S=new Om({}),J=new zm({}),F=new Zm({});let Ze=n[4].screenshot.ongoing&&sa(n);const x=[Db,Ob,Nb,Tb,Ib,Sb,Eb,Cb,kb,wb,yb,vb],Dt=[];function Qo(V,ye){return V[4].item.ongoing?0:V[10]||V[4].share.ongoing?1:V[4].export.ongoing?2:V[4].save.ongoing?3:V[4].load.ongoing&&!V[7]?4:V[4].delete.ongoing?5:V[4].costs.ongoing?6:V[4].bonus.ongoing?7:V[4].randomize.ongoing?8:V[4].resources.ongoing?9:V[4].changelog.ongoing?10:V[4].policy.ongoing?11:-1}~(Y=Qo(n))&&(ue=Dt[Y]=x[Y](n));let ft=!n[12]&&oa(),It=!n[5]&&ra();return{c(){e=C(),it&&it.c(),t=pt();for(let V=0;V<et.length;V+=1)et[V].c();i=pt(),st&&st.c(),s=pt(),k&&k.c(),o=pt(),fe&&fe.c(),r=pt(),l=C(),a=g("div");for(let V=0;V<ve.length;V+=1)ve[V].c();c=C(),Le&&Le.c(),u=C(),d=g("span"),d.innerHTML=`<iconify-icon icon="ic:baseline-discord" class="svelte-v3bd1x"></iconify-icon>
    xt.ss
    <span class="tooltip svelte-v3bd1x" id="right">Contact me on Discord!</span>`,f=C(),h=g("button"),h.innerHTML=`<a href="https://ko-fi.com/xt8ss" target="_blank" class="svelte-v3bd1x">Support me
        <img src="kofi-badge.png" alt="" class="svelte-v3bd1x"/></a>`,_=C(),b=g("button"),b.innerHTML='<iconify-icon icon="charm:stack"></iconify-icon> <span class="tooltip" id="left">Resources</span>',v=C(),y=g("main"),He&&He.c(),E=C(),Ge&&Ge.c(),w=C(),se(I.$$.fragment),T=C(),se(j.$$.fragment),O=C(),W=g("div"),z=g("div"),se(K.$$.fragment),R=C(),se(S.$$.fragment),D=C(),se(J.$$.fragment),A=C(),se(F.$$.fragment),B=C(),Ze&&Ze.c(),U=C(),ue&&ue.c(),ce=C(),ee=g("button"),q=g("iconify-icon"),X=C(),de=g("span"),de.textContent="Changelog",Be=C(),ft&&ft.c(),Me=C(),Oe=g("button"),Oe.innerHTML='<iconify-icon icon="material-symbols:policy-outline-rounded"></iconify-icon> <span class="tooltip" id="left">Policy</span>',nt=C(),ze=g("span"),ze.textContent=`${no}`,De=C(),It&&It.c(),je=pt(),m(a,"class","backgrounds"),m(d,"class","info svelte-v3bd1x"),m(d,"id","credits"),m(h,"class","info svelte-v3bd1x"),m(h,"id","donate"),m(b,"class","info svelte-v3bd1x"),m(b,"id","resources"),m(z,"class","eqCont svelte-v3bd1x"),m(W,"class","calcBox svelte-v3bd1x"),m(W,"id","calc"),m(y,"class","svelte-v3bd1x"),Re(q,"icon","octicon:log-16"),m(de,"class","tooltip"),m(de,"id","right"),m(ee,"class","info svelte-v3bd1x"),m(ee,"id","changelog"),m(Oe,"class","info svelte-v3bd1x"),m(Oe,"id","policy"),m(ze,"class","info svelte-v3bd1x"),m(ze,"id","version")},m(V,ye){M(V,e,ye),it&&it.m(At.head,null),p(At.head,t);for(let Tt=0;Tt<et.length;Tt+=1)et[Tt]&&et[Tt].m(At.head,null);p(At.head,i),st&&st.m(At.head,null),p(At.head,s),k&&k.m(At.head,null),p(At.head,o),fe&&fe.m(At.head,null),p(At.head,r),M(V,l,ye),M(V,a,ye);for(let Tt=0;Tt<ve.length;Tt+=1)ve[Tt]&&ve[Tt].m(a,null);M(V,c,ye),Le&&Le.m(V,ye),M(V,u,ye),M(V,d,ye),M(V,f,ye),M(V,h,ye),M(V,_,ye),M(V,b,ye),M(V,v,ye),M(V,y,ye),He&&He.m(y,null),p(y,E),Ge&&Ge.m(y,null),p(y,w),ne(I,y,null),p(y,T),ne(j,y,null),p(y,O),p(y,W),p(W,z),ne(K,z,null),p(z,R),ne(S,z,null),p(W,D),ne(J,W,null),p(y,A),ne(F,y,null),p(y,B),Ze&&Ze.m(y,null),p(y,U),~Y&&Dt[Y].m(y,null),M(V,ce,ye),M(V,ee,ye),p(ee,q),p(ee,X),p(ee,de),p(ee,Be),ft&&ft.m(ee,null),M(V,Me,ye),M(V,Oe,ye),M(V,nt,ye),M(V,ze,ye),M(V,De,ye),It&&It.m(V,ye),M(V,je,ye),_e=!0,ae||(gt=[N(pn,"beforeunload",n[26]),N(pn,"storage",n[27]),N(pn,"wheel",n[28],{passive:!1}),N(pn,"keydown",n[29]),N(pn,"resize",n[30]),N(At,"visibilitychange",n[31]),N(b,"click",n[32]),N(ee,"click",n[38]),N(Oe,"click",n[39])],ae=!0)},p(V,ye){if(V[5]?it&&(it.d(1),it=null):it||(it=Xl(),it.c(),it.m(t.parentNode,t)),ye[0]&2097152){Ot=Ie(V[21]);let Ye;for(Ye=0;Ye<Ot.length;Ye+=1){const Jn=Ql(V,Ot,Ye);et[Ye]?et[Ye].p(Jn,ye):(et[Ye]=Jl(Jn),et[Ye].c(),et[Ye].m(i.parentNode,i))}for(;Ye<et.length;Ye+=1)et[Ye].d(1);et.length=Ot.length}if(V[11]||!V[5]?st||(st=Zl(),st.c(),st.m(s.parentNode,s)):st&&(st.d(1),st=null),V[4].screenshot.ongoing&&V[17][V[2]]<=1?k||(k=xl(),k.c(),k.m(o.parentNode,o)):k&&(k.d(1),k=null),V[4].screenshot.ongoing?fe||(fe=$l(),fe.c(),fe.m(r.parentNode,r)):fe&&(fe.d(1),fe=null),ye[0]&2097408){he=Ie(V[21]);let Ye;for(Ye=0;Ye<he.length;Ye+=1){const Jn=Yl(V,he,Ye);ve[Ye]?ve[Ye].p(Jn,ye):(ve[Ye]=ea(Jn),ve[Ye].c(),ve[Ye].m(a,null))}for(;Ye<ve.length;Ye+=1)ve[Ye].d(1);ve.length=he.length}V[6]?Le?(Le.p(V,ye),ye[0]&64&&L(Le,1)):(Le=ta(V),Le.c(),L(Le,1),Le.m(u.parentNode,u)):Le&&(qe(),H(Le,1,1,()=>{Le=null}),We()),V[4].screenshot.ongoing?He?(He.p(V,ye),ye[0]&16&&L(He,1)):(He=na(V),He.c(),L(He,1),He.m(y,E)):He&&(qe(),H(He,1,1,()=>{He=null}),We()),V[3]?Ge?(Ge.p(V,ye),ye[0]&8&&L(Ge,1)):(Ge=ia(V),Ge.c(),L(Ge,1),Ge.m(y,w)):Ge&&(qe(),H(Ge,1,1,()=>{Ge=null}),We()),V[4].screenshot.ongoing?Ze?(Ze.p(V,ye),ye[0]&16&&L(Ze,1)):(Ze=sa(V),Ze.c(),L(Ze,1),Ze.m(y,U)):Ze&&(qe(),H(Ze,1,1,()=>{Ze=null}),We());let Tt=Y;Y=Qo(V),Y===Tt?~Y&&Dt[Y].p(V,ye):(ue&&(qe(),H(Dt[Tt],1,1,()=>{Dt[Tt]=null}),We()),~Y?(ue=Dt[Y],ue?ue.p(V,ye):(ue=Dt[Y]=x[Y](V),ue.c()),L(ue,1),ue.m(y,null)):ue=null),V[12]?ft&&(qe(),H(ft,1,1,()=>{ft=null}),We()):ft?ye[0]&4096&&L(ft,1):(ft=oa(),ft.c(),L(ft,1),ft.m(ee,null)),V[5]?It&&(It.d(1),It=null):It||(It=ra(),It.c(),It.m(je.parentNode,je))},i(V){_e||(L(Le),L(He),L(Ge),L(I.$$.fragment,V),L(j.$$.fragment,V),L(K.$$.fragment,V),L(S.$$.fragment,V),L(J.$$.fragment,V),L(F.$$.fragment,V),L(Ze),L(ue),L(ft),_e=!0)},o(V){H(Le),H(He),H(Ge),H(I.$$.fragment,V),H(j.$$.fragment,V),H(K.$$.fragment,V),H(S.$$.fragment,V),H(J.$$.fragment,V),H(F.$$.fragment,V),H(Ze),H(ue),H(ft),_e=!1},d(V){V&&(P(e),P(l),P(a),P(c),P(u),P(d),P(f),P(h),P(_),P(b),P(v),P(y),P(ce),P(ee),P(Me),P(Oe),P(nt),P(ze),P(De),P(je)),it&&it.d(V),P(t),ht(et,V),P(i),st&&st.d(V),P(s),k&&k.d(V),P(o),fe&&fe.d(V),P(r),ht(ve,V),Le&&Le.d(V),He&&He.d(),Ge&&Ge.d(),ie(I),ie(j),ie(K),ie(S),ie(J),ie(F),Ze&&Ze.d(),~Y&&Dt[Y].d(),ft&&ft.d(),It&&It.d(V),ae=!1,be(gt)}}}let no="v3.26.7";function Ab(n,e,t){let i,s,o,r,l,a,c,u,d,f,h,_,b,v,y;Q(n,kt,k=>t(3,s=k)),Q(n,Z,k=>t(4,o=k)),Q(n,vn,k=>t(11,r=k)),Q(n,ao,k=>t(25,l=k)),Q(n,qn,k=>t(43,a=k)),Q(n,jt,k=>t(44,c=k)),Q(n,Bn,k=>t(45,u=k)),Q(n,qt,k=>t(46,d=k)),Q(n,Pi,k=>t(12,f=k)),Q(n,xt,k=>t(13,h=k)),Q(n,Rt,k=>t(14,_=k)),Q(n,Bt,k=>t(47,b=k)),Q(n,co,k=>t(15,v=k)),Q(n,Nt,k=>t(16,y=k));let E=!1,w,I,T=7,j=[.2,.3,.45,.6,.75,.85,.95,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],O=!1,W,z=["fd-currentGameData","fd-playerStats","fd-settings","fd-version","fd-changelogSeen"],K=new URLSearchParams(location.search).get("id"),R=location.href.includes("ls=true");for(let k of B_){let fe=`https://raw.githubusercontent.com/XT8SS/fantastic-calculator/gh-pages/ff-data/${k}.json`;fetch(fe).then(async he=>{if(he.status!=200){console.error(`Failed to fetch "${k}" data!
Status: ${he.status}`);return}G(Bt,b[k]=await he.json(),b)}).catch(he=>console.error(`Failed to initiate "${k}" data fetch!
${he}`))}Ru(()=>{t(5,E=!0),K?(R&&window.history.replaceState(null,null,location.origin+location.pathname+`?id=${K}`),S()):R&&window.history.replaceState(null,null,location.origin+location.pathname),_[Object.keys(_)[0]]&&G(xt,h=!0,h),localStorage.getItem("version")!=no&&(G(Pi,f=!1,f),localStorage.setItem("version",no)),localStorage.getItem("changelogSeen")||localStorage.setItem("changelogSeen",!1)});function S(){if(G(Z,o.load.ongoing=!0,o),!K.startsWith("-N"))G(Z,o.load.status=-1,o),G(Z,o.message="invalid_id",o);else{G(Z,o.load.status=0,o);let k=iu(jn(Gn,"builds"),nu()),fe=0;tu(k).then(he=>{for(let ve in he.val()){if(ve==K){D(he.val()[ve],ve);break}else fe==Object.keys(he.val()).length-1&&(G(Z,o.load.status=-1,o),G(Z,o.message="invalid_id",o));fe++}}).catch(()=>{G(Z,o.load.status=-1,o),G(Z,o.message="firebase_fail",o)})}}function D(k,fe){for(let he in k.eq){let ve=d[he]||vs;k.eq[he]&&k.eq[he]!=ve.name?u[he][k.eq[he]].querySelector("button").click():!k.eq[he]&&ve.name&&u[he][ve.name].querySelector("button").click()}for(let he of En){let ve=c[he]||ys;ve.name&&a[he][ve.name].querySelector("button").click()}setTimeout(()=>{for(let he of En)k.gear[he]&&a[he][k.gear[he]].querySelector("button").click();G(Z,o.load.ongoing=!1,o),G(Z,o.load.status=null,o),fe&&(G(kt,s=k,s),G(kt,s.id=fe,s),t(7,K=null))})}let J=[],A=[],F,B,U=9;for(let k=0;k<U;k++)J.push(`backgrounds/BG${k}.jpg`);function Y(k){B=Math.floor(Math.random()*k.length)}Y(J);function ue(){t(8,F=B),A.push(B)}ue(),function k(){setTimeout(()=>{if(Y(J),!A.length)ue();else if(A.length>3&&(A=A.slice(1)),!A.includes(B))ue();else{let fe=[...Array(U).keys()].filter(he=>!A.includes(he));Y(fe),ue()}document.hasFocus&&k()},45e3)}();function ce(){W=setTimeout(()=>{t(6,O=!1)},750)}function ee(){clearTimeout(W),t(6,O=!0),ce()}function q(){G(Z,o.export.status=null,o),G(Z,o.export.ongoing=!1,o),G(Z,o.save.status=null,o),G(Z,o.save.ongoing=!1,o),G(Z,o.load.status=null,o),G(Z,o.load.ongoing=!1,o),G(Z,o.delete.status=null,o),G(Z,o.delete.ongoing=!1,o),G(Z,o.share.ongoing=!1,o),G(Z,o.message="",o)}function X(){let k=I>w;document.documentElement.style.fontSize=`${(k?.75:window.outerWidth/window.outerHeight/2)*j[T]}vh`}let de=!1;const Be=k=>{(v||r)&&k.preventDefault()},Me=k=>{if(k.key=="builds")if(k.url.includes("ls=true")){G(Rt,_=JSON.parse(k.newValue),_),G(xt,h=Object.keys(JSON.parse(k.newValue)).length>0,h),q();let fe=Object.keys(JSON.parse(k.oldValue)).filter(he=>!Object.keys(JSON.parse(k.newValue)).includes(he))[0];fe&&s&&fe==s.name&&G(kt,s=null,s)}else window.localStorage.setItem("builds",JSON.stringify(_));else z.includes(k.key)&&localStorage.setItem(k.key,k.oldValue)},Oe=k=>{let fe=k.wheelDeltaY;if(k.ctrlKey){if(k.preventDefault(),j[T]==.2&&fe<0||j[T]==5&&fe>0)return;fe>0?t(2,T++,T):t(2,T--,T),ee()}},nt=k=>{k.ctrlKey&&(k.key=="-"||k.key=="+"||k.code=="Equal"||k.key=="0")&&(k.preventDefault(),(k.key=="+"||k.code=="Equal")&&j[T]!=5?t(2,T++,T):k.key=="-"&&j[T]!=.2?t(2,T--,T):k.key=="0"&&j[T]!=1&&t(2,T=7),ee()),r&&z_(k)};function ze(){t(0,w=pn.outerHeight),t(1,I=pn.outerWidth)}const De=()=>{document.visibilityState=="visible"&&setTimeout(()=>{t(0,w=window.outerHeight),t(1,I=window.outerWidth),X()})},je=k=>{on(k),r||G(Z,o.resources.ongoing=!0,o)},_e=()=>{r||G(Z,o.share.ongoing=!0,o)},ae=()=>t(9,de=!0),gt=()=>t(9,de=!1);function it(k){K=k,t(7,K)}const Ot=k=>D(k.detail.build,k.detail.id),et=k=>{on(k),!r&&(G(Z,o.changelog.ongoing=!0,o),G(Pi,f=!0,f))},st=k=>{on(k),r||G(Z,o.policy.ongoing=!0,o)};return n.$$.update=()=>{if(n.$$.dirty[0]&33554435&&(I||w)&&l)for(let k of l)Go(k.node,k.itemName);n.$$.dirty[0]&7&&(I||w||T)&&X(),n.$$.dirty[0]&16&&t(10,i=o.export.status||o.save.status||o.load.status||o.delete.status),n.$$.dirty[0]&16&&G(vn,r=o.item.ongoing||o.export.ongoing||o.save.ongoing||o.load.ongoing||o.delete.ongoing||o.share.ongoing||o.costs.ongoing||o.bonus.ongoing||o.randomize.ongoing||o.resources.ongoing||o.changelog.ongoing||o.policy.ongoing,r),n.$$.dirty[0]&8&&(document.title=(s?s.name+" - ":"")+"Fantastic Calculator")},[w,I,T,s,o,E,O,K,F,de,i,r,f,h,_,v,y,j,z,S,D,J,ee,q,X,l,Be,Me,Oe,nt,ze,De,je,_e,ae,gt,it,Ot,et,st]}class Pb extends Ne{constructor(e){super(),Te(this,e,Ab,Rb,ge,{},null,[-1,-1])}}new Pb({target:document.body});
